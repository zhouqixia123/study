{"version":3,"sources":["./node_modules/rrweb/es/rrweb/src/types.js","./node_modules/rrweb/es/rrweb/src/plugins/console/record/index.js","./node_modules/rrweb/es/rrweb/ext/rrweb-snapshot/es/rrweb-snapshot.js","./node_modules/rrweb/es/rrweb/src/packer/unpack.js","./node_modules/rrweb/es/rrweb/src/record/shadow-dom-manager.js","./node_modules/rrweb/es/rrweb/src/packer/pack.js","./node_modules/rrweb/es/rrweb/src/record/observer.js","./node_modules/rrweb/es/rrweb/src/replay/index.js","./node_modules/rrweb/es/rrweb/src/record/index.js","./node_modules/rrweb/es/rrweb/src/record/mutation.js","./node_modules/rrweb/es/rrweb/src/record/iframe-manager.js","./src/app/rr-web/rr-web/rr-web.component.ts","./src/app/rr-web/rr-web/rr-web.component.html","./node_modules/rrweb/es/rrweb/src/plugins/console/replay/index.js","./node_modules/rrweb/es/rrweb/src/replay/styles/inject-style.js","./node_modules/rrweb/es/rrweb/ext/fflate/esm/browser.js","./node_modules/rrweb/es/rrweb/src/entries/all.js","./src/app/service/rrweb.service.ts","./node_modules/rrweb/es/rrweb/src/replay/machine.js","./node_modules/rrweb/es/rrweb/src/index.js","./src/app/rr-web/rr-web.module.ts","./node_modules/rrweb/es/rrweb/ext/tslib/tslib.es6.js","./src/app/rr-web/rr-web-routing.module.ts","./src/app/rr-web/playrrweb/playrrweb.component.ts","./src/app/rr-web/playrrweb/playrrweb.component.html","./node_modules/rrweb/es/rrweb/src/packer/base.js","./node_modules/rrweb/es/rrweb/src/plugins/console/record/error-stack-parser.js","./node_modules/rrweb/es/rrweb/src/utils.js","./node_modules/rrweb/es/rrweb/ext/@xstate/fsm/es/index.js","./node_modules/rrweb/es/rrweb/src/plugins/console/record/stringify.js","./node_modules/rrweb/es/rrweb/src/replay/timer.js","./node_modules/rrweb/es/rrweb/ext/mitt/dist/mitt.es.js","./node_modules/rrweb/es/rrweb/src/replay/smoothscroll.js"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8BAA8B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC;;AAEqD;;;;;;;;;;;;;ACjE9F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwE;AAC9B;AACC;AACgB;;AAE3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,uEAAgB,yCAAyC,8BAA8B,EAAE;AACrH,+BAA+B,+DAAS;AACxC;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,sBAAsB,wEAAQ,mCAAmC,UAAU;AAC3E;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA,6CAA6C,YAAY,EAAE;AAC3D;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,eAAe,uDAAK;AACpB;AACA;AACA,gCAAgC,uBAAuB;AACvD;AACA;AACA;AACA;AACA,gCAAgC,uEAAgB;AAChD,oDAAoD,8BAA8B,EAAE;AACpF;AACA;AACA,+BAA+B,+DAAS;AACxC,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+DAAS;AACzC;AACA,yBAAyB;AACzB;AACA;AACA;AACA,2CAA2C,wEAAQ;AACnD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA,0BAA0B;AAC1B;AACA,CAAC,EAAE;;AAE4C;;;;;;;;;;;;;AChI/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,qBAAqB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wSAAwS;AACxS;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,gBAAgB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2ZAA2Z,8ZAA8Z,cAAc,EAAE;AACz0B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,SAAS;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,gBAAgB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,0BAA0B,8yBAA8yB,cAAc,EAAE;AACx1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,YAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0EAA0E;AAC1E;AACA;AACA;AACA;AACA,SAAS;AACT,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,0DAA0D,IAAI;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mDAAmD,IAAI;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA,4CAA4C,8CAA8C,EAAE;AAC5F,+BAA+B,4BAA4B,EAAE;AAC7D;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,gBAAgB;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gDAAgD,EAAE;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,eAAe;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,6BAA6B;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEwL;;;;;;;;;;;;;ACh7CxL;AAAA;AAAA;AAAA;AAAiF;AAChD;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4EAAS,CAAC,6EAAU,CAAC,0EAAO;AACvD,oBAAoB,6CAAI;AACxB;AACA;AACA,wHAAwH,6CAAI;AAC5H;AACA;AACA;AACA;AACA;AACA;;AAEkB;;;;;;;;;;;;;AC5BlB;AAAA;AAAA;AAAyE;;AAEzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,yEAAoB;AAC5B,QAAQ,uEAAkB;AAC1B;AACA;AACA,CAAC;;AAE2B;;;;;;;;;;;;;AChB5B;AAAA;AAAA;AAAA;AAAA;AAAwD;AACuB;AAC9C;;AAEjC;AACA,aAAa,wEAAQ,CAAC,wEAAQ,GAAG,WAAW,IAAI,6CAAI,EAAE;AACtD,WAAW,4EAAS,CAAC,2EAAQ,CAAC,0EAAO;AACrC;;AAEgB;;;;;;;;;;;;;ACThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4E;AACG;AACO;AACkC;AAC7E;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oDAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,0DAAQ;AAC5B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL,yBAAyB,0DAAQ;AACjC;AACA,iBAAiB,8DAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,cAAc,2DAAiB;AAC/B;AACA,kBAAkB,2DAAiB;AACnC,kBAAkB,2DAAiB;AACnC,KAAK;AACL;AACA,KAAK;AACL;AACA,QAAQ,oDAAE;AACV,QAAQ,oDAAE;AACV,QAAQ,oDAAE;AACV;AACA;AACA,uCAAuC,YAAY,EAAE;AACrD;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAS;AACzB;AACA;AACA,oBAAoB,8DAAY;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,2DAAiB;AACvC;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,gBAAgB,2DAAiB;AACjC;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,sBAAsB,oDAAE;AACxB,KAAK;AACL;AACA,uCAAuC,YAAY,EAAE;AACrD;AACA;AACA;AACA,yBAAyB,0DAAQ;AACjC;AACA,uBAAuB,2DAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL,WAAW,oDAAE;AACb;AACA;AACA;AACA;AACA,0BAA0B,0DAAQ;AAClC,qBAAqB,iEAAe;AACpC,oBAAoB,gEAAc;AAClC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,KAAK;AACL,WAAW,oDAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,2DAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,+FAAc;AACjC;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,6BAA6B,mCAAmC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,wEAAQ,CAAC,wEAAQ,GAAG,OAAO,SAAS;AACnD;AACA;AACA;AACA,oDAAoD,QAAQ,oDAAE,+BAA+B,EAAE;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,wEAAQ;AAC9C,mBAAmB,4DAAU;AAC7B;AACA,kCAAkC,eAAe;AACjD,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT;AACA;AACA,uCAAuC,YAAY,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,2BAA2B;AACnD,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,eAAe;AAC1C,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,uBAAuB,2DAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,MAAM;AACN;AACA,QAAQ,oDAAE,iBAAiB,2DAAiB;AAC5C,QAAQ,oDAAE,kBAAkB,2DAAiB;AAC7C,QAAQ,oDAAE,mBAAmB,2DAAiB;AAC9C;AACA;AACA,uCAAuC,YAAY,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uDAAK;AACtC;AACA;AACA;AACA,oCAAoC,uBAAuB;AAC3D;AACA;AACA,yBAAyB,2DAAS;AAClC;AACA,6CAA6C,wEAAQ;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8BAA8B,4DAAU;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA,2BAA2B,wEAAQ,oCAAoC,iBAAiB;AACxF;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA,uCAAuC,YAAY,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,yBAAyB,uDAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,uCAAuC,YAAY,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,wCAAwC,wEAAQ;AAChD;AACA,iCAAiC,wEAAQ;AACzC;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,yCAAyC,wEAAQ;AACjD;AACA,kCAAkC,wEAAQ;AAC1C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,gDAAgD,wEAAQ;AACxD;AACA,yCAAyC,wEAAQ;AACjD;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,sCAAsC,wEAAQ;AAC9C;AACA,+BAA+B,wEAAQ;AACvC;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,8CAA8C,wEAAQ;AACtD;AACA,uCAAuC,wEAAQ;AAC/C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,qCAAqC,wEAAQ;AAC7C;AACA,8BAA8B,wEAAQ;AACtC;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,+CAA+C,wEAAQ;AACvD;AACA,yCAAyC,wEAAQ;AACjD;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,8CAA8C,wEAAQ;AACtD;AACA,uCAAuC,wEAAQ;AAC/C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,8CAA8C,wEAAQ;AACtD;AACA,uCAAuC,wEAAQ;AAC/C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA,oCAAoC,wEAAQ;AAC5C;AACA,6BAA6B,wEAAQ;AACrC;AACA;AACA;AACA;AACA,2BAA2B,YAAY;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,kFAAkF;AAClF;AACA;AACA,sBAAsB,wEAAQ,4BAA4B,UAAU;AACpE;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,YAAY,EAAE;AAC3D;AACA;;AAEgG;;;;;;;;;;;;;ACxjBhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4E;AACuB;AACc;AACsD;AAC7G;AACN;AACP;AACV;AACoC;AAC1B;;AAE7C;AACA;AACA,WAAW,iEAAM,IAAI,sDAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,8DAAY;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA,wBAAwB,wDAAc;AACtC;AACA,6BAA6B,mDAAS;AACtC;AACA;AACA,wBAAwB,wDAAc;AACtC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,8BAA8B,wEAAQ,qCAAqC,UAAU;AACrF;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA,8BAA8B,wEAAQ,oCAAoC,UAAU;AACpF;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA,SAAS;AACT,wBAAwB,wDAAc;AACtC;AACA;AACA,SAAS;AACT,wBAAwB,+CAAK;AAC7B,uBAAuB,uEAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,yCAAyC,oCAAoC,EAAE;AAC/E;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,wDAAc;AAC7C;AACA,aAAa;AACb,SAAS;AACT,4BAA4B,sEAAkB;AAC9C;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,wDAAc;AAC7C;AACA,aAAa;AACb,SAAS;AACT,6EAA6E,mBAAmB,mDAAS,MAAM,EAAE;AACjH,qFAAqF,mBAAmB,mDAAS,cAAc,EAAE;AACjI;AACA;AACA;AACA,mCAAmC,wDAAc;AACjD;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA,+BAA+B,yBAAyB,yBAAyB,EAAE;AACnF;AACA;AACA,+BAA+B,gBAAgB;AAC/C,+BAA+B,yBAAyB,yBAAyB,EAAE;AACnF;AACA;AACA,0BAA0B,wDAAc;AACxC;AACA;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA,0BAA0B,wDAAc;AACxC;AACA;AACA,oCAAoC,gBAAgB;AACpD;AACA;AACA,0BAA0B,wDAAc;AACxC;AACA;AACA,2BAA2B,4BAA4B,6BAA6B,EAAE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,8BAA8B,eAAe,EAAE;AACtF,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,iEAAQ;AACpB,YAAY,0DAAU;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wEAAQ,gDAAgD,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA,iBAAiB,mDAAS;AAC1B,iBAAiB,mDAAS;AAC1B;AACA,iBAAiB,mDAAS;AAC1B;AACA,uCAAuC,wDAAc;AACrD;AACA;AACA,iBAAiB,mDAAS;AAC1B;AACA,8CAA8C,wDAAc;AAC5D;AACA;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB,mDAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,mDAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,wEAAQ,qDAAqD,UAAU;AACjH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,QAAQ,gBAAgB;AAC/D;AACA;AACA;AACA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,yCAAyC;AAC9F,+CAA+C,wDAAc;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,wEAAQ,6CAA6C,UAAU;AAC7F;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA,gCAAgC,+BAA+B,eAAe,EAAE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wDAAc;AACrD;AACA,mCAAmC,mDAAS;AAC5C,0CAA0C,2DAAiB;AAC3D;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gBAAgB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wFAAO;AACjC;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,mFAAmF,8BAA8B,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,wEAAQ,gDAAgD,qBAAqB;AAChH;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wDAAc;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,uEAAK;AACrC;AACA,yDAAyD,yCAAyC,EAAE;AACpG;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,gGAAe;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,mFAAmF,8BAA8B,EAAE;AACnH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,wEAAQ,gDAAgD,qBAAqB;AAChH;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA,YAAY,+DAAa;AACzB,2EAA2E,yCAAyC,EAAE;AACtH;AACA,gCAAgC,yDAAyD;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,wDAAc;AAC1C,4BAA4B,wDAAc;AAC1C;AACA,kCAAkC,wDAAc;AAChD,kCAAkC,wDAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wDAAc;AAC7D;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA,mCAAmC,gBAAgB;AACnD,kCAAkC,wDAAc;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wDAAc;AACtC,wBAAwB,wDAAc;AACtC;AACA;AACA;AACA,0BAA0B,wEAAQ,oDAAoD,UAAU;AAChG;AACA,mCAAmC,mDAAS;AAC5C,0CAA0C,2DAAiB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA,+BAA+B,gBAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA,iDAAiD,+BAA+B,EAAE;AAClF,kDAAkD,gCAAgC,EAAE;AACpF,uDAAuD,qCAAqC,EAAE;AAC9F,oDAAoD,gDAAgD,EAAE;AACtG;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC,iBAAiB,2DAAiB;AAClC,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,+CAA+C,EAAE;AACjD;AACA,qBAAqB;AACrB;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA,sCAAsC,2DAAiB;AACvD;AACA;AACA;AACA;AACA,kCAAkC,wDAAc;AAChD;AACA;AACA,iBAAiB;AACjB;AACA;AACA,yBAAyB,2DAAiB;AAC1C;AACA;AACA;AACA;AACA,yBAAyB,2DAAiB;AAC1C;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,yBAAyB,2DAAiB;AAC1C,yBAAyB,2DAAiB;AAC1C,yBAAyB,2DAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC,kCAAkC,wDAAc;AAChD;AACA;AACA,iBAAiB;AACjB;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,2DAAiB;AACpD;AACA;AACA,mCAAmC,2DAAiB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,2DAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,+DAAa;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,oCAAoC,wEAAQ,GAAG;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,iFAAQ;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,+DAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,+DAAa;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+DAAa;AAC7B;AACA;AACA;AACA,yBAAyB,gGAAe;AACxC;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,+DAAa;AAC7B,kFAAkF,sCAAsC,EAAE;AAC1H;AACA;AACA,yFAAyF,gCAAgC,EAAE;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,+BAA+B,qEAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,wEAAQ,0DAA0D,wBAAwB;AACnJ;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,oEAAkB;AAC1C;AACA,yBAAyB;AACzB;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,kEAAgB;AACnC;AACA;AACA;AACA;AACA,4BAA4B,eAAe;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,6BAA6B,EAAE;AACrF;AACA;AACA;AACA;AACA;AACA,2EAA2E,uBAAuB,EAAE;AACpG;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mDAAS;AACpC;AACA;AACA,oCAAoC,2DAAiB;AACrD,iCAAiC,2DAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yBAAyB;AACzD,0BAA0B,wDAAc;AACxC;AACA,SAAS;AACT;AACA;AACA;AACA,iCAAiC,iFAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,kCAAkC,wEAAQ,uCAAuC,UAAU;AAC3F;AACA;AACA;AACA;AACA,gCAAgC,SAAS,iBAAiB;AAC1D;AACA;AACA;AACA;AACA,6BAA6B,4BAA4B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,wEAAQ,uCAAuC,UAAU;AACvF;AACA;AACA;AACA;AACA,4BAA4B,SAAS,iBAAiB;AACtD;AACA;AACA;AACA;AACA,yBAAyB,4BAA4B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,oCAAoC,wEAAQ;AAC5C;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA,mCAAmC,wEAAQ;AAC3C;AACA;AACA,CAAC;;AAEmB;;;;;;;;;;;;;AChzCpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgE;AACS;AACd;AAC6D;AACzD;AACX;AACO;;AAE3D;AACA,WAAW,wEAAQ,CAAC,wEAAQ,GAAG,OAAO,wBAAwB;AAC9D;AACA;AACA;AACA,aAAa,8DAAY;AACzB;AACA,6BAA6B,cAAc;AAC3C,41BAA41B,kSAAkS,cAAc,EAAE;AAC9oC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0DAAQ;AACZ;AACA;AACA;AACA;AACA,mBAAmB,4DAAe;AAClC,uBAAuB,mDAAS;AAChC,yBAAyB,mDAAS;AAClC,kCAAkC,2DAAiB;AACnD,YAAY,4DAAe,yBAAyB,uBAAuB,EAAE;AAC7E;AACA;AACA,uBAAuB,mDAAS;AAChC;AACA;AACA;AACA,4BAA4B,mDAAS;AACrC,kCAAkC,2DAAiB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,mDAAS;AAC3B,kBAAkB,wEAAQ,EAAE,SAAS,2DAAiB,WAAW;AACjE,SAAS;AACT;AACA;AACA;AACA,kBAAkB,mDAAS;AAC3B,kBAAkB,wEAAQ,EAAE,SAAS,2DAAiB,SAAS;AAC/D,SAAS;AACT;AACA,4BAA4B,gEAAa;AACzC;AACA,KAAK;AACL,+BAA+B,uEAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA,oCAAoC,oBAAoB;AACxD;AACA,kBAAkB,mDAAS;AAC3B;AACA;AACA,uBAAuB,gEAAc;AACrC,wBAAwB,iEAAe;AACvC,aAAa;AACb,SAAS;AACT,QAAQ,4DAAe,yBAAyB,mBAAmB,EAAE;AACrE,iBAAiB,sEAAM,CAAC,yFAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,+DAAa;AACjC;AACA;AACA,oBAAoB,+DAAa;AACjC;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,kBAAkB,mDAAS;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,QAAQ,4DAAe,yBAAyB,qBAAqB,EAAE;AACvE;AACA;AACA;AACA,wBAAwB,oDAAE;AAC1B;AACA,sBAAsB,mDAAS;AAC/B,wBAAwB;AACxB,aAAa;AACb,SAAS;AACT;AACA,mBAAmB,kEAAa;AAChC;AACA;AACA;AACA,8BAA8B,mDAAS;AACvC;AACA;AACA;AACA,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,mBAAmB;AACrF,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,iBAAiB;AACnF,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,QAAQ;AAC1E,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,mBAAmB;AACrF,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,iBAAiB;AACnF,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,iBAAiB;AACnF,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA,8BAA8B,mDAAS;AACvC,8BAA8B,wEAAQ,EAAE,SAAS,2DAAiB,OAAO;AACzE,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sGAAsG;AACtG;AACA;AACA;AACA;AACA,kCAAkC,mDAAS;AAC3C;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB;AACzB,qBAAqB;AACrB,iBAAiB,EAAE,EAAE;AACrB,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oDAAE;AAC9B;AACA,0BAA0B,mDAAS;AACnC,4BAA4B;AAC5B,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA,6CAA6C,YAAY,EAAE;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mDAAS;AACvB;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,IAAI,4DAAe,yBAAyB,qBAAqB,EAAE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,qEAAM,EAAC;;;;;;;;;;;;;ACxUtB;AAAA;AAAA;AAAA;AAAwD;AAC6G;AACjE;;AAEpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uCAAuC,4BAA4B;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qFAAY;AACzC,kCAAkC,qFAAY;AAC9C;AACA;AACA;AACA,qCAAqC,2DAAS;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6FAAY;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oGAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,+DAAa;AACzC;AACA;AACA,4BAA4B,+DAAa;AACzC;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,wEAAQ,iCAAiC,UAAU;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA,8BAA8B,wEAAQ,iCAAiC,UAAU;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,YAAY;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA,iBAAiB,EAAE,EAAE;AACrB,6CAA6C,kCAAkC,EAAE;AACjF;AACA,+CAA+C;AAC/C;AACA;AACA,iBAAiB,EAAE,EAAE;AACrB,kDAAkD,uCAAuC,EAAE;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAS;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB,2DAAS;AAClC;AACA,mCAAmC,gGAAe;AAClD;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,+FAAc;AAC9C;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,wBAAwB,2DAAS;AACjC;AACA;AACA,mEAAmE,4BAA4B,EAAE;AACjG;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,uDAAuD,mGAAkB;AACzE;AACA;AACA;AACA,uDAAuD,mCAAmC,EAAE;AAC5F;AACA;AACA,uCAAuC,6FAAY;AACnD;AACA;AACA,4BAA4B,2DAAS;AACrC,4BAA4B,2DAAS;AACrC,4BAA4B,2DAAS;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,mEAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,6FAAY;AACtD,6BAA6B;AAC7B;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAS;AACzB;AACA;AACA,0BAA0B,2DAAS;AACnC;AACA;AACA;AACA,oBAAoB,2DAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,8BAA8B,EAAE;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,4CAA4C,oCAAoC,EAAE;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,0BAA0B,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,6EAAc,EAAC;;;;;;;;;;;;;AC3b9B;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;;AAEwB;;;;;;;;;;;;;AC/BzB;AAAA;AAAA;AAAA;AAAA;AAAkD;AACnB;;;AASxB,MAAM,cAAc;IAGzB,YACS,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;QAH5B,WAAM,GAAG,EAAE,CAAC;QACZ,aAAQ,GAAG,IAAI,CAAC;IAKvB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,WAAW,EAAE,CAAC;IACrB,CAAC;IAED,KAAK;QACH,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;IACD,KAAK;QACH,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;IACD,KAAK;QACH,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IACvB,CAAC;IACD,WAAW;QACT,OAAO,CAAC,GAAG,CAAC,4CAAM,EAAE,OAAO,CAAC,CAAC;IAC/B,CAAC;;4EAxBU,cAAc;8FAAd,cAAc;QCV3B,oEAAG;QAAA,wEAAa;QAAA,4DAAI;QACpB,yEACI;QAAA,yEAAsC;QAAnB,mIAAS,WAAO,IAAC;QAAE,6DAAC;QAAA,4DAAM;QAC7C,yEAAuC;QAAnB,mIAAS,WAAO,IAAC;QAAE,6DAAC;QAAA,4DAAM;QAC9C,yEAAuC;QAAnB,mIAAS,WAAO,IAAC;QAAE,6DAAC;QAAA,4DAAM;QAClD,4DAAM;;6FDKO,cAAc;cAL1B,uDAAS;eAAC;gBACT,QAAQ,EAAE,YAAY;gBACtB,WAAW,EAAE,yBAAyB;gBACtC,SAAS,EAAE,CAAC,yBAAyB,CAAC;aACvC;;;;;;;;;;;;;;AETD;AAAA;AAAA;AAAA;AAAA;AAAwE;AACP;AAChB;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wEAAQ,gCAAgC,sBAAsB,EAAE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,wEAAQ,gCAAgC,sBAAsB,EAAE;AACzG;AACA;AACA;AACA;AACA,0BAA0B,wEAAQ,oCAAoC,UAAU;AAChF;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,+BAA+B,mDAAS;AACxC,sCAAsC,2DAAiB;AACvD;AACA;AACA,oCAAoC,mDAAS;AAC7C,sCAAsC,4DAAW;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEkC;;;;;;;;;;;;;AC9GlC;AAAA,mCAAmC;AACnC,0BAA0B,mBAAmB;AAC7C,eAAe,0BAA0B,EAAE;AAC3C,EAAE;;AAEa,oEAAK,EAAC;;;;;;;;;;;;;ACLrB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAA+B;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B,0BAA0B,cAAc;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA,eAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,OAAO;AACjB;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,eAAe,SAAS;AACxB;AACA,iBAAiB,SAAS;AAC1B;AACA,iBAAiB,SAAS;AAC1B;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,sCAAsC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,UAAU;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,cAAc;AACjC;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kBAAkB,EAAE;AAChD;AACA;AACA,YAAY,kBAAkB;AAC9B;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,uCAAuC,EAAE;AAC1E,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,eAAe;AACzC,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA,sBAAsB,WAAW;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,UAAU,kCAAkC;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,UAAU;AACjC;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yEAAyE;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,SAAS;AAC5C;AACA,mCAAmC,QAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,6CAA6C;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,SAAS;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA,SAAS;AACT,wBAAwB,+EAA+E;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,GAAG;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,WAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,cAAc;AACxC,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEoD;;;;;;;;;;;;;AClxBpD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8F;AACzD;AACpB;AAC+B;AACO;AACT;AACW;AAChB;AACI;AAC4C;AACb;;;;;;;;;;;;;ACV5E;AAAA;AAAA;AAA2C;;AAKpC,MAAM,YAAY;IAEvB;QADO,WAAM,GAAG,EAAE,CAAC;IACH,CAAC;;wEAFN,YAAY;+FAAZ,YAAY,WAAZ,YAAY,mBAFX,MAAM;6FAEP,YAAY;cAHxB,wDAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB;;;;;;;;;;;;;;ACJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkE;AACS;AAC1B;AACX;AAC8D;;AAEpG;AACA,qCAAqC,UAAU;AAC/C;AACA,2BAA2B,mDAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iFAAC;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA,uBAAuB,0EAAC;AACxB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,8BAA8B,0EAAC;AAC/B;AACA;AACA;AACA;AACA,uBAAuB,wEAAQ,CAAC,wEAAQ,GAAG,SAAS,6EAA6E;AACjI,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,wEAAQ,uCAAuC,kBAAkB;AACzG;AACA,wBAAwB,0DAAQ;AAChC;AACA;AACA,+BAA+B,QAAQ,gBAAgB;AACvD;AACA;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA;AACA;AACA,iHAAiH,mDAAS;AAC1H,oDAAoD,2DAAiB;AACrE;AACA;AACA;AACA;AACA,iCAAiC,wDAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,wDAAc;AAC3D,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA;AACA;AACA,8CAA8C,wEAAQ,yDAAyD,wBAAwB;AACvI;AACA;AACA;AACA;AACA,+BAA+B,QAAQ,gBAAgB;AACvD;AACA;AACA;AACA;AACA,6BAA6B,0BAA0B;AACvD;AACA,6BAA6B,wDAAc;AAC3C;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,kCAAkC,0EAAC;AACnC,uBAAuB,wEAAQ,CAAC,wEAAQ,GAAG,SAAS,wBAAwB;AAC5E,aAAa;AACb,uBAAuB,0EAAC;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb,sBAAsB,0EAAC;AACvB;AACA;AACA;AACA,oBAAoB,0DAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,wDAAc;AAC3D,6BAA6B;AAC7B;AACA,yBAAyB;AACzB;AACA;AACA,uBAAuB,wEAAQ,CAAC,wEAAQ,GAAG,SAAS,iBAAiB;AACrE,aAAa;AACb,SAAS;AACT,KAAK;AACL,WAAW,6EAAC;AACZ;AACA;AACA,uBAAuB,iFAAC;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,yBAAyB,0EAAC;AAC1B,6CAA6C,wBAAwB,EAAE;AACvE,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL,WAAW,6EAAC;AACZ;;AAE0E;;;;;;;;;;;;;ACrR1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6F;AACzD;AACnB;AAC8B;AACR;AACe;AACT;;AAE7C,qBAAqB,wDAAM;AAC3B,iBAAiB,wDAAM;;AAEe;;;;;;;;;;;;;ACXtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACM;AAEc;AACF;AACU;;AAU9D,MAAM,WAAW;;0FAAX,WAAW;gJAAX,WAAW,kBALb;YACP,4DAAY;YACZ,yEAAkB;SACnB;mIAEU,WAAW,mBANP,uEAAc,EAAE,iFAAkB,aAE/C,4DAAY;QACZ,yEAAkB;6FAGT,WAAW;cAPvB,sDAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,uEAAc,EAAE,iFAAkB,CAAC;gBAClD,OAAO,EAAE;oBACP,4DAAY;oBACZ,yEAAkB;iBACnB;aACF;;;;;;;;;;;;;;ACdD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;;AAEgD;;;;;;;;;;;;;AC7DhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACc;AACV;;;AAE3D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,uEAAc;KAC1B;IACD;QACE,IAAI,EAAE,MAAM;QACV,SAAS,EAAE,iFAAkB;KAChC;CACF,CAAC;AAMK,MAAM,kBAAkB;;iGAAlB,kBAAkB;8JAAlB,kBAAkB,kBAHpB,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,kBAAkB,uFAFnB,4DAAY;6FAEX,kBAAkB;cAJ9B,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;gBACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;aACxB;;;;;;;;;;;;;;ACnBD;AAAA;AAAA;AAAA;AAAkD;;;AAQ3C,MAAM,kBAAkB;IAE7B,YACS,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;IAC/B,CAAC;IAEL,QAAQ;QACN,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAChD,CAAC;IACD,UAAU;QACR,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;QACpD,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC;IACvB,CAAC;;oFAZU,kBAAkB;kGAAlB,kBAAkB;QCR/B,sEACI;QAAA,oEAAG;QAAA,2EAAgB;QAAA,4DAAI;QACvB,yEAA4C;QAAxB,uIAAS,gBAAY,IAAC;QAAE,wEAAE;QAAA,4DAAM;QACxD,4DAAM;;6FDKO,kBAAkB;cAL9B,uDAAS;eAAC;gBACT,QAAQ,EAAE,eAAe;gBACzB,WAAW,EAAE,4BAA4B;gBACzC,SAAS,EAAE,CAAC,4BAA4B,CAAC;aAC1C;;;;;;;;;;;;;;AEPD;AAAA;AAAA;;AAEgB;;;;;;;;;;;;;ACFhB;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,KAAK;AACL;;AAEwC;;;;;;;;;;;;;AC/KxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqD;AAC6C;AACxC;;AAE1D;AACA,4BAA4B,mBAAmB;AAC/C,mBAAmB;AACnB;AACA,wBAAwB,sDAAsD;AAC9E;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,6BAA6B,cAAc;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT,wBAAwB,8CAA8C,QAAQ;AAC9E;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,qFAAY;AACzC;AACA;AACA;AACA;AACA,QAAQ,6FAAY;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,mDAAS;AACtB,aAAa,mDAAS;AACtB,aAAa,mDAAS;AACtB;AACA,aAAa,mDAAS;AACtB,aAAa,mDAAS;AACtB,aAAa,mDAAS;AACtB;AACA;AACA;AACA,aAAa,2DAAiB;AAC9B,aAAa,2DAAiB;AAC9B,aAAa,2DAAiB;AAC9B,aAAa,2DAAiB;AAC9B;AACA,aAAa,2DAAiB;AAC9B,aAAa,2DAAiB;AAC9B,aAAa,2DAAiB;AAC9B,aAAa,2DAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,+DAA+D,mCAAmC,EAAE;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,2DAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,qCAAqC,EAAE;AAC7E;AACA;AACA,sCAAsC,qCAAqC,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA,2EAA2E,uBAAuB,EAAE;AACpG;AACA;AACA;AACA,uEAAuE,sBAAsB,EAAE;AAC/F;AACA;AACA,kDAAkD,uBAAuB,EAAE;AAC3E;AACA,0BAA0B,wEAAQ,wCAAwC,UAAU;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA,0BAA0B,wEAAQ,uCAAuC,UAAU;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,wEAAQ,oCAAoC,iBAAiB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,gBAAgB;AAC3C;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA;AACA;AACA;AACA,0CAA0C,QAAQ;AAClD;AACA;AACA;AACA;AACA;AACA,mCAAmC,iFAAQ;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE4R;;;;;;;;;;;;;ACngB5R;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM,aAAa,kFAAkF,SAAS,GAAG,OAAO,oBAAoB,cAAc,kCAAkC,cAAc,QAAQ,mCAAmC,gBAAgB,+DAA+D,OAAO,uBAAuB,mBAAmB,GAAG,cAAc,mBAAmB,cAAc,cAAc,2BAA2B,OAAO,GAAG,gBAAgB,QAAQ,sDAAsD,gBAAgB,iBAAiB,EAAE,OAAO,kCAAkC,sEAAsE,sBAAsB,0CAA0C,0BAA0B,8BAA8B,0BAA0B,8CAA8C,SAAS,oCAAoC,sBAAsB,cAAc,0BAA0B,SAAS,0EAA0E,0BAA0B,UAAU,UAAU,yEAAyE,SAAS,oBAAoB,+BAA+B,uBAAuB,6BAA6B,KAAK,sBAAsB,IAAI,0GAA0G,8EAA8E,UAAU,UAAU,GAAG,QAAQ,OAAO,0EAA0E,IAAI,sBAAsB,wDAAwD,oBAAoB,gBAAgB,mCAAmC,2BAA2B,eAAe,QAAQ,YAAY,iBAAiB,sCAAsC,SAAS,GAAG,UAAU,QAAQ,IAAI,qCAAqC,QAAQ,qBAAqB,gBAAgB,SAAS,oBAAoB,sCAAsC,aAAa,yBAAyB,IAAI,cAAc,iDAAiD,4BAA4B,qEAAqE,YAAY,KAAK,uBAAuB,sBAAsB,uBAAuB,qBAAqB,mBAAmB,MAAM,4BAA4B,kCAAkC,GAAG,gEAAgE,4BAA4B,iBAAiB,+BAA+B,aAAa,SAAS,cAAc,WAAW;;AAEjiF;;;;;;;;;;;;;AChBnF;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4BAA4B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEqB;;;;;;;;;;;;;ACxGrB;AAAA;AAAA;AAAA;AAA2D;;AAE3D;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,uBAAuB,mDAAS;AAChC,8BAA8B,2DAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE2B;;;;;;;;;;;;;ACzF3B;AAAA;AACA;AACA;;;;AAIA;;;AAGA;;;;;;AAMA;AACA;AACA,cAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,IAAI;AACjB;AACA;AACA;AACA,qDAAqD,cAAc,EAAE;AACrE,oDAAoD,oBAAoB,EAAE;AAC1E;AACA;AACA;;AAEe,mEAAI,EAAC;;;;;;;;;;;;;AC9DpB;AAAA;AAAA;AACA,uBAAuB,YAAY;AACnC,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEoB","file":"rr-web-rr-web-module.js","sourcesContent":["var EventType;\n(function (EventType) {\n    EventType[EventType[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n    EventType[EventType[\"Load\"] = 1] = \"Load\";\n    EventType[EventType[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n    EventType[EventType[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n    EventType[EventType[\"Meta\"] = 4] = \"Meta\";\n    EventType[EventType[\"Custom\"] = 5] = \"Custom\";\n    EventType[EventType[\"Plugin\"] = 6] = \"Plugin\";\n})(EventType || (EventType = {}));\nvar IncrementalSource;\n(function (IncrementalSource) {\n    IncrementalSource[IncrementalSource[\"Mutation\"] = 0] = \"Mutation\";\n    IncrementalSource[IncrementalSource[\"MouseMove\"] = 1] = \"MouseMove\";\n    IncrementalSource[IncrementalSource[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n    IncrementalSource[IncrementalSource[\"Scroll\"] = 3] = \"Scroll\";\n    IncrementalSource[IncrementalSource[\"ViewportResize\"] = 4] = \"ViewportResize\";\n    IncrementalSource[IncrementalSource[\"Input\"] = 5] = \"Input\";\n    IncrementalSource[IncrementalSource[\"TouchMove\"] = 6] = \"TouchMove\";\n    IncrementalSource[IncrementalSource[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n    IncrementalSource[IncrementalSource[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n    IncrementalSource[IncrementalSource[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n    IncrementalSource[IncrementalSource[\"Font\"] = 10] = \"Font\";\n    IncrementalSource[IncrementalSource[\"Log\"] = 11] = \"Log\";\n    IncrementalSource[IncrementalSource[\"Drag\"] = 12] = \"Drag\";\n})(IncrementalSource || (IncrementalSource = {}));\nvar MouseInteractions;\n(function (MouseInteractions) {\n    MouseInteractions[MouseInteractions[\"MouseUp\"] = 0] = \"MouseUp\";\n    MouseInteractions[MouseInteractions[\"MouseDown\"] = 1] = \"MouseDown\";\n    MouseInteractions[MouseInteractions[\"Click\"] = 2] = \"Click\";\n    MouseInteractions[MouseInteractions[\"ContextMenu\"] = 3] = \"ContextMenu\";\n    MouseInteractions[MouseInteractions[\"DblClick\"] = 4] = \"DblClick\";\n    MouseInteractions[MouseInteractions[\"Focus\"] = 5] = \"Focus\";\n    MouseInteractions[MouseInteractions[\"Blur\"] = 6] = \"Blur\";\n    MouseInteractions[MouseInteractions[\"TouchStart\"] = 7] = \"TouchStart\";\n    MouseInteractions[MouseInteractions[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n    MouseInteractions[MouseInteractions[\"TouchEnd\"] = 9] = \"TouchEnd\";\n})(MouseInteractions || (MouseInteractions = {}));\nvar MediaInteractions;\n(function (MediaInteractions) {\n    MediaInteractions[MediaInteractions[\"Play\"] = 0] = \"Play\";\n    MediaInteractions[MediaInteractions[\"Pause\"] = 1] = \"Pause\";\n    MediaInteractions[MediaInteractions[\"Seeked\"] = 2] = \"Seeked\";\n})(MediaInteractions || (MediaInteractions = {}));\nvar ReplayerEvents;\n(function (ReplayerEvents) {\n    ReplayerEvents[\"Start\"] = \"start\";\n    ReplayerEvents[\"Pause\"] = \"pause\";\n    ReplayerEvents[\"Resume\"] = \"resume\";\n    ReplayerEvents[\"Resize\"] = \"resize\";\n    ReplayerEvents[\"Finish\"] = \"finish\";\n    ReplayerEvents[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n    ReplayerEvents[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n    ReplayerEvents[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n    ReplayerEvents[\"SkipStart\"] = \"skip-start\";\n    ReplayerEvents[\"SkipEnd\"] = \"skip-end\";\n    ReplayerEvents[\"MouseInteraction\"] = \"mouse-interaction\";\n    ReplayerEvents[\"EventCast\"] = \"event-cast\";\n    ReplayerEvents[\"CustomEvent\"] = \"custom-event\";\n    ReplayerEvents[\"Flush\"] = \"flush\";\n    ReplayerEvents[\"StateChange\"] = \"state-change\";\n    ReplayerEvents[\"PlayBack\"] = \"play-back\";\n})(ReplayerEvents || (ReplayerEvents = {}));\n\nexport { EventType, IncrementalSource, MediaInteractions, MouseInteractions, ReplayerEvents };\n","import { __values, __spread } from '../../../../ext/tslib/tslib.es6.js';\nimport { patch } from '../../../utils.js';\nimport { stringify } from './stringify.js';\nimport { ErrorStackParser } from './error-stack-parser.js';\n\nvar defaultLogOptions = {\n    level: [\n        'assert',\n        'clear',\n        'count',\n        'countReset',\n        'debug',\n        'dir',\n        'dirxml',\n        'error',\n        'group',\n        'groupCollapsed',\n        'groupEnd',\n        'info',\n        'log',\n        'table',\n        'time',\n        'timeEnd',\n        'timeLog',\n        'trace',\n        'warn',\n    ],\n    lengthThreshold: 1000,\n    logger: console,\n};\nfunction initLogObserver(cb, logOptions) {\n    var e_1, _a;\n    var _this = this;\n    var logger = logOptions.logger;\n    if (!logger) {\n        return function () { };\n    }\n    var logCount = 0;\n    var cancelHandlers = [];\n    if (logOptions.level.includes('error')) {\n        if (window) {\n            var originalOnError_1 = window.onerror;\n            window.onerror = function (msg, file, line, col, error) {\n                if (originalOnError_1) {\n                    originalOnError_1.apply(_this, [msg, file, line, col, error]);\n                }\n                var trace = ErrorStackParser.parse(error).map(function (stackFrame) { return stackFrame.toString(); });\n                var payload = [stringify(msg, logOptions.stringifyOptions)];\n                cb({\n                    level: 'error',\n                    trace: trace,\n                    payload: payload,\n                });\n            };\n            cancelHandlers.push(function () {\n                window.onerror = originalOnError_1;\n            });\n        }\n    }\n    try {\n        for (var _b = __values(logOptions.level), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var levelType = _c.value;\n            cancelHandlers.push(replace(logger, levelType));\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return function () {\n        cancelHandlers.forEach(function (h) { return h(); });\n    };\n    function replace(_logger, level) {\n        var _this = this;\n        if (!_logger[level]) {\n            return function () { };\n        }\n        return patch(_logger, level, function (original) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                original.apply(_this, args);\n                try {\n                    var trace = ErrorStackParser.parse(new Error())\n                        .map(function (stackFrame) { return stackFrame.toString(); })\n                        .splice(1);\n                    var payload = args.map(function (s) {\n                        return stringify(s, logOptions.stringifyOptions);\n                    });\n                    logCount++;\n                    if (logCount < logOptions.lengthThreshold) {\n                        cb({\n                            level: level,\n                            trace: trace,\n                            payload: payload,\n                        });\n                    }\n                    else if (logCount === logOptions.lengthThreshold) {\n                        cb({\n                            level: 'warn',\n                            trace: [],\n                            payload: [\n                                stringify('The number of log records reached the threshold.'),\n                            ],\n                        });\n                    }\n                }\n                catch (error) {\n                    original.apply(void 0, __spread(['rrweb logger error:', error], args));\n                }\n            };\n        });\n    }\n}\nvar PLUGIN_NAME = 'rrweb/console@1';\nvar getRecordConsolePlugin = function (options) { return ({\n    name: PLUGIN_NAME,\n    observer: initLogObserver,\n    options: options\n        ? Object.assign({}, defaultLogOptions, options)\n        : defaultLogOptions,\n}); };\n\nexport { PLUGIN_NAME, getRecordConsolePlugin };\n","var NodeType;\n(function (NodeType) {\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\n})(NodeType || (NodeType = {}));\n\nfunction isElement(n) {\n    return n.nodeType === n.ELEMENT_NODE;\n}\nfunction isShadowRoot(n) {\n    var _a;\n    var host = (_a = n) === null || _a === void 0 ? void 0 : _a.host;\n    return Boolean(host && host.shadowRoot && host.shadowRoot === n);\n}\nfunction maskInputValue(_a) {\n    var maskInputOptions = _a.maskInputOptions, tagName = _a.tagName, type = _a.type, value = _a.value, maskInputFn = _a.maskInputFn;\n    var text = value || '';\n    if (maskInputOptions[tagName.toLowerCase()] ||\n        maskInputOptions[type]) {\n        if (maskInputFn) {\n            text = maskInputFn(text);\n        }\n        else {\n            text = '*'.repeat(text.length);\n        }\n    }\n    return text;\n}\n\nvar _id = 1;\nvar tagNameRegex = RegExp('[^a-z0-9-_:]');\nvar IGNORED_NODE = -2;\nfunction genId() {\n    return _id++;\n}\nfunction getValidTagName(element) {\n    if (element instanceof HTMLFormElement) {\n        return 'form';\n    }\n    var processedTagName = element.tagName.toLowerCase().trim();\n    if (tagNameRegex.test(processedTagName)) {\n        return 'div';\n    }\n    return processedTagName;\n}\nfunction getCssRulesString(s) {\n    try {\n        var rules = s.rules || s.cssRules;\n        return rules ? Array.from(rules).map(getCssRuleString).join('') : null;\n    }\n    catch (error) {\n        return null;\n    }\n}\nfunction getCssRuleString(rule) {\n    return isCSSImportRule(rule)\n        ? getCssRulesString(rule.styleSheet) || ''\n        : rule.cssText;\n}\nfunction isCSSImportRule(rule) {\n    return 'styleSheet' in rule;\n}\nfunction extractOrigin(url) {\n    var origin;\n    if (url.indexOf('//') > -1) {\n        origin = url.split('/').slice(0, 3).join('/');\n    }\n    else {\n        origin = url.split('/')[0];\n    }\n    origin = origin.split('?')[0];\n    return origin;\n}\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")([^\"]*)\"|([^)]*))\\)/gm;\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\nfunction absoluteToStylesheet(cssText, href) {\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\n        var filePath = path1 || path2 || path3;\n        var maybeQuote = quote1 || quote2 || '';\n        if (!filePath) {\n            return origin;\n        }\n        if (!RELATIVE_PATH.test(filePath)) {\n            return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n        }\n        if (DATA_URI.test(filePath)) {\n            return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n        }\n        if (filePath[0] === '/') {\n            return \"url(\" + maybeQuote + (extractOrigin(href) + filePath) + maybeQuote + \")\";\n        }\n        var stack = href.split('/');\n        var parts = filePath.split('/');\n        stack.pop();\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var part = parts_1[_i];\n            if (part === '.') {\n                continue;\n            }\n            else if (part === '..') {\n                stack.pop();\n            }\n            else {\n                stack.push(part);\n            }\n        }\n        return \"url(\" + maybeQuote + stack.join('/') + maybeQuote + \")\";\n    });\n}\nvar SRCSET_NOT_SPACES = /^[^ \\t\\n\\r\\u000c]+/;\nvar SRCSET_COMMAS_OR_SPACES = /^[, \\t\\n\\r\\u000c]+/;\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\n    if (attributeValue.trim() === '') {\n        return attributeValue;\n    }\n    var pos = 0;\n    function collectCharacters(regEx) {\n        var chars, match = regEx.exec(attributeValue.substring(pos));\n        if (match) {\n            chars = match[0];\n            pos += chars.length;\n            return chars;\n        }\n        return '';\n    }\n    var output = [];\n    while (true) {\n        collectCharacters(SRCSET_COMMAS_OR_SPACES);\n        if (pos >= attributeValue.length) {\n            break;\n        }\n        var url = collectCharacters(SRCSET_NOT_SPACES);\n        if (url.slice(-1) === ',') {\n            url = absoluteToDoc(doc, url.substring(0, url.length - 1));\n            output.push(url);\n        }\n        else {\n            var descriptorsStr = '';\n            url = absoluteToDoc(doc, url);\n            var inParens = false;\n            while (true) {\n                var c = attributeValue.charAt(pos);\n                if (c === '') {\n                    output.push((url + descriptorsStr).trim());\n                    break;\n                }\n                else if (!inParens) {\n                    if (c === ',') {\n                        pos += 1;\n                        output.push((url + descriptorsStr).trim());\n                        break;\n                    }\n                    else if (c === '(') {\n                        inParens = true;\n                    }\n                }\n                else {\n                    if (c === ')') {\n                        inParens = false;\n                    }\n                }\n                descriptorsStr += c;\n                pos += 1;\n            }\n        }\n    }\n    return output.join(', ');\n}\nfunction absoluteToDoc(doc, attributeValue) {\n    if (!attributeValue || attributeValue.trim() === '') {\n        return attributeValue;\n    }\n    var a = doc.createElement('a');\n    a.href = attributeValue;\n    return a.href;\n}\nfunction isSVGElement(el) {\n    return el.tagName === 'svg' || el instanceof SVGElement;\n}\nfunction getHref() {\n    var a = document.createElement('a');\n    a.href = '';\n    return a.href;\n}\nfunction transformAttribute(doc, tagName, name, value) {\n    if (name === 'src' || ((name === 'href' || name === 'xlink:href') && value)) {\n        return absoluteToDoc(doc, value);\n    }\n    else if (name === 'background' &&\n        value &&\n        (tagName === 'table' || tagName === 'td' || tagName === 'th')) {\n        return absoluteToDoc(doc, value);\n    }\n    else if (name === 'srcset' && value) {\n        return getAbsoluteSrcsetString(doc, value);\n    }\n    else if (name === 'style' && value) {\n        return absoluteToStylesheet(value, getHref());\n    }\n    else {\n        return value;\n    }\n}\nfunction _isBlockedElement(element, blockClass, blockSelector) {\n    if (typeof blockClass === 'string') {\n        if (element.classList.contains(blockClass)) {\n            return true;\n        }\n    }\n    else {\n        for (var eIndex = 0; eIndex < element.classList.length; eIndex++) {\n            var className = element.classList[eIndex];\n            if (blockClass.test(className)) {\n                return true;\n            }\n        }\n    }\n    if (blockSelector) {\n        return element.matches(blockSelector);\n    }\n    return false;\n}\nfunction needMaskingText(node, maskTextClass, maskTextSelector) {\n    if (!node) {\n        return false;\n    }\n    if (node.nodeType === node.ELEMENT_NODE) {\n        if (typeof maskTextClass === 'string') {\n            if (node.classList.contains(maskTextClass)) {\n                return true;\n            }\n        }\n        else {\n            node.classList.forEach(function (className) {\n                if (maskTextClass.test(className)) {\n                    return true;\n                }\n            });\n        }\n        if (maskTextSelector) {\n            if (node.matches(maskTextSelector)) {\n                return true;\n            }\n        }\n        return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n    }\n    if (node.nodeType === node.TEXT_NODE) {\n        return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n    }\n    return needMaskingText(node.parentNode, maskTextClass, maskTextSelector);\n}\nfunction onceIframeLoaded(iframeEl, listener, iframeLoadTimeout) {\n    var win = iframeEl.contentWindow;\n    if (!win) {\n        return;\n    }\n    var fired = false;\n    var readyState;\n    try {\n        readyState = win.document.readyState;\n    }\n    catch (error) {\n        return;\n    }\n    if (readyState !== 'complete') {\n        var timer_1 = setTimeout(function () {\n            if (!fired) {\n                listener();\n                fired = true;\n            }\n        }, iframeLoadTimeout);\n        iframeEl.addEventListener('load', function () {\n            clearTimeout(timer_1);\n            fired = true;\n            listener();\n        });\n        return;\n    }\n    var blankUrl = 'about:blank';\n    if (win.location.href !== blankUrl ||\n        iframeEl.src === blankUrl ||\n        iframeEl.src === '') {\n        setTimeout(listener, 0);\n        return;\n    }\n    iframeEl.addEventListener('load', listener);\n}\nfunction serializeNode(n, options) {\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, recordCanvas = options.recordCanvas, keepIframeSrcFn = options.keepIframeSrcFn;\n    var rootId;\n    if (doc.__sn) {\n        var docId = doc.__sn.id;\n        rootId = docId === 1 ? undefined : docId;\n    }\n    switch (n.nodeType) {\n        case n.DOCUMENT_NODE:\n            return {\n                type: NodeType.Document,\n                childNodes: [],\n                rootId: rootId,\n            };\n        case n.DOCUMENT_TYPE_NODE:\n            return {\n                type: NodeType.DocumentType,\n                name: n.name,\n                publicId: n.publicId,\n                systemId: n.systemId,\n                rootId: rootId,\n            };\n        case n.ELEMENT_NODE:\n            var needBlock = _isBlockedElement(n, blockClass, blockSelector);\n            var tagName = getValidTagName(n);\n            var attributes_1 = {};\n            for (var _i = 0, _b = Array.from(n.attributes); _i < _b.length; _i++) {\n                var _c = _b[_i], name = _c.name, value = _c.value;\n                attributes_1[name] = transformAttribute(doc, tagName, name, value);\n            }\n            if (tagName === 'link' && inlineStylesheet) {\n                var stylesheet = Array.from(doc.styleSheets).find(function (s) {\n                    return s.href === n.href;\n                });\n                var cssText = getCssRulesString(stylesheet);\n                if (cssText) {\n                    delete attributes_1.rel;\n                    delete attributes_1.href;\n                    attributes_1._cssText = absoluteToStylesheet(cssText, stylesheet.href);\n                }\n            }\n            if (tagName === 'style' &&\n                n.sheet &&\n                !(n.innerText ||\n                    n.textContent ||\n                    '').trim().length) {\n                var cssText = getCssRulesString(n.sheet);\n                if (cssText) {\n                    attributes_1._cssText = absoluteToStylesheet(cssText, getHref());\n                }\n            }\n            if (tagName === 'input' ||\n                tagName === 'textarea' ||\n                tagName === 'select') {\n                var value = n.value;\n                if (attributes_1.type !== 'radio' &&\n                    attributes_1.type !== 'checkbox' &&\n                    attributes_1.type !== 'submit' &&\n                    attributes_1.type !== 'button' &&\n                    value) {\n                    attributes_1.value = maskInputValue({\n                        type: attributes_1.type,\n                        tagName: tagName,\n                        value: value,\n                        maskInputOptions: maskInputOptions,\n                        maskInputFn: maskInputFn,\n                    });\n                }\n                else if (n.checked) {\n                    attributes_1.checked = n.checked;\n                }\n            }\n            if (tagName === 'option') {\n                var selectValue = n.parentElement;\n                if (attributes_1.value === selectValue.value) {\n                    attributes_1.selected = n.selected;\n                }\n            }\n            if (tagName === 'canvas' && recordCanvas) {\n                attributes_1.rr_dataURL = n.toDataURL();\n            }\n            if (tagName === 'audio' || tagName === 'video') {\n                attributes_1.rr_mediaState = n.paused\n                    ? 'paused'\n                    : 'played';\n                attributes_1.rr_mediaCurrentTime = n.currentTime;\n            }\n            if (n.scrollLeft) {\n                attributes_1.rr_scrollLeft = n.scrollLeft;\n            }\n            if (n.scrollTop) {\n                attributes_1.rr_scrollTop = n.scrollTop;\n            }\n            if (needBlock) {\n                var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\n                attributes_1 = {\n                    class: attributes_1.class,\n                    rr_width: width + \"px\",\n                    rr_height: height + \"px\",\n                };\n            }\n            if (tagName === 'iframe' && !keepIframeSrcFn(attributes_1.src)) {\n                delete attributes_1.src;\n            }\n            return {\n                type: NodeType.Element,\n                tagName: tagName,\n                attributes: attributes_1,\n                childNodes: [],\n                isSVG: isSVGElement(n) || undefined,\n                needBlock: needBlock,\n                rootId: rootId,\n            };\n        case n.TEXT_NODE:\n            var parentTagName = n.parentNode && n.parentNode.tagName;\n            var textContent = n.textContent;\n            var isStyle = parentTagName === 'STYLE' ? true : undefined;\n            var isScript = parentTagName === 'SCRIPT' ? true : undefined;\n            if (isStyle && textContent) {\n                textContent = absoluteToStylesheet(textContent, getHref());\n            }\n            if (isScript) {\n                textContent = 'SCRIPT_PLACEHOLDER';\n            }\n            if (!isStyle &&\n                !isScript &&\n                needMaskingText(n, maskTextClass, maskTextSelector) &&\n                textContent) {\n                textContent = maskTextFn\n                    ? maskTextFn(textContent)\n                    : textContent.replace(/[\\S]/g, '*');\n            }\n            return {\n                type: NodeType.Text,\n                textContent: textContent || '',\n                isStyle: isStyle,\n                rootId: rootId,\n            };\n        case n.CDATA_SECTION_NODE:\n            return {\n                type: NodeType.CDATA,\n                textContent: '',\n                rootId: rootId,\n            };\n        case n.COMMENT_NODE:\n            return {\n                type: NodeType.Comment,\n                textContent: n.textContent || '',\n                rootId: rootId,\n            };\n        default:\n            return false;\n    }\n}\nfunction lowerIfExists(maybeAttr) {\n    if (maybeAttr === undefined) {\n        return '';\n    }\n    else {\n        return maybeAttr.toLowerCase();\n    }\n}\nfunction slimDOMExcluded(sn, slimDOMOptions) {\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\n        return true;\n    }\n    else if (sn.type === NodeType.Element) {\n        if (slimDOMOptions.script &&\n            (sn.tagName === 'script' ||\n                (sn.tagName === 'link' &&\n                    sn.attributes.rel === 'preload' &&\n                    sn.attributes.as === 'script'))) {\n            return true;\n        }\n        else if (slimDOMOptions.headFavicon &&\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\n                (sn.tagName === 'meta' &&\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\n            return true;\n        }\n        else if (sn.tagName === 'meta') {\n            if (slimDOMOptions.headMetaDescKeywords &&\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaSocial &&\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaRobots &&\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaHttpEquiv &&\n                sn.attributes['http-equiv'] !== undefined) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaAuthorship &&\n                (lowerIfExists(sn.attributes.name) === 'author' ||\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaVerification &&\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction serializeNodeWithId(n, options) {\n    var doc = options.doc, map = options.map, blockClass = options.blockClass, blockSelector = options.blockSelector, maskTextClass = options.maskTextClass, maskTextSelector = options.maskTextSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, maskTextFn = options.maskTextFn, maskInputFn = options.maskInputFn, slimDOMOptions = options.slimDOMOptions, _d = options.recordCanvas, recordCanvas = _d === void 0 ? false : _d, onSerialize = options.onSerialize, onIframeLoad = options.onIframeLoad, _e = options.iframeLoadTimeout, iframeLoadTimeout = _e === void 0 ? 5000 : _e, _f = options.keepIframeSrcFn, keepIframeSrcFn = _f === void 0 ? function () { return false; } : _f;\n    var _g = options.preserveWhiteSpace, preserveWhiteSpace = _g === void 0 ? true : _g;\n    var _serializedNode = serializeNode(n, {\n        doc: doc,\n        blockClass: blockClass,\n        blockSelector: blockSelector,\n        maskTextClass: maskTextClass,\n        maskTextSelector: maskTextSelector,\n        inlineStylesheet: inlineStylesheet,\n        maskInputOptions: maskInputOptions,\n        maskTextFn: maskTextFn,\n        maskInputFn: maskInputFn,\n        recordCanvas: recordCanvas,\n        keepIframeSrcFn: keepIframeSrcFn,\n    });\n    if (!_serializedNode) {\n        console.warn(n, 'not serialized');\n        return null;\n    }\n    var id;\n    if ('__sn' in n) {\n        id = n.__sn.id;\n    }\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\n        (!preserveWhiteSpace &&\n            _serializedNode.type === NodeType.Text &&\n            !_serializedNode.isStyle &&\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\n        id = IGNORED_NODE;\n    }\n    else {\n        id = genId();\n    }\n    var serializedNode = Object.assign(_serializedNode, { id: id });\n    n.__sn = serializedNode;\n    if (id === IGNORED_NODE) {\n        return null;\n    }\n    map[id] = n;\n    if (onSerialize) {\n        onSerialize(n);\n    }\n    var recordChild = !skipChild;\n    if (serializedNode.type === NodeType.Element) {\n        recordChild = recordChild && !serializedNode.needBlock;\n        delete serializedNode.needBlock;\n    }\n    if ((serializedNode.type === NodeType.Document ||\n        serializedNode.type === NodeType.Element) &&\n        recordChild) {\n        if (slimDOMOptions.headWhitespace &&\n            _serializedNode.type === NodeType.Element &&\n            _serializedNode.tagName === 'head') {\n            preserveWhiteSpace = false;\n        }\n        var bypassOptions = {\n            doc: doc,\n            map: map,\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            maskTextClass: maskTextClass,\n            maskTextSelector: maskTextSelector,\n            skipChild: skipChild,\n            inlineStylesheet: inlineStylesheet,\n            maskInputOptions: maskInputOptions,\n            maskTextFn: maskTextFn,\n            maskInputFn: maskInputFn,\n            slimDOMOptions: slimDOMOptions,\n            recordCanvas: recordCanvas,\n            preserveWhiteSpace: preserveWhiteSpace,\n            onSerialize: onSerialize,\n            onIframeLoad: onIframeLoad,\n            iframeLoadTimeout: iframeLoadTimeout,\n            keepIframeSrcFn: keepIframeSrcFn,\n        };\n        for (var _i = 0, _h = Array.from(n.childNodes); _i < _h.length; _i++) {\n            var childN = _h[_i];\n            var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n            if (serializedChildNode) {\n                serializedNode.childNodes.push(serializedChildNode);\n            }\n        }\n        if (isElement(n) && n.shadowRoot) {\n            serializedNode.isShadowHost = true;\n            for (var _j = 0, _k = Array.from(n.shadowRoot.childNodes); _j < _k.length; _j++) {\n                var childN = _k[_j];\n                var serializedChildNode = serializeNodeWithId(childN, bypassOptions);\n                if (serializedChildNode) {\n                    serializedChildNode.isShadow = true;\n                    serializedNode.childNodes.push(serializedChildNode);\n                }\n            }\n        }\n    }\n    if (n.parentNode && isShadowRoot(n.parentNode)) {\n        serializedNode.isShadow = true;\n    }\n    if (serializedNode.type === NodeType.Element &&\n        serializedNode.tagName === 'iframe') {\n        onceIframeLoaded(n, function () {\n            var iframeDoc = n.contentDocument;\n            if (iframeDoc && onIframeLoad) {\n                var serializedIframeNode = serializeNodeWithId(iframeDoc, {\n                    doc: iframeDoc,\n                    map: map,\n                    blockClass: blockClass,\n                    blockSelector: blockSelector,\n                    maskTextClass: maskTextClass,\n                    maskTextSelector: maskTextSelector,\n                    skipChild: false,\n                    inlineStylesheet: inlineStylesheet,\n                    maskInputOptions: maskInputOptions,\n                    maskTextFn: maskTextFn,\n                    maskInputFn: maskInputFn,\n                    slimDOMOptions: slimDOMOptions,\n                    recordCanvas: recordCanvas,\n                    preserveWhiteSpace: preserveWhiteSpace,\n                    onSerialize: onSerialize,\n                    onIframeLoad: onIframeLoad,\n                    iframeLoadTimeout: iframeLoadTimeout,\n                    keepIframeSrcFn: keepIframeSrcFn,\n                });\n                if (serializedIframeNode) {\n                    onIframeLoad(n, serializedIframeNode);\n                }\n            }\n        }, iframeLoadTimeout);\n    }\n    return serializedNode;\n}\nfunction snapshot(n, options) {\n    var _a = options || {}, _b = _a.blockClass, blockClass = _b === void 0 ? 'rr-block' : _b, _c = _a.blockSelector, blockSelector = _c === void 0 ? null : _c, _d = _a.maskTextClass, maskTextClass = _d === void 0 ? 'rr-mask' : _d, _e = _a.maskTextSelector, maskTextSelector = _e === void 0 ? null : _e, _f = _a.inlineStylesheet, inlineStylesheet = _f === void 0 ? true : _f, _g = _a.recordCanvas, recordCanvas = _g === void 0 ? false : _g, _h = _a.maskAllInputs, maskAllInputs = _h === void 0 ? false : _h, maskTextFn = _a.maskTextFn, maskInputFn = _a.maskInputFn, _j = _a.slimDOM, slimDOM = _j === void 0 ? false : _j, preserveWhiteSpace = _a.preserveWhiteSpace, onSerialize = _a.onSerialize, onIframeLoad = _a.onIframeLoad, iframeLoadTimeout = _a.iframeLoadTimeout, _k = _a.keepIframeSrcFn, keepIframeSrcFn = _k === void 0 ? function () { return false; } : _k;\n    var idNodeMap = {};\n    var maskInputOptions = maskAllInputs === true\n        ? {\n            color: true,\n            date: true,\n            'datetime-local': true,\n            email: true,\n            month: true,\n            number: true,\n            range: true,\n            search: true,\n            tel: true,\n            text: true,\n            time: true,\n            url: true,\n            week: true,\n            textarea: true,\n            select: true,\n            password: true,\n        }\n        : maskAllInputs === false\n            ? {\n                password: true,\n            }\n            : maskAllInputs;\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\n        ?\n            {\n                script: true,\n                comment: true,\n                headFavicon: true,\n                headWhitespace: true,\n                headMetaDescKeywords: slimDOM === 'all',\n                headMetaSocial: true,\n                headMetaRobots: true,\n                headMetaHttpEquiv: true,\n                headMetaAuthorship: true,\n                headMetaVerification: true,\n            }\n        : slimDOM === false\n            ? {}\n            : slimDOM;\n    return [\n        serializeNodeWithId(n, {\n            doc: n,\n            map: idNodeMap,\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            maskTextClass: maskTextClass,\n            maskTextSelector: maskTextSelector,\n            skipChild: false,\n            inlineStylesheet: inlineStylesheet,\n            maskInputOptions: maskInputOptions,\n            maskTextFn: maskTextFn,\n            maskInputFn: maskInputFn,\n            slimDOMOptions: slimDOMOptions,\n            recordCanvas: recordCanvas,\n            preserveWhiteSpace: preserveWhiteSpace,\n            onSerialize: onSerialize,\n            onIframeLoad: onIframeLoad,\n            iframeLoadTimeout: iframeLoadTimeout,\n            keepIframeSrcFn: keepIframeSrcFn,\n        }),\n        idNodeMap,\n    ];\n}\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\nfunction parse(css, options) {\n    if (options === void 0) { options = {}; }\n    var lineno = 1;\n    var column = 1;\n    function updatePosition(str) {\n        var lines = str.match(/\\n/g);\n        if (lines) {\n            lineno += lines.length;\n        }\n        var i = str.lastIndexOf('\\n');\n        column = i === -1 ? column + str.length : str.length - i;\n    }\n    function position() {\n        var start = { line: lineno, column: column };\n        return function (node) {\n            node.position = new Position(start);\n            whitespace();\n            return node;\n        };\n    }\n    var Position = (function () {\n        function Position(start) {\n            this.start = start;\n            this.end = { line: lineno, column: column };\n            this.source = options.source;\n        }\n        return Position;\n    }());\n    Position.prototype.content = css;\n    var errorsList = [];\n    function error(msg) {\n        var err = new Error(options.source + ':' + lineno + ':' + column + ': ' + msg);\n        err.reason = msg;\n        err.filename = options.source;\n        err.line = lineno;\n        err.column = column;\n        err.source = css;\n        if (options.silent) {\n            errorsList.push(err);\n        }\n        else {\n            throw err;\n        }\n    }\n    function stylesheet() {\n        var rulesList = rules();\n        return {\n            type: 'stylesheet',\n            stylesheet: {\n                source: options.source,\n                rules: rulesList,\n                parsingErrors: errorsList,\n            },\n        };\n    }\n    function open() {\n        return match(/^{\\s*/);\n    }\n    function close() {\n        return match(/^}/);\n    }\n    function rules() {\n        var node;\n        var rules = [];\n        whitespace();\n        comments(rules);\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\n            if (node !== false) {\n                rules.push(node);\n                comments(rules);\n            }\n        }\n        return rules;\n    }\n    function match(re) {\n        var m = re.exec(css);\n        if (!m) {\n            return;\n        }\n        var str = m[0];\n        updatePosition(str);\n        css = css.slice(str.length);\n        return m;\n    }\n    function whitespace() {\n        match(/^\\s*/);\n    }\n    function comments(rules) {\n        if (rules === void 0) { rules = []; }\n        var c;\n        while ((c = comment())) {\n            if (c !== false) {\n                rules.push(c);\n            }\n            c = comment();\n        }\n        return rules;\n    }\n    function comment() {\n        var pos = position();\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\n            return;\n        }\n        var i = 2;\n        while ('' !== css.charAt(i) &&\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\n            ++i;\n        }\n        i += 2;\n        if ('' === css.charAt(i - 1)) {\n            return error('End of comment missing');\n        }\n        var str = css.slice(2, i - 2);\n        column += 2;\n        updatePosition(str);\n        css = css.slice(i);\n        column += 2;\n        return pos({\n            type: 'comment',\n            comment: str,\n        });\n    }\n    function selector() {\n        var m = match(/^([^{]+)/);\n        if (!m) {\n            return;\n        }\n        return trim(m[0])\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\n            return m.replace(/,/g, '\\u200C');\n        })\n            .split(/\\s*(?![^(]*\\)),\\s*/)\n            .map(function (s) {\n            return s.replace(/\\u200C/g, ',');\n        });\n    }\n    function declaration() {\n        var pos = position();\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n        if (!propMatch) {\n            return;\n        }\n        var prop = trim(propMatch[0]);\n        if (!match(/^:\\s*/)) {\n            return error(\"property missing ':'\");\n        }\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\n        var ret = pos({\n            type: 'declaration',\n            property: prop.replace(commentre, ''),\n            value: val ? trim(val[0]).replace(commentre, '') : '',\n        });\n        match(/^[;\\s]*/);\n        return ret;\n    }\n    function declarations() {\n        var decls = [];\n        if (!open()) {\n            return error(\"missing '{'\");\n        }\n        comments(decls);\n        var decl;\n        while ((decl = declaration())) {\n            if (decl !== false) {\n                decls.push(decl);\n                comments(decls);\n            }\n            decl = declaration();\n        }\n        if (!close()) {\n            return error(\"missing '}'\");\n        }\n        return decls;\n    }\n    function keyframe() {\n        var m;\n        var vals = [];\n        var pos = position();\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\n            vals.push(m[1]);\n            match(/^,\\s*/);\n        }\n        if (!vals.length) {\n            return;\n        }\n        return pos({\n            type: 'keyframe',\n            values: vals,\n            declarations: declarations(),\n        });\n    }\n    function atkeyframes() {\n        var pos = position();\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\n        if (!m) {\n            return;\n        }\n        var vendor = m[1];\n        m = match(/^([-\\w]+)\\s*/);\n        if (!m) {\n            return error('@keyframes missing name');\n        }\n        var name = m[1];\n        if (!open()) {\n            return error(\"@keyframes missing '{'\");\n        }\n        var frame;\n        var frames = comments();\n        while ((frame = keyframe())) {\n            frames.push(frame);\n            frames = frames.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@keyframes missing '}'\");\n        }\n        return pos({\n            type: 'keyframes',\n            name: name,\n            vendor: vendor,\n            keyframes: frames,\n        });\n    }\n    function atsupports() {\n        var pos = position();\n        var m = match(/^@supports *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var supports = trim(m[1]);\n        if (!open()) {\n            return error(\"@supports missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@supports missing '}'\");\n        }\n        return pos({\n            type: 'supports',\n            supports: supports,\n            rules: style,\n        });\n    }\n    function athost() {\n        var pos = position();\n        var m = match(/^@host\\s*/);\n        if (!m) {\n            return;\n        }\n        if (!open()) {\n            return error(\"@host missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@host missing '}'\");\n        }\n        return pos({\n            type: 'host',\n            rules: style,\n        });\n    }\n    function atmedia() {\n        var pos = position();\n        var m = match(/^@media *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var media = trim(m[1]);\n        if (!open()) {\n            return error(\"@media missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@media missing '}'\");\n        }\n        return pos({\n            type: 'media',\n            media: media,\n            rules: style,\n        });\n    }\n    function atcustommedia() {\n        var pos = position();\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n        if (!m) {\n            return;\n        }\n        return pos({\n            type: 'custom-media',\n            name: trim(m[1]),\n            media: trim(m[2]),\n        });\n    }\n    function atpage() {\n        var pos = position();\n        var m = match(/^@page */);\n        if (!m) {\n            return;\n        }\n        var sel = selector() || [];\n        if (!open()) {\n            return error(\"@page missing '{'\");\n        }\n        var decls = comments();\n        var decl;\n        while ((decl = declaration())) {\n            decls.push(decl);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@page missing '}'\");\n        }\n        return pos({\n            type: 'page',\n            selectors: sel,\n            declarations: decls,\n        });\n    }\n    function atdocument() {\n        var pos = position();\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var vendor = trim(m[1]);\n        var doc = trim(m[2]);\n        if (!open()) {\n            return error(\"@document missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@document missing '}'\");\n        }\n        return pos({\n            type: 'document',\n            document: doc,\n            vendor: vendor,\n            rules: style,\n        });\n    }\n    function atfontface() {\n        var pos = position();\n        var m = match(/^@font-face\\s*/);\n        if (!m) {\n            return;\n        }\n        if (!open()) {\n            return error(\"@font-face missing '{'\");\n        }\n        var decls = comments();\n        var decl;\n        while ((decl = declaration())) {\n            decls.push(decl);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@font-face missing '}'\");\n        }\n        return pos({\n            type: 'font-face',\n            declarations: decls,\n        });\n    }\n    var atimport = _compileAtrule('import');\n    var atcharset = _compileAtrule('charset');\n    var atnamespace = _compileAtrule('namespace');\n    function _compileAtrule(name) {\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\n        return function () {\n            var pos = position();\n            var m = match(re);\n            if (!m) {\n                return;\n            }\n            var ret = { type: name };\n            ret[name] = m[1].trim();\n            return pos(ret);\n        };\n    }\n    function atrule() {\n        if (css[0] !== '@') {\n            return;\n        }\n        return (atkeyframes() ||\n            atmedia() ||\n            atcustommedia() ||\n            atsupports() ||\n            atimport() ||\n            atcharset() ||\n            atnamespace() ||\n            atdocument() ||\n            atpage() ||\n            athost() ||\n            atfontface());\n    }\n    function rule() {\n        var pos = position();\n        var sel = selector();\n        if (!sel) {\n            return error('selector missing');\n        }\n        comments();\n        return pos({\n            type: 'rule',\n            selectors: sel,\n            declarations: declarations(),\n        });\n    }\n    return addParent(stylesheet());\n}\nfunction trim(str) {\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\n}\nfunction addParent(obj, parent) {\n    var isNode = obj && typeof obj.type === 'string';\n    var childParent = isNode ? obj : parent;\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n        var k = _a[_i];\n        var value = obj[k];\n        if (Array.isArray(value)) {\n            value.forEach(function (v) {\n                addParent(v, childParent);\n            });\n        }\n        else if (value && typeof value === 'object') {\n            addParent(value, childParent);\n        }\n    }\n    if (isNode) {\n        Object.defineProperty(obj, 'parent', {\n            configurable: true,\n            writable: true,\n            enumerable: false,\n            value: parent || null,\n        });\n    }\n    return obj;\n}\n\nvar tagMap = {\n    script: 'noscript',\n    altglyph: 'altGlyph',\n    altglyphdef: 'altGlyphDef',\n    altglyphitem: 'altGlyphItem',\n    animatecolor: 'animateColor',\n    animatemotion: 'animateMotion',\n    animatetransform: 'animateTransform',\n    clippath: 'clipPath',\n    feblend: 'feBlend',\n    fecolormatrix: 'feColorMatrix',\n    fecomponenttransfer: 'feComponentTransfer',\n    fecomposite: 'feComposite',\n    feconvolvematrix: 'feConvolveMatrix',\n    fediffuselighting: 'feDiffuseLighting',\n    fedisplacementmap: 'feDisplacementMap',\n    fedistantlight: 'feDistantLight',\n    fedropshadow: 'feDropShadow',\n    feflood: 'feFlood',\n    fefunca: 'feFuncA',\n    fefuncb: 'feFuncB',\n    fefuncg: 'feFuncG',\n    fefuncr: 'feFuncR',\n    fegaussianblur: 'feGaussianBlur',\n    feimage: 'feImage',\n    femerge: 'feMerge',\n    femergenode: 'feMergeNode',\n    femorphology: 'feMorphology',\n    feoffset: 'feOffset',\n    fepointlight: 'fePointLight',\n    fespecularlighting: 'feSpecularLighting',\n    fespotlight: 'feSpotLight',\n    fetile: 'feTile',\n    feturbulence: 'feTurbulence',\n    foreignobject: 'foreignObject',\n    glyphref: 'glyphRef',\n    lineargradient: 'linearGradient',\n    radialgradient: 'radialGradient',\n};\nfunction getTagName(n) {\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\n    if (tagName === 'link' && n.attributes._cssText) {\n        tagName = 'style';\n    }\n    return tagName;\n}\nfunction escapeRegExp(string) {\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nvar HOVER_SELECTOR = /([^\\\\]):hover/;\nvar HOVER_SELECTOR_GLOBAL = new RegExp(HOVER_SELECTOR, 'g');\nfunction addHoverClass(cssText) {\n    var ast = parse(cssText, {\n        silent: true,\n    });\n    if (!ast.stylesheet) {\n        return cssText;\n    }\n    var selectors = [];\n    ast.stylesheet.rules.forEach(function (rule) {\n        if ('selectors' in rule) {\n            (rule.selectors || []).forEach(function (selector) {\n                if (HOVER_SELECTOR.test(selector)) {\n                    selectors.push(selector);\n                }\n            });\n        }\n    });\n    if (selectors.length === 0)\n        return cssText;\n    var selectorMatcher = new RegExp(selectors\n        .filter(function (selector, index) { return selectors.indexOf(selector) === index; })\n        .sort(function (a, b) { return b.length - a.length; })\n        .map(function (selector) {\n        return escapeRegExp(selector);\n    })\n        .join('|'), 'g');\n    return cssText.replace(selectorMatcher, function (selector) {\n        var newSelector = selector.replace(HOVER_SELECTOR_GLOBAL, '$1.\\\\:hover');\n        return selector + \", \" + newSelector;\n    });\n}\nfunction buildNode(n, options) {\n    var doc = options.doc, hackCss = options.hackCss;\n    switch (n.type) {\n        case NodeType.Document:\n            return doc.implementation.createDocument(null, '', null);\n        case NodeType.DocumentType:\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\n        case NodeType.Element:\n            var tagName = getTagName(n);\n            var node_1;\n            if (n.isSVG) {\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\n            }\n            else {\n                node_1 = doc.createElement(tagName);\n            }\n            var _loop_1 = function (name) {\n                if (!n.attributes.hasOwnProperty(name)) {\n                    return \"continue\";\n                }\n                var value = n.attributes[name];\n                value =\n                    typeof value === 'boolean' || typeof value === 'number' ? '' : value;\n                if (!name.startsWith('rr_')) {\n                    var isTextarea = tagName === 'textarea' && name === 'value';\n                    var isRemoteOrDynamicCss = tagName === 'style' && name === '_cssText';\n                    if (isRemoteOrDynamicCss && hackCss) {\n                        value = addHoverClass(value);\n                    }\n                    if (isTextarea || isRemoteOrDynamicCss) {\n                        var child = doc.createTextNode(value);\n                        for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\n                            var c = _a[_i];\n                            if (c.nodeType === node_1.TEXT_NODE) {\n                                node_1.removeChild(c);\n                            }\n                        }\n                        node_1.appendChild(child);\n                        return \"continue\";\n                    }\n                    try {\n                        if (n.isSVG && name === 'xlink:href') {\n                            node_1.setAttributeNS('http://www.w3.org/1999/xlink', name, value);\n                        }\n                        else if (name === 'onload' ||\n                            name === 'onclick' ||\n                            name.substring(0, 7) === 'onmouse') {\n                            node_1.setAttribute('_' + name, value);\n                        }\n                        else if (tagName === 'meta' &&\n                            n.attributes['http-equiv'] === 'Content-Security-Policy' &&\n                            name == 'content') {\n                            node_1.setAttribute('csp-content', value);\n                            return \"continue\";\n                        }\n                        else {\n                            node_1.setAttribute(name, value);\n                        }\n                    }\n                    catch (error) {\n                    }\n                }\n                else {\n                    if (tagName === 'canvas' && name === 'rr_dataURL') {\n                        var image_1 = document.createElement('img');\n                        image_1.src = value;\n                        image_1.onload = function () {\n                            var ctx = node_1.getContext('2d');\n                            if (ctx) {\n                                ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\n                            }\n                        };\n                    }\n                    if (name === 'rr_width') {\n                        node_1.style.width = value;\n                    }\n                    if (name === 'rr_height') {\n                        node_1.style.height = value;\n                    }\n                    if (name === 'rr_mediaCurrentTime') {\n                        node_1.currentTime = n.attributes\n                            .rr_mediaCurrentTime;\n                    }\n                    if (name === 'rr_mediaState') {\n                        switch (value) {\n                            case 'played':\n                                node_1\n                                    .play()\n                                    .catch(function (e) { return console.warn('media playback error', e); });\n                                break;\n                            case 'paused':\n                                node_1.pause();\n                                break;\n                        }\n                    }\n                }\n            };\n            for (var name in n.attributes) {\n                _loop_1(name);\n            }\n            if (n.isShadowHost) {\n                if (!node_1.shadowRoot) {\n                    node_1.attachShadow({ mode: 'open' });\n                }\n                else {\n                    while (node_1.shadowRoot.firstChild) {\n                        node_1.shadowRoot.removeChild(node_1.shadowRoot.firstChild);\n                    }\n                }\n            }\n            return node_1;\n        case NodeType.Text:\n            return doc.createTextNode(n.isStyle && hackCss ? addHoverClass(n.textContent) : n.textContent);\n        case NodeType.CDATA:\n            return doc.createCDATASection(n.textContent);\n        case NodeType.Comment:\n            return doc.createComment(n.textContent);\n        default:\n            return null;\n    }\n}\nfunction buildNodeWithSN(n, options) {\n    var doc = options.doc, map = options.map, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b, afterAppend = options.afterAppend;\n    var node = buildNode(n, { doc: doc, hackCss: hackCss });\n    if (!node) {\n        return null;\n    }\n    if (n.rootId) {\n        console.assert(map[n.rootId] === doc, 'Target document should has the same root id.');\n    }\n    if (n.type === NodeType.Document) {\n        doc.close();\n        doc.open();\n        node = doc;\n    }\n    node.__sn = n;\n    map[n.id] = node;\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\n        !skipChild) {\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\n            var childN = _c[_i];\n            var childNode = buildNodeWithSN(childN, {\n                doc: doc,\n                map: map,\n                skipChild: false,\n                hackCss: hackCss,\n                afterAppend: afterAppend,\n            });\n            if (!childNode) {\n                console.warn('Failed to rebuild', childN);\n                continue;\n            }\n            if (childN.isShadow && isElement(node) && node.shadowRoot) {\n                node.shadowRoot.appendChild(childNode);\n            }\n            else {\n                node.appendChild(childNode);\n            }\n            if (afterAppend) {\n                afterAppend(childNode);\n            }\n        }\n    }\n    return node;\n}\nfunction visit(idNodeMap, onVisit) {\n    function walk(node) {\n        onVisit(node);\n    }\n    for (var key in idNodeMap) {\n        if (idNodeMap[key]) {\n            walk(idNodeMap[key]);\n        }\n    }\n}\nfunction handleScroll(node) {\n    var n = node.__sn;\n    if (n.type !== NodeType.Element) {\n        return;\n    }\n    var el = node;\n    for (var name in n.attributes) {\n        if (!(n.attributes.hasOwnProperty(name) && name.startsWith('rr_'))) {\n            continue;\n        }\n        var value = n.attributes[name];\n        if (name === 'rr_scrollLeft') {\n            el.scrollLeft = value;\n        }\n        if (name === 'rr_scrollTop') {\n            el.scrollTop = value;\n        }\n    }\n}\nfunction rebuild(n, options) {\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a, afterAppend = options.afterAppend;\n    var idNodeMap = {};\n    var node = buildNodeWithSN(n, {\n        doc: doc,\n        map: idNodeMap,\n        skipChild: false,\n        hackCss: hackCss,\n        afterAppend: afterAppend,\n    });\n    visit(idNodeMap, function (visitedNode) {\n        if (onVisit) {\n            onVisit(visitedNode);\n        }\n        handleScroll(visitedNode);\n    });\n    return [node, idNodeMap];\n}\n\nexport { IGNORED_NODE, NodeType, addHoverClass, buildNodeWithSN, isElement, isShadowRoot, maskInputValue, needMaskingText, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n","import { strFromU8, unzlibSync, strToU8 } from '../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nvar unpack = function (raw) {\n    if (typeof raw !== 'string') {\n        return raw;\n    }\n    try {\n        var e = JSON.parse(raw);\n        if (e.timestamp) {\n            return e;\n        }\n    }\n    catch (error) {\n    }\n    try {\n        var e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\n        if (e.v === MARK) {\n            return e;\n        }\n        throw new Error(\"These events were packed with packer \" + e.v + \" which is incompatible with current packer \" + MARK + \".\");\n    }\n    catch (error) {\n        console.error(error);\n        throw new Error('Unknown data format.');\n    }\n};\n\nexport { unpack };\n","import { initMutationObserver, initScrollObserver } from './observer.js';\n\nvar ShadowDomManager = (function () {\n    function ShadowDomManager(options) {\n        this.mutationCb = options.mutationCb;\n        this.scrollCb = options.scrollCb;\n        this.bypassOptions = options.bypassOptions;\n        this.mirror = options.mirror;\n    }\n    ShadowDomManager.prototype.addShadowRoot = function (shadowRoot, doc) {\n        initMutationObserver(this.mutationCb, doc, this.bypassOptions.blockClass, this.bypassOptions.blockSelector, this.bypassOptions.maskTextClass, this.bypassOptions.maskTextSelector, this.bypassOptions.inlineStylesheet, this.bypassOptions.maskInputOptions, this.bypassOptions.maskTextFn, this.bypassOptions.maskInputFn, this.bypassOptions.recordCanvas, this.bypassOptions.slimDOMOptions, this.mirror, this.bypassOptions.iframeManager, this, shadowRoot);\n        initScrollObserver(this.scrollCb, shadowRoot, this.mirror, this.bypassOptions.blockClass, this.bypassOptions.sampling);\n    };\n    return ShadowDomManager;\n}());\n\nexport { ShadowDomManager };\n","import { __assign } from '../../ext/tslib/tslib.es6.js';\nimport { strFromU8, zlibSync, strToU8 } from '../../ext/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nvar pack = function (event) {\n    var _e = __assign(__assign({}, event), { v: MARK });\n    return strFromU8(zlibSync(strToU8(JSON.stringify(_e))), true);\n};\n\nexport { pack };\n","import { __values, __spread, __assign } from '../../ext/tslib/tslib.es6.js';\nimport { maskInputValue } from '../../ext/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { IncrementalSource, MouseInteractions, MediaInteractions } from '../types.js';\nimport { on, throttle, isTouchEvent, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch } from '../utils.js';\nimport MutationBuffer from './mutation.js';\n\nvar mutationBuffers = [];\nfunction getEventTarget(event) {\n    try {\n        if ('composedPath' in event) {\n            var path = event.composedPath();\n            if (path.length) {\n                return path[0];\n            }\n        }\n        else if ('path' in event &&\n            event.path.length) {\n            return event.path[0];\n        }\n        return event.target;\n    }\n    catch (_a) {\n        return event.target;\n    }\n}\nfunction initMutationObserver(cb, doc, blockClass, blockSelector, maskTextClass, maskTextSelector, inlineStylesheet, maskInputOptions, maskTextFn, maskInputFn, recordCanvas, slimDOMOptions, mirror, iframeManager, shadowDomManager, rootEl) {\n    var _a, _b, _c;\n    var mutationBuffer = new MutationBuffer();\n    mutationBuffers.push(mutationBuffer);\n    mutationBuffer.init(cb, blockClass, blockSelector, maskTextClass, maskTextSelector, inlineStylesheet, maskInputOptions, maskTextFn, maskInputFn, recordCanvas, slimDOMOptions, doc, mirror, iframeManager, shadowDomManager);\n    var mutationObserverCtor = window.MutationObserver ||\n        window.__rrMutationObserver;\n    var angularZoneSymbol = (_c = (_b = (_a = window) === null || _a === void 0 ? void 0 : _a.Zone) === null || _b === void 0 ? void 0 : _b.__symbol__) === null || _c === void 0 ? void 0 : _c.call(_b, 'MutationObserver');\n    if (angularZoneSymbol &&\n        window[angularZoneSymbol]) {\n        mutationObserverCtor = window[angularZoneSymbol];\n    }\n    var observer = new mutationObserverCtor(mutationBuffer.processMutations.bind(mutationBuffer));\n    observer.observe(rootEl, {\n        attributes: true,\n        attributeOldValue: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true,\n    });\n    return observer;\n}\nfunction initMoveObserver(cb, sampling, doc, mirror) {\n    if (sampling.mousemove === false) {\n        return function () { };\n    }\n    var threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\n    var callbackThreshold = typeof sampling.mousemoveCallback === 'number'\n        ? sampling.mousemoveCallback\n        : 500;\n    var positions = [];\n    var timeBaseline;\n    var wrappedCb = throttle(function (source) {\n        var totalOffset = Date.now() - timeBaseline;\n        cb(positions.map(function (p) {\n            p.timeOffset -= totalOffset;\n            return p;\n        }), source);\n        positions = [];\n        timeBaseline = null;\n    }, callbackThreshold);\n    var updatePosition = throttle(function (evt) {\n        var target = getEventTarget(evt);\n        var _a = isTouchEvent(evt)\n            ? evt.changedTouches[0]\n            : evt, clientX = _a.clientX, clientY = _a.clientY;\n        if (!timeBaseline) {\n            timeBaseline = Date.now();\n        }\n        positions.push({\n            x: clientX,\n            y: clientY,\n            id: mirror.getId(target),\n            timeOffset: Date.now() - timeBaseline,\n        });\n        wrappedCb(evt instanceof DragEvent\n            ? IncrementalSource.Drag\n            : evt instanceof MouseEvent\n                ? IncrementalSource.MouseMove\n                : IncrementalSource.TouchMove);\n    }, threshold, {\n        trailing: false,\n    });\n    var handlers = [\n        on('mousemove', updatePosition, doc),\n        on('touchmove', updatePosition, doc),\n        on('drag', updatePosition, doc),\n    ];\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initMouseInteractionObserver(cb, doc, mirror, blockClass, sampling) {\n    if (sampling.mouseInteraction === false) {\n        return function () { };\n    }\n    var disableMap = sampling.mouseInteraction === true ||\n        sampling.mouseInteraction === undefined\n        ? {}\n        : sampling.mouseInteraction;\n    var handlers = [];\n    var getHandler = function (eventKey) {\n        return function (event) {\n            var target = getEventTarget(event);\n            if (isBlocked(target, blockClass)) {\n                return;\n            }\n            var e = isTouchEvent(event) ? event.changedTouches[0] : event;\n            if (!e) {\n                return;\n            }\n            var id = mirror.getId(target);\n            var clientX = e.clientX, clientY = e.clientY;\n            cb({\n                type: MouseInteractions[eventKey],\n                id: id,\n                x: clientX,\n                y: clientY,\n            });\n        };\n    };\n    Object.keys(MouseInteractions)\n        .filter(function (key) {\n        return Number.isNaN(Number(key)) &&\n            !key.endsWith('_Departed') &&\n            disableMap[key] !== false;\n    })\n        .forEach(function (eventKey) {\n        var eventName = eventKey.toLowerCase();\n        var handler = getHandler(eventKey);\n        handlers.push(on(eventName, handler, doc));\n    });\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initScrollObserver(cb, doc, mirror, blockClass, sampling) {\n    var updatePosition = throttle(function (evt) {\n        var target = getEventTarget(evt);\n        if (!target || isBlocked(target, blockClass)) {\n            return;\n        }\n        var id = mirror.getId(target);\n        if (target === doc) {\n            var scrollEl = (doc.scrollingElement || doc.documentElement);\n            cb({\n                id: id,\n                x: scrollEl.scrollLeft,\n                y: scrollEl.scrollTop,\n            });\n        }\n        else {\n            cb({\n                id: id,\n                x: target.scrollLeft,\n                y: target.scrollTop,\n            });\n        }\n    }, sampling.scroll || 100);\n    return on('scroll', updatePosition, doc);\n}\nfunction initViewportResizeObserver(cb) {\n    var lastH = -1;\n    var lastW = -1;\n    var updateDimension = throttle(function () {\n        var height = getWindowHeight();\n        var width = getWindowWidth();\n        if (lastH !== height || lastW !== width) {\n            cb({\n                width: Number(width),\n                height: Number(height),\n            });\n            lastH = height;\n            lastW = width;\n        }\n    }, 200);\n    return on('resize', updateDimension, window);\n}\nvar INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nvar lastInputValueMap = new WeakMap();\nfunction initInputObserver(cb, doc, mirror, blockClass, ignoreClass, maskInputOptions, maskInputFn, sampling) {\n    function eventHandler(event) {\n        var target = getEventTarget(event);\n        if (!target ||\n            !target.tagName ||\n            INPUT_TAGS.indexOf(target.tagName) < 0 ||\n            isBlocked(target, blockClass)) {\n            return;\n        }\n        var type = target.type;\n        if (target.classList.contains(ignoreClass)) {\n            return;\n        }\n        var text = target.value;\n        var isChecked = false;\n        if (type === 'radio' || type === 'checkbox') {\n            isChecked = target.checked;\n        }\n        else if (maskInputOptions[target.tagName.toLowerCase()] ||\n            maskInputOptions[type]) {\n            text = maskInputValue({\n                maskInputOptions: maskInputOptions,\n                tagName: target.tagName,\n                type: type,\n                value: text,\n                maskInputFn: maskInputFn,\n            });\n        }\n        cbWithDedup(target, { text: text, isChecked: isChecked });\n        var name = target.name;\n        if (type === 'radio' && name && isChecked) {\n            doc\n                .querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\" + name + \"\\\"]\")\n                .forEach(function (el) {\n                if (el !== target) {\n                    cbWithDedup(el, {\n                        text: el.value,\n                        isChecked: !isChecked,\n                    });\n                }\n            });\n        }\n    }\n    function cbWithDedup(target, v) {\n        var lastInputValue = lastInputValueMap.get(target);\n        if (!lastInputValue ||\n            lastInputValue.text !== v.text ||\n            lastInputValue.isChecked !== v.isChecked) {\n            lastInputValueMap.set(target, v);\n            var id = mirror.getId(target);\n            cb(__assign(__assign({}, v), { id: id }));\n        }\n    }\n    var events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\n    var handlers = events.map(function (eventName) { return on(eventName, eventHandler, doc); });\n    var propertyDescriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n    var hookProperties = [\n        [HTMLInputElement.prototype, 'value'],\n        [HTMLInputElement.prototype, 'checked'],\n        [HTMLSelectElement.prototype, 'value'],\n        [HTMLTextAreaElement.prototype, 'value'],\n        [HTMLSelectElement.prototype, 'selectedIndex'],\n    ];\n    if (propertyDescriptor && propertyDescriptor.set) {\n        handlers.push.apply(handlers, __spread(hookProperties.map(function (p) {\n            return hookSetter(p[0], p[1], {\n                set: function () {\n                    eventHandler({ target: this });\n                },\n            });\n        })));\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initStyleSheetObserver(cb, mirror) {\n    var insertRule = CSSStyleSheet.prototype.insertRule;\n    CSSStyleSheet.prototype.insertRule = function (rule, index) {\n        var id = mirror.getId(this.ownerNode);\n        if (id !== -1) {\n            cb({\n                id: id,\n                adds: [{ rule: rule, index: index }],\n            });\n        }\n        return insertRule.apply(this, arguments);\n    };\n    var deleteRule = CSSStyleSheet.prototype.deleteRule;\n    CSSStyleSheet.prototype.deleteRule = function (index) {\n        var id = mirror.getId(this.ownerNode);\n        if (id !== -1) {\n            cb({\n                id: id,\n                removes: [{ index: index }],\n            });\n        }\n        return deleteRule.apply(this, arguments);\n    };\n    return function () {\n        CSSStyleSheet.prototype.insertRule = insertRule;\n        CSSStyleSheet.prototype.deleteRule = deleteRule;\n    };\n}\nfunction initMediaInteractionObserver(mediaInteractionCb, blockClass, mirror) {\n    var handler = function (type) { return function (event) {\n        var target = getEventTarget(event);\n        if (!target || isBlocked(target, blockClass)) {\n            return;\n        }\n        mediaInteractionCb({\n            type: type,\n            id: mirror.getId(target),\n            currentTime: target.currentTime,\n        });\n    }; };\n    var handlers = [\n        on('play', handler(MediaInteractions.Play)),\n        on('pause', handler(MediaInteractions.Pause)),\n        on('seeked', handler(MediaInteractions.Seeked)),\n    ];\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initCanvasMutationObserver(cb, blockClass, mirror) {\n    var e_1, _a;\n    var props = Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype);\n    var handlers = [];\n    var _loop_1 = function (prop) {\n        try {\n            if (typeof CanvasRenderingContext2D.prototype[prop] !== 'function') {\n                return \"continue\";\n            }\n            var restoreHandler = patch(CanvasRenderingContext2D.prototype, prop, function (original) {\n                return function () {\n                    var _this = this;\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    if (!isBlocked(this.canvas, blockClass)) {\n                        setTimeout(function () {\n                            var recordArgs = __spread(args);\n                            if (prop === 'drawImage') {\n                                if (recordArgs[0] &&\n                                    recordArgs[0] instanceof HTMLCanvasElement) {\n                                    var canvas = recordArgs[0];\n                                    var ctx = canvas.getContext('2d');\n                                    var imgd = ctx === null || ctx === void 0 ? void 0 : ctx.getImageData(0, 0, canvas.width, canvas.height);\n                                    var pix = imgd === null || imgd === void 0 ? void 0 : imgd.data;\n                                    recordArgs[0] = JSON.stringify(pix);\n                                }\n                            }\n                            cb({\n                                id: mirror.getId(_this.canvas),\n                                property: prop,\n                                args: recordArgs,\n                            });\n                        }, 0);\n                    }\n                    return original.apply(this, args);\n                };\n            });\n            handlers.push(restoreHandler);\n        }\n        catch (_a) {\n            var hookHandler = hookSetter(CanvasRenderingContext2D.prototype, prop, {\n                set: function (v) {\n                    cb({\n                        id: mirror.getId(this.canvas),\n                        property: prop,\n                        args: [v],\n                        setter: true,\n                    });\n                },\n            });\n            handlers.push(hookHandler);\n        }\n    };\n    try {\n        for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n            var prop = props_1_1.value;\n            _loop_1(prop);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initFontObserver(cb) {\n    var handlers = [];\n    var fontMap = new WeakMap();\n    var originalFontFace = FontFace;\n    window.FontFace = function FontFace(family, source, descriptors) {\n        var fontFace = new originalFontFace(family, source, descriptors);\n        fontMap.set(fontFace, {\n            family: family,\n            buffer: typeof source !== 'string',\n            descriptors: descriptors,\n            fontSource: typeof source === 'string'\n                ? source\n                :\n                    JSON.stringify(Array.from(new Uint8Array(source))),\n        });\n        return fontFace;\n    };\n    var restoreHandler = patch(document.fonts, 'add', function (original) {\n        return function (fontFace) {\n            setTimeout(function () {\n                var p = fontMap.get(fontFace);\n                if (p) {\n                    cb(p);\n                    fontMap.delete(fontFace);\n                }\n            }, 0);\n            return original.apply(this, [fontFace]);\n        };\n    });\n    handlers.push(function () {\n        window.FonFace = originalFontFace;\n    });\n    handlers.push(restoreHandler);\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction mergeHooks(o, hooks) {\n    var mutationCb = o.mutationCb, mousemoveCb = o.mousemoveCb, mouseInteractionCb = o.mouseInteractionCb, scrollCb = o.scrollCb, viewportResizeCb = o.viewportResizeCb, inputCb = o.inputCb, mediaInteractionCb = o.mediaInteractionCb, styleSheetRuleCb = o.styleSheetRuleCb, canvasMutationCb = o.canvasMutationCb, fontCb = o.fontCb;\n    o.mutationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mutation) {\n            hooks.mutation.apply(hooks, __spread(p));\n        }\n        mutationCb.apply(void 0, __spread(p));\n    };\n    o.mousemoveCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mousemove) {\n            hooks.mousemove.apply(hooks, __spread(p));\n        }\n        mousemoveCb.apply(void 0, __spread(p));\n    };\n    o.mouseInteractionCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mouseInteraction) {\n            hooks.mouseInteraction.apply(hooks, __spread(p));\n        }\n        mouseInteractionCb.apply(void 0, __spread(p));\n    };\n    o.scrollCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.scroll) {\n            hooks.scroll.apply(hooks, __spread(p));\n        }\n        scrollCb.apply(void 0, __spread(p));\n    };\n    o.viewportResizeCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.viewportResize) {\n            hooks.viewportResize.apply(hooks, __spread(p));\n        }\n        viewportResizeCb.apply(void 0, __spread(p));\n    };\n    o.inputCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.input) {\n            hooks.input.apply(hooks, __spread(p));\n        }\n        inputCb.apply(void 0, __spread(p));\n    };\n    o.mediaInteractionCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mediaInteaction) {\n            hooks.mediaInteaction.apply(hooks, __spread(p));\n        }\n        mediaInteractionCb.apply(void 0, __spread(p));\n    };\n    o.styleSheetRuleCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.styleSheetRule) {\n            hooks.styleSheetRule.apply(hooks, __spread(p));\n        }\n        styleSheetRuleCb.apply(void 0, __spread(p));\n    };\n    o.canvasMutationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.canvasMutation) {\n            hooks.canvasMutation.apply(hooks, __spread(p));\n        }\n        canvasMutationCb.apply(void 0, __spread(p));\n    };\n    o.fontCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.font) {\n            hooks.font.apply(hooks, __spread(p));\n        }\n        fontCb.apply(void 0, __spread(p));\n    };\n}\nfunction initObservers(o, hooks) {\n    var e_2, _a;\n    if (hooks === void 0) { hooks = {}; }\n    mergeHooks(o, hooks);\n    var mutationObserver = initMutationObserver(o.mutationCb, o.doc, o.blockClass, o.blockSelector, o.maskTextClass, o.maskTextSelector, o.inlineStylesheet, o.maskInputOptions, o.maskTextFn, o.maskInputFn, o.recordCanvas, o.slimDOMOptions, o.mirror, o.iframeManager, o.shadowDomManager, o.doc);\n    var mousemoveHandler = initMoveObserver(o.mousemoveCb, o.sampling, o.doc, o.mirror);\n    var mouseInteractionHandler = initMouseInteractionObserver(o.mouseInteractionCb, o.doc, o.mirror, o.blockClass, o.sampling);\n    var scrollHandler = initScrollObserver(o.scrollCb, o.doc, o.mirror, o.blockClass, o.sampling);\n    var viewportResizeHandler = initViewportResizeObserver(o.viewportResizeCb);\n    var inputHandler = initInputObserver(o.inputCb, o.doc, o.mirror, o.blockClass, o.ignoreClass, o.maskInputOptions, o.maskInputFn, o.sampling);\n    var mediaInteractionHandler = initMediaInteractionObserver(o.mediaInteractionCb, o.blockClass, o.mirror);\n    var styleSheetObserver = initStyleSheetObserver(o.styleSheetRuleCb, o.mirror);\n    var canvasMutationObserver = o.recordCanvas\n        ? initCanvasMutationObserver(o.canvasMutationCb, o.blockClass, o.mirror)\n        : function () { };\n    var fontObserver = o.collectFonts ? initFontObserver(o.fontCb) : function () { };\n    var pluginHandlers = [];\n    try {\n        for (var _b = __values(o.plugins), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var plugin = _c.value;\n            pluginHandlers.push(plugin.observer(plugin.callback, plugin.options));\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return function () {\n        mutationObserver.disconnect();\n        mousemoveHandler();\n        mouseInteractionHandler();\n        scrollHandler();\n        viewportResizeHandler();\n        inputHandler();\n        mediaInteractionHandler();\n        styleSheetObserver();\n        canvasMutationObserver();\n        fontObserver();\n        pluginHandlers.forEach(function (h) { return h(); });\n    };\n}\n\nexport { INPUT_TAGS, initMutationObserver, initObservers, initScrollObserver, mutationBuffers };\n","import { __values, __assign, __spread } from '../../ext/tslib/tslib.es6.js';\nimport { rebuild, buildNodeWithSN, NodeType } from '../../ext/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { ReplayerEvents, EventType, IncrementalSource, MediaInteractions, MouseInteractions } from '../types.js';\nimport { polyfill as polyfill$1, isIframeINode, hasShadowRoot, queueToResolveTrees, iterateResolveTree, getBaseDimension, createMirror, TreeIndex } from '../utils.js';\nimport * as mitt_es from '../../ext/mitt/dist/mitt.es.js';\nimport mitt$1 from '../../ext/mitt/dist/mitt.es.js';\nimport { polyfill } from './smoothscroll.js';\nimport { Timer } from './timer.js';\nimport { createPlayerService, createSpeedService } from './machine.js';\nimport rules from './styles/inject-style.js';\n\nvar SKIP_TIME_THRESHOLD = 10 * 1000;\nvar SKIP_TIME_INTERVAL = 5 * 1000;\nvar mitt = mitt$1 || mitt_es;\nvar REPLAY_CONSOLE_PREFIX = '[replayer]';\nvar defaultMouseTailConfig = {\n    duration: 500,\n    lineCap: 'round',\n    lineWidth: 3,\n    strokeStyle: 'red',\n};\nvar Replayer = (function () {\n    function Replayer(events, config) {\n        var _this = this;\n        this.mouseTail = null;\n        this.tailPositions = [];\n        this.emitter = mitt();\n        this.legacy_missingNodeRetryMap = {};\n        this.imageMap = new Map();\n        this.mirror = createMirror();\n        this.firstPlayedEvent = null;\n        this.newDocumentQueue = [];\n        if (!(config === null || config === void 0 ? void 0 : config.liveMode) && events.length < 2) {\n            throw new Error('Replayer need at least 2 events.');\n        }\n        var defaultConfig = {\n            speed: 1,\n            maxSpeed: 360,\n            root: document.body,\n            loadTimeout: 0,\n            skipInactive: false,\n            showWarning: true,\n            showDebug: false,\n            blockClass: 'rr-block',\n            liveMode: false,\n            insertStyleRules: [],\n            triggerFocus: true,\n            UNSAFE_replayCanvas: false,\n            pauseAnimation: true,\n            mouseTail: defaultMouseTailConfig,\n        };\n        this.config = Object.assign({}, defaultConfig, config);\n        this.handleResize = this.handleResize.bind(this);\n        this.getCastFn = this.getCastFn.bind(this);\n        this.emitter.on(ReplayerEvents.Resize, this.handleResize);\n        this.setupDom();\n        this.treeIndex = new TreeIndex();\n        this.fragmentParentMap = new Map();\n        this.elementStateMap = new Map();\n        this.emitter.on(ReplayerEvents.Flush, function () {\n            var e_1, _a, e_2, _b;\n            var _c = _this.treeIndex.flush(), scrollMap = _c.scrollMap, inputMap = _c.inputMap;\n            _this.fragmentParentMap.forEach(function (parent, frag) {\n                return _this.restoreRealParent(frag, parent);\n            });\n            _this.fragmentParentMap.clear();\n            _this.elementStateMap.clear();\n            try {\n                for (var _d = __values(scrollMap.values()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                    var d = _e.value;\n                    _this.applyScroll(d);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            try {\n                for (var _f = __values(inputMap.values()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                    var d = _g.value;\n                    _this.applyInput(d);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        });\n        this.emitter.on(ReplayerEvents.PlayBack, function () {\n            _this.firstPlayedEvent = null;\n            _this.mirror.reset();\n        });\n        var timer = new Timer([], (config === null || config === void 0 ? void 0 : config.speed) || defaultConfig.speed);\n        this.service = createPlayerService({\n            events: events\n                .map(function (e) {\n                if (config && config.unpackFn) {\n                    return config.unpackFn(e);\n                }\n                return e;\n            })\n                .sort(function (a1, a2) { return a1.timestamp - a2.timestamp; }),\n            timer: timer,\n            timeOffset: 0,\n            baselineTime: 0,\n            lastPlayedEvent: null,\n        }, {\n            getCastFn: this.getCastFn,\n            emitter: this.emitter,\n        });\n        this.service.start();\n        this.service.subscribe(function (state) {\n            _this.emitter.emit(ReplayerEvents.StateChange, {\n                player: state,\n            });\n        });\n        this.speedService = createSpeedService({\n            normalSpeed: -1,\n            timer: timer,\n        });\n        this.speedService.start();\n        this.speedService.subscribe(function (state) {\n            _this.emitter.emit(ReplayerEvents.StateChange, {\n                speed: state,\n            });\n        });\n        var firstMeta = this.service.state.context.events.find(function (e) { return e.type === EventType.Meta; });\n        var firstFullsnapshot = this.service.state.context.events.find(function (e) { return e.type === EventType.FullSnapshot; });\n        if (firstMeta) {\n            var _a = firstMeta.data, width_1 = _a.width, height_1 = _a.height;\n            setTimeout(function () {\n                _this.emitter.emit(ReplayerEvents.Resize, {\n                    width: width_1,\n                    height: height_1,\n                });\n            }, 0);\n        }\n        if (firstFullsnapshot) {\n            setTimeout(function () {\n                if (_this.firstPlayedEvent) {\n                    return;\n                }\n                _this.firstPlayedEvent = firstFullsnapshot;\n                _this.rebuildFullSnapshot(firstFullsnapshot);\n                _this.iframe.contentWindow.scrollTo(firstFullsnapshot.data.initialOffset);\n            }, 1);\n        }\n    }\n    Object.defineProperty(Replayer.prototype, \"timer\", {\n        get: function () {\n            return this.service.state.context.timer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Replayer.prototype.on = function (event, handler) {\n        this.emitter.on(event, handler);\n        return this;\n    };\n    Replayer.prototype.off = function (event, handler) {\n        this.emitter.off(event, handler);\n        return this;\n    };\n    Replayer.prototype.setConfig = function (config) {\n        var _this = this;\n        Object.keys(config).forEach(function (key) {\n            _this.config[key] = config[key];\n        });\n        if (!this.config.skipInactive) {\n            this.backToNormal();\n        }\n        if (typeof config.speed !== 'undefined') {\n            this.speedService.send({\n                type: 'SET_SPEED',\n                payload: {\n                    speed: config.speed,\n                },\n            });\n        }\n        if (typeof config.mouseTail !== 'undefined') {\n            if (config.mouseTail === false) {\n                if (this.mouseTail) {\n                    this.mouseTail.style.display = 'none';\n                }\n            }\n            else {\n                if (!this.mouseTail) {\n                    this.mouseTail = document.createElement('canvas');\n                    this.mouseTail.width = Number.parseFloat(this.iframe.width);\n                    this.mouseTail.height = Number.parseFloat(this.iframe.height);\n                    this.mouseTail.classList.add('replayer-mouse-tail');\n                    this.wrapper.insertBefore(this.mouseTail, this.iframe);\n                }\n                this.mouseTail.style.display = 'inherit';\n            }\n        }\n    };\n    Replayer.prototype.getMetaData = function () {\n        var firstEvent = this.service.state.context.events[0];\n        var lastEvent = this.service.state.context.events[this.service.state.context.events.length - 1];\n        return {\n            startTime: firstEvent.timestamp,\n            endTime: lastEvent.timestamp,\n            totalTime: lastEvent.timestamp - firstEvent.timestamp,\n        };\n    };\n    Replayer.prototype.getCurrentTime = function () {\n        return this.timer.timeOffset + this.getTimeOffset();\n    };\n    Replayer.prototype.getTimeOffset = function () {\n        var _a = this.service.state.context, baselineTime = _a.baselineTime, events = _a.events;\n        return baselineTime - events[0].timestamp;\n    };\n    Replayer.prototype.getMirror = function () {\n        return this.mirror;\n    };\n    Replayer.prototype.play = function (timeOffset) {\n        var _a;\n        if (timeOffset === void 0) { timeOffset = 0; }\n        if (this.service.state.matches('paused')) {\n            this.service.send({ type: 'PLAY', payload: { timeOffset: timeOffset } });\n        }\n        else {\n            this.service.send({ type: 'PAUSE' });\n            this.service.send({ type: 'PLAY', payload: { timeOffset: timeOffset } });\n        }\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0].classList.remove('rrweb-paused');\n        this.emitter.emit(ReplayerEvents.Start);\n    };\n    Replayer.prototype.pause = function (timeOffset) {\n        var _a;\n        if (timeOffset === undefined && this.service.state.matches('playing')) {\n            this.service.send({ type: 'PAUSE' });\n        }\n        if (typeof timeOffset === 'number') {\n            this.play(timeOffset);\n            this.service.send({ type: 'PAUSE' });\n        }\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0].classList.add('rrweb-paused');\n        this.emitter.emit(ReplayerEvents.Pause);\n    };\n    Replayer.prototype.resume = function (timeOffset) {\n        if (timeOffset === void 0) { timeOffset = 0; }\n        console.warn(\"The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface.\");\n        this.play(timeOffset);\n        this.emitter.emit(ReplayerEvents.Resume);\n    };\n    Replayer.prototype.startLive = function (baselineTime) {\n        this.service.send({ type: 'TO_LIVE', payload: { baselineTime: baselineTime } });\n    };\n    Replayer.prototype.addEvent = function (rawEvent) {\n        var _this = this;\n        var event = this.config.unpackFn\n            ? this.config.unpackFn(rawEvent)\n            : rawEvent;\n        Promise.resolve().then(function () {\n            return _this.service.send({ type: 'ADD_EVENT', payload: { event: event } });\n        });\n    };\n    Replayer.prototype.enableInteract = function () {\n        this.iframe.setAttribute('scrolling', 'auto');\n        this.iframe.style.pointerEvents = 'auto';\n    };\n    Replayer.prototype.disableInteract = function () {\n        this.iframe.setAttribute('scrolling', 'no');\n        this.iframe.style.pointerEvents = 'none';\n    };\n    Replayer.prototype.setupDom = function () {\n        this.wrapper = document.createElement('div');\n        this.wrapper.classList.add('replayer-wrapper');\n        this.config.root.appendChild(this.wrapper);\n        this.mouse = document.createElement('div');\n        this.mouse.classList.add('replayer-mouse');\n        this.wrapper.appendChild(this.mouse);\n        if (this.config.mouseTail !== false) {\n            this.mouseTail = document.createElement('canvas');\n            this.mouseTail.classList.add('replayer-mouse-tail');\n            this.mouseTail.style.display = 'inherit';\n            this.wrapper.appendChild(this.mouseTail);\n        }\n        this.iframe = document.createElement('iframe');\n        var attributes = ['allow-same-origin'];\n        if (this.config.UNSAFE_replayCanvas) {\n            attributes.push('allow-scripts');\n        }\n        this.iframe.style.display = 'none';\n        this.iframe.setAttribute('sandbox', attributes.join(' '));\n        this.disableInteract();\n        this.wrapper.appendChild(this.iframe);\n        if (this.iframe.contentWindow && this.iframe.contentDocument) {\n            polyfill(this.iframe.contentWindow, this.iframe.contentDocument);\n            polyfill$1(this.iframe.contentWindow);\n        }\n    };\n    Replayer.prototype.handleResize = function (dimension) {\n        var e_3, _a;\n        this.iframe.style.display = 'inherit';\n        try {\n            for (var _b = __values([this.mouseTail, this.iframe]), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var el = _c.value;\n                if (!el) {\n                    continue;\n                }\n                el.setAttribute('width', String(dimension.width));\n                el.setAttribute('height', String(dimension.height));\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    Replayer.prototype.getCastFn = function (event, isSync) {\n        var _this = this;\n        if (isSync === void 0) { isSync = false; }\n        var castFn;\n        switch (event.type) {\n            case EventType.DomContentLoaded:\n            case EventType.Load:\n                break;\n            case EventType.Custom:\n                castFn = function () {\n                    _this.emitter.emit(ReplayerEvents.CustomEvent, event);\n                };\n                break;\n            case EventType.Meta:\n                castFn = function () {\n                    return _this.emitter.emit(ReplayerEvents.Resize, {\n                        width: event.data.width,\n                        height: event.data.height,\n                    });\n                };\n                break;\n            case EventType.FullSnapshot:\n                castFn = function () {\n                    if (_this.firstPlayedEvent && _this.firstPlayedEvent === event) {\n                        return;\n                    }\n                    _this.rebuildFullSnapshot(event, isSync);\n                    _this.iframe.contentWindow.scrollTo(event.data.initialOffset);\n                };\n                break;\n            case EventType.IncrementalSnapshot:\n                castFn = function () {\n                    var e_4, _a;\n                    _this.applyIncremental(event, isSync);\n                    if (isSync) {\n                        return;\n                    }\n                    if (event === _this.nextUserInteractionEvent) {\n                        _this.nextUserInteractionEvent = null;\n                        _this.backToNormal();\n                    }\n                    if (_this.config.skipInactive && !_this.nextUserInteractionEvent) {\n                        try {\n                            for (var _b = __values(_this.service.state.context.events), _c = _b.next(); !_c.done; _c = _b.next()) {\n                                var _event = _c.value;\n                                if (_event.timestamp <= event.timestamp) {\n                                    continue;\n                                }\n                                if (_this.isUserInteraction(_event)) {\n                                    if (_event.delay - event.delay >\n                                        SKIP_TIME_THRESHOLD *\n                                            _this.speedService.state.context.timer.speed) {\n                                        _this.nextUserInteractionEvent = _event;\n                                    }\n                                    break;\n                                }\n                            }\n                        }\n                        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                        finally {\n                            try {\n                                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                            }\n                            finally { if (e_4) throw e_4.error; }\n                        }\n                        if (_this.nextUserInteractionEvent) {\n                            var skipTime = _this.nextUserInteractionEvent.delay - event.delay;\n                            var payload = {\n                                speed: Math.min(Math.round(skipTime / SKIP_TIME_INTERVAL), _this.config.maxSpeed),\n                            };\n                            _this.speedService.send({ type: 'FAST_FORWARD', payload: payload });\n                            _this.emitter.emit(ReplayerEvents.SkipStart, payload);\n                        }\n                    }\n                };\n                break;\n        }\n        var wrappedCastFn = function () {\n            var e_5, _a;\n            if (castFn) {\n                castFn();\n            }\n            try {\n                for (var _b = __values(_this.config.plugins || []), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var plugin = _c.value;\n                    plugin.handler(event, isSync, { replayer: _this });\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n            _this.service.send({ type: 'CAST_EVENT', payload: { event: event } });\n            var last_index = _this.service.state.context.events.length - 1;\n            if (event ===\n                _this.service.state.context.events[last_index]) {\n                var finish_1 = function () {\n                    if (last_index < _this.service.state.context.events.length - 1) {\n                        return;\n                    }\n                    _this.backToNormal();\n                    _this.service.send('END');\n                    _this.emitter.emit(ReplayerEvents.Finish);\n                };\n                if (event.type === EventType.IncrementalSnapshot &&\n                    event.data.source === IncrementalSource.MouseMove &&\n                    event.data.positions.length) {\n                    setTimeout(function () {\n                        finish_1();\n                    }, Math.max(0, -event.data.positions[0].timeOffset + 50));\n                }\n                else {\n                    finish_1();\n                }\n            }\n        };\n        return wrappedCastFn;\n    };\n    Replayer.prototype.rebuildFullSnapshot = function (event, isSync) {\n        var e_6, _a;\n        var _this = this;\n        if (isSync === void 0) { isSync = false; }\n        if (!this.iframe.contentDocument) {\n            return console.warn('Looks like your replayer has been destroyed.');\n        }\n        if (Object.keys(this.legacy_missingNodeRetryMap).length) {\n            console.warn('Found unresolved missing node map', this.legacy_missingNodeRetryMap);\n        }\n        this.legacy_missingNodeRetryMap = {};\n        var collected = [];\n        this.mirror.map = rebuild(event.data.node, {\n            doc: this.iframe.contentDocument,\n            afterAppend: function (builtNode) {\n                _this.collectIframeAndAttachDocument(collected, builtNode);\n            },\n        })[1];\n        var _loop_1 = function (mutationInQueue, builtNode) {\n            this_1.attachDocumentToIframe(mutationInQueue, builtNode);\n            this_1.newDocumentQueue = this_1.newDocumentQueue.filter(function (m) { return m !== mutationInQueue; });\n            if (builtNode.contentDocument) {\n                var _a = builtNode.contentDocument, documentElement_1 = _a.documentElement, head_1 = _a.head;\n                this_1.insertStyleRules(documentElement_1, head_1);\n            }\n        };\n        var this_1 = this;\n        try {\n            for (var collected_1 = __values(collected), collected_1_1 = collected_1.next(); !collected_1_1.done; collected_1_1 = collected_1.next()) {\n                var _b = collected_1_1.value, mutationInQueue = _b.mutationInQueue, builtNode = _b.builtNode;\n                _loop_1(mutationInQueue, builtNode);\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (collected_1_1 && !collected_1_1.done && (_a = collected_1.return)) _a.call(collected_1);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        var _c = this.iframe.contentDocument, documentElement = _c.documentElement, head = _c.head;\n        this.insertStyleRules(documentElement, head);\n        if (!this.service.state.matches('playing')) {\n            this.iframe.contentDocument\n                .getElementsByTagName('html')[0]\n                .classList.add('rrweb-paused');\n        }\n        this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded, event);\n        if (!isSync) {\n            this.waitForStylesheetLoad();\n        }\n        if (this.config.UNSAFE_replayCanvas) {\n            this.preloadAllImages();\n        }\n    };\n    Replayer.prototype.insertStyleRules = function (documentElement, head) {\n        var styleEl = document.createElement('style');\n        documentElement.insertBefore(styleEl, head);\n        var injectStylesRules = rules(this.config.blockClass).concat(this.config.insertStyleRules);\n        if (this.config.pauseAnimation) {\n            injectStylesRules.push('html.rrweb-paused * { animation-play-state: paused !important; }');\n        }\n        for (var idx = 0; idx < injectStylesRules.length; idx++) {\n            styleEl.sheet.insertRule(injectStylesRules[idx], idx);\n        }\n    };\n    Replayer.prototype.attachDocumentToIframe = function (mutation, iframeEl) {\n        var e_7, _a;\n        var _this = this;\n        var collected = [];\n        if (!iframeEl.contentDocument) {\n            var parent = iframeEl.parentNode;\n            while (parent) {\n                if (this.fragmentParentMap.has(parent)) {\n                    var frag = parent;\n                    var realParent = this.fragmentParentMap.get(frag);\n                    this.restoreRealParent(frag, realParent);\n                    break;\n                }\n                parent = parent.parentNode;\n            }\n        }\n        buildNodeWithSN(mutation.node, {\n            doc: iframeEl.contentDocument,\n            map: this.mirror.map,\n            hackCss: true,\n            skipChild: false,\n            afterAppend: function (builtNode) {\n                _this.collectIframeAndAttachDocument(collected, builtNode);\n            },\n        });\n        var _loop_2 = function (mutationInQueue, builtNode) {\n            this_2.attachDocumentToIframe(mutationInQueue, builtNode);\n            this_2.newDocumentQueue = this_2.newDocumentQueue.filter(function (m) { return m !== mutationInQueue; });\n            if (builtNode.contentDocument) {\n                var _a = builtNode.contentDocument, documentElement = _a.documentElement, head = _a.head;\n                this_2.insertStyleRules(documentElement, head);\n            }\n        };\n        var this_2 = this;\n        try {\n            for (var collected_2 = __values(collected), collected_2_1 = collected_2.next(); !collected_2_1.done; collected_2_1 = collected_2.next()) {\n                var _b = collected_2_1.value, mutationInQueue = _b.mutationInQueue, builtNode = _b.builtNode;\n                _loop_2(mutationInQueue, builtNode);\n            }\n        }\n        catch (e_7_1) { e_7 = { error: e_7_1 }; }\n        finally {\n            try {\n                if (collected_2_1 && !collected_2_1.done && (_a = collected_2.return)) _a.call(collected_2);\n            }\n            finally { if (e_7) throw e_7.error; }\n        }\n    };\n    Replayer.prototype.collectIframeAndAttachDocument = function (collected, builtNode) {\n        if (isIframeINode(builtNode)) {\n            var mutationInQueue = this.newDocumentQueue.find(function (m) { return m.parentId === builtNode.__sn.id; });\n            if (mutationInQueue) {\n                collected.push({ mutationInQueue: mutationInQueue, builtNode: builtNode });\n            }\n        }\n    };\n    Replayer.prototype.waitForStylesheetLoad = function () {\n        var _this = this;\n        var _a;\n        var head = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.head;\n        if (head) {\n            var unloadSheets_1 = new Set();\n            var timer_1;\n            var beforeLoadState_1 = this.service.state;\n            var stateHandler_1 = function () {\n                beforeLoadState_1 = _this.service.state;\n            };\n            this.emitter.on(ReplayerEvents.Start, stateHandler_1);\n            this.emitter.on(ReplayerEvents.Pause, stateHandler_1);\n            var unsubscribe_1 = function () {\n                _this.emitter.off(ReplayerEvents.Start, stateHandler_1);\n                _this.emitter.off(ReplayerEvents.Pause, stateHandler_1);\n            };\n            head\n                .querySelectorAll('link[rel=\"stylesheet\"]')\n                .forEach(function (css) {\n                if (!css.sheet) {\n                    unloadSheets_1.add(css);\n                    css.addEventListener('load', function () {\n                        unloadSheets_1.delete(css);\n                        if (unloadSheets_1.size === 0 && timer_1 !== -1) {\n                            if (beforeLoadState_1.matches('playing')) {\n                                _this.play(_this.getCurrentTime());\n                            }\n                            _this.emitter.emit(ReplayerEvents.LoadStylesheetEnd);\n                            if (timer_1) {\n                                window.clearTimeout(timer_1);\n                            }\n                            unsubscribe_1();\n                        }\n                    });\n                }\n            });\n            if (unloadSheets_1.size > 0) {\n                this.service.send({ type: 'PAUSE' });\n                this.emitter.emit(ReplayerEvents.LoadStylesheetStart);\n                timer_1 = window.setTimeout(function () {\n                    if (beforeLoadState_1.matches('playing')) {\n                        _this.play(_this.getCurrentTime());\n                    }\n                    timer_1 = -1;\n                    unsubscribe_1();\n                }, this.config.loadTimeout);\n            }\n        }\n    };\n    Replayer.prototype.preloadAllImages = function () {\n        var e_8, _a;\n        var _this = this;\n        var beforeLoadState = this.service.state;\n        var stateHandler = function () {\n            beforeLoadState = _this.service.state;\n        };\n        this.emitter.on(ReplayerEvents.Start, stateHandler);\n        this.emitter.on(ReplayerEvents.Pause, stateHandler);\n        var count = 0;\n        var resolved = 0;\n        try {\n            for (var _b = __values(this.service.state.context.events), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var event = _c.value;\n                if (event.type === EventType.IncrementalSnapshot &&\n                    event.data.source === IncrementalSource.CanvasMutation &&\n                    event.data.property === 'drawImage' &&\n                    typeof event.data.args[0] === 'string' &&\n                    !this.imageMap.has(event)) {\n                    count++;\n                    var canvas = document.createElement('canvas');\n                    var ctx = canvas.getContext('2d');\n                    var imgd = ctx === null || ctx === void 0 ? void 0 : ctx.createImageData(canvas.width, canvas.height);\n                    var d = imgd === null || imgd === void 0 ? void 0 : imgd.data;\n                    d = JSON.parse(event.data.args[0]);\n                    ctx === null || ctx === void 0 ? void 0 : ctx.putImageData(imgd, 0, 0);\n                }\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        if (count !== resolved) {\n            this.service.send({ type: 'PAUSE' });\n        }\n    };\n    Replayer.prototype.applyIncremental = function (e, isSync) {\n        var _this = this;\n        var _a, _b;\n        var d = e.data;\n        switch (d.source) {\n            case IncrementalSource.Mutation: {\n                if (isSync) {\n                    d.adds.forEach(function (m) { return _this.treeIndex.add(m); });\n                    d.texts.forEach(function (m) { return _this.treeIndex.text(m); });\n                    d.attributes.forEach(function (m) { return _this.treeIndex.attribute(m); });\n                    d.removes.forEach(function (m) { return _this.treeIndex.remove(m, _this.mirror); });\n                }\n                this.applyMutation(d, isSync);\n                break;\n            }\n            case IncrementalSource.Drag:\n            case IncrementalSource.TouchMove:\n            case IncrementalSource.MouseMove:\n                if (isSync) {\n                    var lastPosition = d.positions[d.positions.length - 1];\n                    this.moveAndHover(d, lastPosition.x, lastPosition.y, lastPosition.id);\n                }\n                else {\n                    d.positions.forEach(function (p) {\n                        var action = {\n                            doAction: function () {\n                                _this.moveAndHover(d, p.x, p.y, p.id);\n                            },\n                            delay: p.timeOffset +\n                                e.timestamp -\n                                _this.service.state.context.baselineTime,\n                        };\n                        _this.timer.addAction(action);\n                    });\n                    this.timer.addAction({\n                        doAction: function () { },\n                        delay: e.delay - ((_a = d.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset),\n                    });\n                }\n                break;\n            case IncrementalSource.MouseInteraction: {\n                if (d.id === -1) {\n                    break;\n                }\n                var event = new Event(MouseInteractions[d.type].toLowerCase());\n                var target = this.mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                this.emitter.emit(ReplayerEvents.MouseInteraction, {\n                    type: d.type,\n                    target: target,\n                });\n                var triggerFocus = this.config.triggerFocus;\n                switch (d.type) {\n                    case MouseInteractions.Blur:\n                        if ('blur' in target) {\n                            target.blur();\n                        }\n                        break;\n                    case MouseInteractions.Focus:\n                        if (triggerFocus && target.focus) {\n                            target.focus({\n                                preventScroll: true,\n                            });\n                        }\n                        break;\n                    case MouseInteractions.Click:\n                    case MouseInteractions.TouchStart:\n                    case MouseInteractions.TouchEnd:\n                        if (!isSync) {\n                            this.moveAndHover(d, d.x, d.y, d.id);\n                            this.mouse.classList.remove('active');\n                            void this.mouse.offsetWidth;\n                            this.mouse.classList.add('active');\n                        }\n                        break;\n                    default:\n                        target.dispatchEvent(event);\n                }\n                break;\n            }\n            case IncrementalSource.Scroll: {\n                if (d.id === -1) {\n                    break;\n                }\n                if (isSync) {\n                    this.treeIndex.scroll(d);\n                    break;\n                }\n                this.applyScroll(d);\n                break;\n            }\n            case IncrementalSource.ViewportResize:\n                this.emitter.emit(ReplayerEvents.Resize, {\n                    width: d.width,\n                    height: d.height,\n                });\n                break;\n            case IncrementalSource.Input: {\n                if (d.id === -1) {\n                    break;\n                }\n                if (isSync) {\n                    this.treeIndex.input(d);\n                    break;\n                }\n                this.applyInput(d);\n                break;\n            }\n            case IncrementalSource.MediaInteraction: {\n                var target = this.mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                var mediaEl = target;\n                try {\n                    if (d.currentTime) {\n                        mediaEl.currentTime = d.currentTime;\n                    }\n                    if (d.type === MediaInteractions.Pause) {\n                        mediaEl.pause();\n                    }\n                    if (d.type === MediaInteractions.Play) {\n                        mediaEl.play();\n                    }\n                }\n                catch (error) {\n                    if (this.config.showWarning) {\n                        console.warn(\"Failed to replay media interactions: \" + (error.message || error));\n                    }\n                }\n                break;\n            }\n            case IncrementalSource.StyleSheetRule: {\n                var target = this.mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                var styleEl = target;\n                var parent = target.parentNode;\n                var usingVirtualParent = this.fragmentParentMap.has(parent);\n                var placeholderNode = void 0;\n                if (usingVirtualParent) {\n                    var domParent = this.fragmentParentMap.get(target.parentNode);\n                    placeholderNode = document.createTextNode('');\n                    parent.replaceChild(placeholderNode, target);\n                    domParent.appendChild(target);\n                }\n                var styleSheet_1 = styleEl.sheet;\n                if (d.adds) {\n                    d.adds.forEach(function (_a) {\n                        var rule = _a.rule, index = _a.index;\n                        try {\n                            var _index = index === undefined\n                                ? undefined\n                                : Math.min(index, styleSheet_1.rules.length);\n                            try {\n                                styleSheet_1.insertRule(rule, _index);\n                            }\n                            catch (e) {\n                            }\n                        }\n                        catch (e) {\n                        }\n                    });\n                }\n                if (d.removes) {\n                    d.removes.forEach(function (_a) {\n                        var index = _a.index;\n                        try {\n                            styleSheet_1.deleteRule(index);\n                        }\n                        catch (e) {\n                        }\n                    });\n                }\n                if (usingVirtualParent && placeholderNode) {\n                    parent.replaceChild(target, placeholderNode);\n                }\n                break;\n            }\n            case IncrementalSource.CanvasMutation: {\n                if (!this.config.UNSAFE_replayCanvas) {\n                    return;\n                }\n                var target = this.mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                try {\n                    var ctx = target.getContext('2d');\n                    if (d.setter) {\n                        ctx[d.property] = d.args[0];\n                        return;\n                    }\n                    var original = ctx[d.property];\n                    if (d.property === 'drawImage' && typeof d.args[0] === 'string') {\n                        var image = this.imageMap.get(e);\n                        d.args[0] = image;\n                        original.apply(ctx, d.args);\n                    }\n                    else {\n                        original.apply(ctx, d.args);\n                    }\n                }\n                catch (error) {\n                    this.warnCanvasMutationFailed(d, d.id, error);\n                }\n                break;\n            }\n            case IncrementalSource.Font: {\n                try {\n                    var fontFace = new FontFace(d.family, d.buffer ? new Uint8Array(JSON.parse(d.fontSource)) : d.fontSource, d.descriptors);\n                    (_b = this.iframe.contentDocument) === null || _b === void 0 ? void 0 : _b.fonts.add(fontFace);\n                }\n                catch (error) {\n                    if (this.config.showWarning) {\n                        console.warn(error);\n                    }\n                }\n                break;\n            }\n        }\n    };\n    Replayer.prototype.applyMutation = function (d, useVirtualParent) {\n        var e_9, _a;\n        var _this = this;\n        d.removes.forEach(function (mutation) {\n            var target = _this.mirror.getNode(mutation.id);\n            if (!target) {\n                return _this.warnNodeNotFound(d, mutation.id);\n            }\n            var parent = _this.mirror.getNode(mutation.parentId);\n            if (!parent) {\n                return _this.warnNodeNotFound(d, mutation.parentId);\n            }\n            if (mutation.isShadow && hasShadowRoot(parent)) {\n                parent = parent.shadowRoot;\n            }\n            _this.mirror.removeNodeFromMap(target);\n            if (parent) {\n                var realParent = '__sn' in parent ? _this.fragmentParentMap.get(parent) : undefined;\n                if (realParent && realParent.contains(target)) {\n                    realParent.removeChild(target);\n                }\n                else if (_this.fragmentParentMap.has(target)) {\n                    var realTarget = _this.fragmentParentMap.get(target);\n                    parent.removeChild(realTarget);\n                    _this.fragmentParentMap.delete(target);\n                }\n                else {\n                    parent.removeChild(target);\n                }\n            }\n        });\n        var legacy_missingNodeMap = __assign({}, this.legacy_missingNodeRetryMap);\n        var queue = [];\n        var nextNotInDOM = function (mutation) {\n            var next = null;\n            if (mutation.nextId) {\n                next = _this.mirror.getNode(mutation.nextId);\n            }\n            if (mutation.nextId !== null &&\n                mutation.nextId !== undefined &&\n                mutation.nextId !== -1 &&\n                !next) {\n                return true;\n            }\n            return false;\n        };\n        var appendNode = function (mutation) {\n            var _a, _b;\n            if (!_this.iframe.contentDocument) {\n                return console.warn('Looks like your replayer has been destroyed.');\n            }\n            var parent = _this.mirror.getNode(mutation.parentId);\n            if (!parent) {\n                if (mutation.node.type === NodeType.Document) {\n                    return _this.newDocumentQueue.push(mutation);\n                }\n                return queue.push(mutation);\n            }\n            var parentInDocument = null;\n            if (_this.iframe.contentDocument.contains) {\n                parentInDocument = _this.iframe.contentDocument.contains(parent);\n            }\n            else if (_this.iframe.contentDocument.body.contains) {\n                parentInDocument = _this.iframe.contentDocument.body.contains(parent);\n            }\n            var hasIframeChild = ((_b = (_a = parent).getElementsByTagName) === null || _b === void 0 ? void 0 : _b.call(_a, 'iframe').length) > 0;\n            if (useVirtualParent &&\n                parentInDocument &&\n                !isIframeINode(parent) &&\n                !hasIframeChild) {\n                var virtualParent = document.createDocumentFragment();\n                _this.mirror.map[mutation.parentId] = virtualParent;\n                _this.fragmentParentMap.set(virtualParent, parent);\n                _this.storeState(parent);\n                while (parent.firstChild) {\n                    virtualParent.appendChild(parent.firstChild);\n                }\n                parent = virtualParent;\n            }\n            if (mutation.node.isShadow && hasShadowRoot(parent)) {\n                parent = parent.shadowRoot;\n            }\n            var previous = null;\n            var next = null;\n            if (mutation.previousId) {\n                previous = _this.mirror.getNode(mutation.previousId);\n            }\n            if (mutation.nextId) {\n                next = _this.mirror.getNode(mutation.nextId);\n            }\n            if (nextNotInDOM(mutation)) {\n                return queue.push(mutation);\n            }\n            if (mutation.node.rootId && !_this.mirror.getNode(mutation.node.rootId)) {\n                return;\n            }\n            var targetDoc = mutation.node.rootId\n                ? _this.mirror.getNode(mutation.node.rootId)\n                : _this.iframe.contentDocument;\n            if (isIframeINode(parent)) {\n                _this.attachDocumentToIframe(mutation, parent);\n                return;\n            }\n            var target = buildNodeWithSN(mutation.node, {\n                doc: targetDoc,\n                map: _this.mirror.map,\n                skipChild: true,\n                hackCss: true,\n            });\n            if (mutation.previousId === -1 || mutation.nextId === -1) {\n                legacy_missingNodeMap[mutation.node.id] = {\n                    node: target,\n                    mutation: mutation,\n                };\n                return;\n            }\n            if (previous && previous.nextSibling && previous.nextSibling.parentNode) {\n                parent.insertBefore(target, previous.nextSibling);\n            }\n            else if (next && next.parentNode) {\n                parent.contains(next)\n                    ? parent.insertBefore(target, next)\n                    : parent.insertBefore(target, null);\n            }\n            else {\n                if (parent === targetDoc) {\n                    while (targetDoc.firstChild) {\n                        targetDoc.removeChild(targetDoc.firstChild);\n                    }\n                }\n                parent.appendChild(target);\n            }\n            if (isIframeINode(target)) {\n                var mutationInQueue_1 = _this.newDocumentQueue.find(function (m) { return m.parentId === target.__sn.id; });\n                if (mutationInQueue_1) {\n                    _this.attachDocumentToIframe(mutationInQueue_1, target);\n                    _this.newDocumentQueue = _this.newDocumentQueue.filter(function (m) { return m !== mutationInQueue_1; });\n                }\n                if (target.contentDocument) {\n                    var _c = target.contentDocument, documentElement = _c.documentElement, head = _c.head;\n                    _this.insertStyleRules(documentElement, head);\n                }\n            }\n            if (mutation.previousId || mutation.nextId) {\n                _this.legacy_resolveMissingNode(legacy_missingNodeMap, parent, target, mutation);\n            }\n        };\n        d.adds.forEach(function (mutation) {\n            appendNode(mutation);\n        });\n        var startTime = Date.now();\n        while (queue.length) {\n            var resolveTrees = queueToResolveTrees(queue);\n            queue.length = 0;\n            if (Date.now() - startTime > 500) {\n                this.warn('Timeout in the loop, please check the resolve tree data:', resolveTrees);\n                break;\n            }\n            try {\n                for (var resolveTrees_1 = (e_9 = void 0, __values(resolveTrees)), resolveTrees_1_1 = resolveTrees_1.next(); !resolveTrees_1_1.done; resolveTrees_1_1 = resolveTrees_1.next()) {\n                    var tree = resolveTrees_1_1.value;\n                    var parent = this.mirror.getNode(tree.value.parentId);\n                    if (!parent) {\n                        this.debug('Drop resolve tree since there is no parent for the root node.', tree);\n                    }\n                    else {\n                        iterateResolveTree(tree, function (mutation) {\n                            appendNode(mutation);\n                        });\n                    }\n                }\n            }\n            catch (e_9_1) { e_9 = { error: e_9_1 }; }\n            finally {\n                try {\n                    if (resolveTrees_1_1 && !resolveTrees_1_1.done && (_a = resolveTrees_1.return)) _a.call(resolveTrees_1);\n                }\n                finally { if (e_9) throw e_9.error; }\n            }\n        }\n        if (Object.keys(legacy_missingNodeMap).length) {\n            Object.assign(this.legacy_missingNodeRetryMap, legacy_missingNodeMap);\n        }\n        d.texts.forEach(function (mutation) {\n            var target = _this.mirror.getNode(mutation.id);\n            if (!target) {\n                return _this.warnNodeNotFound(d, mutation.id);\n            }\n            if (_this.fragmentParentMap.has(target)) {\n                target = _this.fragmentParentMap.get(target);\n            }\n            target.textContent = mutation.value;\n        });\n        d.attributes.forEach(function (mutation) {\n            var target = _this.mirror.getNode(mutation.id);\n            if (!target) {\n                return _this.warnNodeNotFound(d, mutation.id);\n            }\n            if (_this.fragmentParentMap.has(target)) {\n                target = _this.fragmentParentMap.get(target);\n            }\n            for (var attributeName in mutation.attributes) {\n                if (typeof attributeName === 'string') {\n                    var value = mutation.attributes[attributeName];\n                    try {\n                        if (value !== null) {\n                            target.setAttribute(attributeName, value);\n                        }\n                        else {\n                            target.removeAttribute(attributeName);\n                        }\n                    }\n                    catch (error) {\n                        if (_this.config.showWarning) {\n                            console.warn('An error occurred may due to the checkout feature.', error);\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Replayer.prototype.applyScroll = function (d) {\n        var target = this.mirror.getNode(d.id);\n        if (!target) {\n            return this.debugNodeNotFound(d, d.id);\n        }\n        if (target === this.iframe.contentDocument) {\n            this.iframe.contentWindow.scrollTo({\n                top: d.y,\n                left: d.x,\n                behavior: 'smooth',\n            });\n        }\n        else {\n            try {\n                target.scrollTop = d.y;\n                target.scrollLeft = d.x;\n            }\n            catch (error) {\n            }\n        }\n    };\n    Replayer.prototype.applyInput = function (d) {\n        var target = this.mirror.getNode(d.id);\n        if (!target) {\n            return this.debugNodeNotFound(d, d.id);\n        }\n        try {\n            target.checked = d.isChecked;\n            target.value = d.text;\n        }\n        catch (error) {\n        }\n    };\n    Replayer.prototype.legacy_resolveMissingNode = function (map, parent, target, targetMutation) {\n        var previousId = targetMutation.previousId, nextId = targetMutation.nextId;\n        var previousInMap = previousId && map[previousId];\n        var nextInMap = nextId && map[nextId];\n        if (previousInMap) {\n            var _a = previousInMap, node = _a.node, mutation = _a.mutation;\n            parent.insertBefore(node, target);\n            delete map[mutation.node.id];\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\n            if (mutation.previousId || mutation.nextId) {\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\n            }\n        }\n        if (nextInMap) {\n            var _b = nextInMap, node = _b.node, mutation = _b.mutation;\n            parent.insertBefore(node, target.nextSibling);\n            delete map[mutation.node.id];\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\n            if (mutation.previousId || mutation.nextId) {\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\n            }\n        }\n    };\n    Replayer.prototype.moveAndHover = function (d, x, y, id) {\n        var target = this.mirror.getNode(id);\n        if (!target) {\n            return this.debugNodeNotFound(d, id);\n        }\n        var base = getBaseDimension(target, this.iframe);\n        var _x = x * base.absoluteScale + base.x;\n        var _y = y * base.absoluteScale + base.y;\n        this.mouse.style.left = _x + \"px\";\n        this.mouse.style.top = _y + \"px\";\n        this.drawMouseTail({ x: _x, y: _y });\n        this.hoverElements(target);\n    };\n    Replayer.prototype.drawMouseTail = function (position) {\n        var _this = this;\n        if (!this.mouseTail) {\n            return;\n        }\n        var _a = this.config.mouseTail === true\n            ? defaultMouseTailConfig\n            : Object.assign({}, defaultMouseTailConfig, this.config.mouseTail), lineCap = _a.lineCap, lineWidth = _a.lineWidth, strokeStyle = _a.strokeStyle, duration = _a.duration;\n        var draw = function () {\n            if (!_this.mouseTail) {\n                return;\n            }\n            var ctx = _this.mouseTail.getContext('2d');\n            if (!ctx || !_this.tailPositions.length) {\n                return;\n            }\n            ctx.clearRect(0, 0, _this.mouseTail.width, _this.mouseTail.height);\n            ctx.beginPath();\n            ctx.lineWidth = lineWidth;\n            ctx.lineCap = lineCap;\n            ctx.strokeStyle = strokeStyle;\n            ctx.moveTo(_this.tailPositions[0].x, _this.tailPositions[0].y);\n            _this.tailPositions.forEach(function (p) { return ctx.lineTo(p.x, p.y); });\n            ctx.stroke();\n        };\n        this.tailPositions.push(position);\n        draw();\n        setTimeout(function () {\n            _this.tailPositions = _this.tailPositions.filter(function (p) { return p !== position; });\n            draw();\n        }, duration / this.speedService.state.context.timer.speed);\n    };\n    Replayer.prototype.hoverElements = function (el) {\n        var _a;\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.querySelectorAll('.\\\\:hover').forEach(function (hoveredEl) {\n            hoveredEl.classList.remove(':hover');\n        });\n        var currentEl = el;\n        while (currentEl) {\n            if (currentEl.classList) {\n                currentEl.classList.add(':hover');\n            }\n            currentEl = currentEl.parentElement;\n        }\n    };\n    Replayer.prototype.isUserInteraction = function (event) {\n        if (event.type !== EventType.IncrementalSnapshot) {\n            return false;\n        }\n        return (event.data.source > IncrementalSource.Mutation &&\n            event.data.source <= IncrementalSource.Input);\n    };\n    Replayer.prototype.backToNormal = function () {\n        this.nextUserInteractionEvent = null;\n        if (this.speedService.state.matches('normal')) {\n            return;\n        }\n        this.speedService.send({ type: 'BACK_TO_NORMAL' });\n        this.emitter.emit(ReplayerEvents.SkipEnd, {\n            speed: this.speedService.state.context.normalSpeed,\n        });\n    };\n    Replayer.prototype.restoreRealParent = function (frag, parent) {\n        this.mirror.map[parent.__sn.id] = parent;\n        if (parent.__sn.type === NodeType.Element &&\n            parent.__sn.tagName === 'textarea' &&\n            frag.textContent) {\n            parent.value = frag.textContent;\n        }\n        parent.appendChild(frag);\n        this.restoreState(parent);\n    };\n    Replayer.prototype.storeState = function (parent) {\n        var e_10, _a;\n        if (parent) {\n            if (parent.nodeType === parent.ELEMENT_NODE) {\n                var parentElement = parent;\n                if (parentElement.scrollLeft || parentElement.scrollTop) {\n                    this.elementStateMap.set(parent, {\n                        scroll: [parentElement.scrollLeft, parentElement.scrollTop],\n                    });\n                }\n                var children = parentElement.children;\n                try {\n                    for (var _b = __values(Array.from(children)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var child = _c.value;\n                        this.storeState(child);\n                    }\n                }\n                catch (e_10_1) { e_10 = { error: e_10_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_10) throw e_10.error; }\n                }\n            }\n        }\n    };\n    Replayer.prototype.restoreState = function (parent) {\n        var e_11, _a;\n        if (parent.nodeType === parent.ELEMENT_NODE) {\n            var parentElement = parent;\n            if (this.elementStateMap.has(parent)) {\n                var storedState = this.elementStateMap.get(parent);\n                if (storedState.scroll) {\n                    parentElement.scrollLeft = storedState.scroll[0];\n                    parentElement.scrollTop = storedState.scroll[1];\n                }\n                this.elementStateMap.delete(parent);\n            }\n            var children = parentElement.children;\n            try {\n                for (var _b = __values(Array.from(children)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var child = _c.value;\n                    this.restoreState(child);\n                }\n            }\n            catch (e_11_1) { e_11 = { error: e_11_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_11) throw e_11.error; }\n            }\n        }\n    };\n    Replayer.prototype.warnNodeNotFound = function (d, id) {\n        this.warn(\"Node with id '\" + id + \"' not found in\", d);\n    };\n    Replayer.prototype.warnCanvasMutationFailed = function (d, id, error) {\n        this.warn(\"Has error on update canvas '\" + id + \"'\", d, error);\n    };\n    Replayer.prototype.debugNodeNotFound = function (d, id) {\n        this.debug(REPLAY_CONSOLE_PREFIX, \"Node with id '\" + id + \"' not found in\", d);\n    };\n    Replayer.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this.config.showWarning) {\n            return;\n        }\n        console.warn.apply(console, __spread([REPLAY_CONSOLE_PREFIX], args));\n    };\n    Replayer.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this.config.showDebug) {\n            return;\n        }\n        console.log.apply(console, __spread([REPLAY_CONSOLE_PREFIX], args));\n    };\n    return Replayer;\n}());\n\nexport { Replayer };\n","import { __assign, __read } from '../../ext/tslib/tslib.es6.js';\nimport { snapshot } from '../../ext/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { EventType, IncrementalSource } from '../types.js';\nimport { polyfill, on, createMirror, getWindowWidth, getWindowHeight, isIframeINode, hasShadowRoot } from '../utils.js';\nimport { initObservers, mutationBuffers } from './observer.js';\nimport { IframeManager } from './iframe-manager.js';\nimport { ShadowDomManager } from './shadow-dom-manager.js';\n\nfunction wrapEvent(e) {\n    return __assign(__assign({}, e), { timestamp: Date.now() });\n}\nvar wrappedEmit;\nvar takeFullSnapshot;\nvar mirror = createMirror();\nfunction record(options) {\n    if (options === void 0) { options = {}; }\n    var emit = options.emit, checkoutEveryNms = options.checkoutEveryNms, checkoutEveryNth = options.checkoutEveryNth, _a = options.blockClass, blockClass = _a === void 0 ? 'rr-block' : _a, _b = options.blockSelector, blockSelector = _b === void 0 ? null : _b, _c = options.ignoreClass, ignoreClass = _c === void 0 ? 'rr-ignore' : _c, _d = options.maskTextClass, maskTextClass = _d === void 0 ? 'rr-mask' : _d, _e = options.maskTextSelector, maskTextSelector = _e === void 0 ? null : _e, _f = options.inlineStylesheet, inlineStylesheet = _f === void 0 ? true : _f, maskAllInputs = options.maskAllInputs, _maskInputOptions = options.maskInputOptions, _slimDOMOptions = options.slimDOMOptions, maskInputFn = options.maskInputFn, maskTextFn = options.maskTextFn, hooks = options.hooks, packFn = options.packFn, _g = options.sampling, sampling = _g === void 0 ? {} : _g, mousemoveWait = options.mousemoveWait, _h = options.recordCanvas, recordCanvas = _h === void 0 ? false : _h, _j = options.collectFonts, collectFonts = _j === void 0 ? false : _j, plugins = options.plugins, _k = options.keepIframeSrcFn, keepIframeSrcFn = _k === void 0 ? function () { return false; } : _k;\n    if (!emit) {\n        throw new Error('emit function is required');\n    }\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\n        sampling.mousemove = mousemoveWait;\n    }\n    var maskInputOptions = maskAllInputs === true\n        ? {\n            color: true,\n            date: true,\n            'datetime-local': true,\n            email: true,\n            month: true,\n            number: true,\n            range: true,\n            search: true,\n            tel: true,\n            text: true,\n            time: true,\n            url: true,\n            week: true,\n            textarea: true,\n            select: true,\n            password: true,\n        }\n        : _maskInputOptions !== undefined\n            ? _maskInputOptions\n            : { password: true };\n    var slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\n        ? {\n            script: true,\n            comment: true,\n            headFavicon: true,\n            headWhitespace: true,\n            headMetaSocial: true,\n            headMetaRobots: true,\n            headMetaHttpEquiv: true,\n            headMetaVerification: true,\n            headMetaAuthorship: _slimDOMOptions === 'all',\n            headMetaDescKeywords: _slimDOMOptions === 'all',\n        }\n        : _slimDOMOptions\n            ? _slimDOMOptions\n            : {};\n    polyfill();\n    var lastFullSnapshotEvent;\n    var incrementalSnapshotCount = 0;\n    wrappedEmit = function (e, isCheckout) {\n        var _a;\n        if (((_a = mutationBuffers[0]) === null || _a === void 0 ? void 0 : _a.isFrozen()) &&\n            e.type !== EventType.FullSnapshot &&\n            !(e.type === EventType.IncrementalSnapshot &&\n                e.data.source === IncrementalSource.Mutation)) {\n            mutationBuffers.forEach(function (buf) { return buf.unfreeze(); });\n        }\n        emit((packFn ? packFn(e) : e), isCheckout);\n        if (e.type === EventType.FullSnapshot) {\n            lastFullSnapshotEvent = e;\n            incrementalSnapshotCount = 0;\n        }\n        else if (e.type === EventType.IncrementalSnapshot) {\n            if (e.data.source === IncrementalSource.Mutation &&\n                e.data.isAttachIframe) {\n                return;\n            }\n            incrementalSnapshotCount++;\n            var exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\n            var exceedTime = checkoutEveryNms &&\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\n            if (exceedCount || exceedTime) {\n                takeFullSnapshot(true);\n            }\n        }\n    };\n    var wrappedMutationEmit = function (m) {\n        wrappedEmit(wrapEvent({\n            type: EventType.IncrementalSnapshot,\n            data: __assign({ source: IncrementalSource.Mutation }, m),\n        }));\n    };\n    var wrappedScrollEmit = function (p) {\n        return wrappedEmit(wrapEvent({\n            type: EventType.IncrementalSnapshot,\n            data: __assign({ source: IncrementalSource.Scroll }, p),\n        }));\n    };\n    var iframeManager = new IframeManager({\n        mutationCb: wrappedMutationEmit,\n    });\n    var shadowDomManager = new ShadowDomManager({\n        mutationCb: wrappedMutationEmit,\n        scrollCb: wrappedScrollEmit,\n        bypassOptions: {\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            maskTextClass: maskTextClass,\n            maskTextSelector: maskTextSelector,\n            inlineStylesheet: inlineStylesheet,\n            maskInputOptions: maskInputOptions,\n            maskTextFn: maskTextFn,\n            maskInputFn: maskInputFn,\n            recordCanvas: recordCanvas,\n            sampling: sampling,\n            slimDOMOptions: slimDOMOptions,\n            iframeManager: iframeManager,\n        },\n        mirror: mirror,\n    });\n    takeFullSnapshot = function (isCheckout) {\n        var _a, _b, _c, _d;\n        if (isCheckout === void 0) { isCheckout = false; }\n        wrappedEmit(wrapEvent({\n            type: EventType.Meta,\n            data: {\n                href: window.location.href,\n                width: getWindowWidth(),\n                height: getWindowHeight(),\n            },\n        }), isCheckout);\n        mutationBuffers.forEach(function (buf) { return buf.lock(); });\n        var _e = __read(snapshot(document, {\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            maskTextClass: maskTextClass,\n            maskTextSelector: maskTextSelector,\n            inlineStylesheet: inlineStylesheet,\n            maskAllInputs: maskInputOptions,\n            maskTextFn: maskTextFn,\n            slimDOM: slimDOMOptions,\n            recordCanvas: recordCanvas,\n            onSerialize: function (n) {\n                if (isIframeINode(n)) {\n                    iframeManager.addIframe(n);\n                }\n                if (hasShadowRoot(n)) {\n                    shadowDomManager.addShadowRoot(n.shadowRoot, document);\n                }\n            },\n            onIframeLoad: function (iframe, childSn) {\n                iframeManager.attachIframe(iframe, childSn);\n            },\n            keepIframeSrcFn: keepIframeSrcFn,\n        }), 2), node = _e[0], idNodeMap = _e[1];\n        if (!node) {\n            return console.warn('Failed to snapshot the document');\n        }\n        mirror.map = idNodeMap;\n        wrappedEmit(wrapEvent({\n            type: EventType.FullSnapshot,\n            data: {\n                node: node,\n                initialOffset: {\n                    left: window.pageXOffset !== undefined\n                        ? window.pageXOffset\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollLeft) || ((_b = (_a = document === null || document === void 0 ? void 0 : document.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) || (document === null || document === void 0 ? void 0 : document.body.scrollLeft) ||\n                            0,\n                    top: window.pageYOffset !== undefined\n                        ? window.pageYOffset\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollTop) || ((_d = (_c = document === null || document === void 0 ? void 0 : document.body) === null || _c === void 0 ? void 0 : _c.parentElement) === null || _d === void 0 ? void 0 : _d.scrollTop) || (document === null || document === void 0 ? void 0 : document.body.scrollTop) ||\n                            0,\n                },\n            },\n        }));\n        mutationBuffers.forEach(function (buf) { return buf.unlock(); });\n    };\n    try {\n        var handlers_1 = [];\n        handlers_1.push(on('DOMContentLoaded', function () {\n            wrappedEmit(wrapEvent({\n                type: EventType.DomContentLoaded,\n                data: {},\n            }));\n        }));\n        var observe_1 = function (doc) {\n            return initObservers({\n                mutationCb: wrappedMutationEmit,\n                mousemoveCb: function (positions, source) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: {\n                            source: source,\n                            positions: positions,\n                        },\n                    }));\n                },\n                mouseInteractionCb: function (d) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.MouseInteraction }, d),\n                    }));\n                },\n                scrollCb: wrappedScrollEmit,\n                viewportResizeCb: function (d) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.ViewportResize }, d),\n                    }));\n                },\n                inputCb: function (v) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Input }, v),\n                    }));\n                },\n                mediaInteractionCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.MediaInteraction }, p),\n                    }));\n                },\n                styleSheetRuleCb: function (r) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.StyleSheetRule }, r),\n                    }));\n                },\n                canvasMutationCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.CanvasMutation }, p),\n                    }));\n                },\n                fontCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Font }, p),\n                    }));\n                },\n                blockClass: blockClass,\n                ignoreClass: ignoreClass,\n                maskTextClass: maskTextClass,\n                maskTextSelector: maskTextSelector,\n                maskInputOptions: maskInputOptions,\n                inlineStylesheet: inlineStylesheet,\n                sampling: sampling,\n                recordCanvas: recordCanvas,\n                collectFonts: collectFonts,\n                doc: doc,\n                maskInputFn: maskInputFn,\n                maskTextFn: maskTextFn,\n                blockSelector: blockSelector,\n                slimDOMOptions: slimDOMOptions,\n                mirror: mirror,\n                iframeManager: iframeManager,\n                shadowDomManager: shadowDomManager,\n                plugins: (plugins === null || plugins === void 0 ? void 0 : plugins.map(function (p) { return ({\n                    observer: p.observer,\n                    options: p.options,\n                    callback: function (payload) {\n                        return wrappedEmit(wrapEvent({\n                            type: EventType.Plugin,\n                            data: {\n                                plugin: p.name,\n                                payload: payload,\n                            },\n                        }));\n                    },\n                }); })) || [],\n            }, hooks);\n        };\n        iframeManager.addLoadListener(function (iframeEl) {\n            handlers_1.push(observe_1(iframeEl.contentDocument));\n        });\n        var init_1 = function () {\n            takeFullSnapshot();\n            handlers_1.push(observe_1(document));\n        };\n        if (document.readyState === 'interactive' ||\n            document.readyState === 'complete') {\n            init_1();\n        }\n        else {\n            handlers_1.push(on('load', function () {\n                wrappedEmit(wrapEvent({\n                    type: EventType.Load,\n                    data: {},\n                }));\n                init_1();\n            }, window));\n        }\n        return function () {\n            handlers_1.forEach(function (h) { return h(); });\n        };\n    }\n    catch (error) {\n        console.warn(error);\n    }\n}\nrecord.addCustomEvent = function (tag, payload) {\n    if (!wrappedEmit) {\n        throw new Error('please add custom event after start recording');\n    }\n    wrappedEmit(wrapEvent({\n        type: EventType.Custom,\n        data: {\n            tag: tag,\n            payload: payload,\n        },\n    }));\n};\nrecord.freezePage = function () {\n    mutationBuffers.forEach(function (buf) { return buf.freeze(); });\n};\nrecord.takeFullSnapshot = function (isCheckout) {\n    if (!takeFullSnapshot) {\n        throw new Error('please take full snapshot after start recording');\n    }\n    takeFullSnapshot(isCheckout);\n};\nrecord.mirror = mirror;\n\nexport default record;\n","import { __values } from '../../ext/tslib/tslib.es6.js';\nimport { isShadowRoot, maskInputValue, transformAttribute, needMaskingText, IGNORED_NODE, serializeNodeWithId } from '../../ext/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { isIgnored, isBlocked, isAncestorRemoved, isIframeINode, hasShadowRoot } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\n    return '__ln' in n;\n}\nvar DoubleLinkedList = (function () {\n    function DoubleLinkedList() {\n        this.length = 0;\n        this.head = null;\n    }\n    DoubleLinkedList.prototype.get = function (position) {\n        if (position >= this.length) {\n            throw new Error('Position outside of list range');\n        }\n        var current = this.head;\n        for (var index = 0; index < position; index++) {\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\n        }\n        return current;\n    };\n    DoubleLinkedList.prototype.addNode = function (n) {\n        var node = {\n            value: n,\n            previous: null,\n            next: null,\n        };\n        n.__ln = node;\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\n            var current = n.previousSibling.__ln.next;\n            node.next = current;\n            node.previous = n.previousSibling.__ln;\n            n.previousSibling.__ln.next = node;\n            if (current) {\n                current.previous = node;\n            }\n        }\n        else if (n.nextSibling &&\n            isNodeInLinkedList(n.nextSibling) &&\n            n.nextSibling.__ln.previous) {\n            var current = n.nextSibling.__ln.previous;\n            node.previous = current;\n            node.next = n.nextSibling.__ln;\n            n.nextSibling.__ln.previous = node;\n            if (current) {\n                current.next = node;\n            }\n        }\n        else {\n            if (this.head) {\n                this.head.previous = node;\n            }\n            node.next = this.head;\n            this.head = node;\n        }\n        this.length++;\n    };\n    DoubleLinkedList.prototype.removeNode = function (n) {\n        var current = n.__ln;\n        if (!this.head) {\n            return;\n        }\n        if (!current.previous) {\n            this.head = current.next;\n            if (this.head) {\n                this.head.previous = null;\n            }\n        }\n        else {\n            current.previous.next = current.next;\n            if (current.next) {\n                current.next.previous = current.previous;\n            }\n        }\n        if (n.__ln) {\n            delete n.__ln;\n        }\n        this.length--;\n    };\n    return DoubleLinkedList;\n}());\nvar moveKey = function (id, parentId) { return id + \"@\" + parentId; };\nfunction isINode(n) {\n    return '__sn' in n;\n}\nvar MutationBuffer = (function () {\n    function MutationBuffer() {\n        var _this = this;\n        this.frozen = false;\n        this.locked = false;\n        this.texts = [];\n        this.attributes = [];\n        this.removes = [];\n        this.mapRemoves = [];\n        this.movedMap = {};\n        this.addedSet = new Set();\n        this.movedSet = new Set();\n        this.droppedSet = new Set();\n        this.processMutations = function (mutations) {\n            mutations.forEach(_this.processMutation);\n            _this.emit();\n        };\n        this.emit = function () {\n            var e_1, _a, e_2, _b;\n            if (_this.frozen || _this.locked) {\n                return;\n            }\n            var adds = [];\n            var addList = new DoubleLinkedList();\n            var getNextId = function (n) {\n                var ns = n;\n                var nextId = IGNORED_NODE;\n                while (nextId === IGNORED_NODE) {\n                    ns = ns && ns.nextSibling;\n                    nextId = ns && _this.mirror.getId(ns);\n                }\n                if (nextId === -1 && isBlocked(n.nextSibling, _this.blockClass)) {\n                    nextId = null;\n                }\n                return nextId;\n            };\n            var pushAdd = function (n) {\n                var _a;\n                var shadowHost = n.getRootNode\n                    ? (_a = n.getRootNode()) === null || _a === void 0 ? void 0 : _a.host : null;\n                var notInDoc = !_this.doc.contains(n) && !_this.doc.contains(shadowHost);\n                if (!n.parentNode || notInDoc) {\n                    return;\n                }\n                var parentId = isShadowRoot(n.parentNode)\n                    ? _this.mirror.getId(shadowHost)\n                    : _this.mirror.getId(n.parentNode);\n                var nextId = getNextId(n);\n                if (parentId === -1 || nextId === -1) {\n                    return addList.addNode(n);\n                }\n                var sn = serializeNodeWithId(n, {\n                    doc: _this.doc,\n                    map: _this.mirror.map,\n                    blockClass: _this.blockClass,\n                    blockSelector: _this.blockSelector,\n                    maskTextClass: _this.maskTextClass,\n                    maskTextSelector: _this.maskTextSelector,\n                    skipChild: true,\n                    inlineStylesheet: _this.inlineStylesheet,\n                    maskInputOptions: _this.maskInputOptions,\n                    maskTextFn: _this.maskTextFn,\n                    maskInputFn: _this.maskInputFn,\n                    slimDOMOptions: _this.slimDOMOptions,\n                    recordCanvas: _this.recordCanvas,\n                    onSerialize: function (currentN) {\n                        if (isIframeINode(currentN)) {\n                            _this.iframeManager.addIframe(currentN);\n                        }\n                        if (hasShadowRoot(n)) {\n                            _this.shadowDomManager.addShadowRoot(n.shadowRoot, document);\n                        }\n                    },\n                    onIframeLoad: function (iframe, childSn) {\n                        _this.iframeManager.attachIframe(iframe, childSn);\n                    },\n                });\n                if (sn) {\n                    adds.push({\n                        parentId: parentId,\n                        nextId: nextId,\n                        node: sn,\n                    });\n                }\n            };\n            while (_this.mapRemoves.length) {\n                _this.mirror.removeNodeFromMap(_this.mapRemoves.shift());\n            }\n            try {\n                for (var _c = __values(_this.movedSet), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var n = _d.value;\n                    if (isParentRemoved(_this.removes, n, _this.mirror) &&\n                        !_this.movedSet.has(n.parentNode)) {\n                        continue;\n                    }\n                    pushAdd(n);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            try {\n                for (var _e = __values(_this.addedSet), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var n = _f.value;\n                    if (!isAncestorInSet(_this.droppedSet, n) &&\n                        !isParentRemoved(_this.removes, n, _this.mirror)) {\n                        pushAdd(n);\n                    }\n                    else if (isAncestorInSet(_this.movedSet, n)) {\n                        pushAdd(n);\n                    }\n                    else {\n                        _this.droppedSet.add(n);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            var candidate = null;\n            while (addList.length) {\n                var node = null;\n                if (candidate) {\n                    var parentId = _this.mirror.getId(candidate.value.parentNode);\n                    var nextId = getNextId(candidate.value);\n                    if (parentId !== -1 && nextId !== -1) {\n                        node = candidate;\n                    }\n                }\n                if (!node) {\n                    for (var index = addList.length - 1; index >= 0; index--) {\n                        var _node = addList.get(index);\n                        var parentId = _this.mirror.getId(_node.value.parentNode);\n                        var nextId = getNextId(_node.value);\n                        if (parentId !== -1 && nextId !== -1) {\n                            node = _node;\n                            break;\n                        }\n                    }\n                }\n                if (!node) {\n                    while (addList.head) {\n                        addList.removeNode(addList.head.value);\n                    }\n                    break;\n                }\n                candidate = node.previous;\n                addList.removeNode(node.value);\n                pushAdd(node.value);\n            }\n            var payload = {\n                texts: _this.texts\n                    .map(function (text) { return ({\n                    id: _this.mirror.getId(text.node),\n                    value: text.value,\n                }); })\n                    .filter(function (text) { return _this.mirror.has(text.id); }),\n                attributes: _this.attributes\n                    .map(function (attribute) { return ({\n                    id: _this.mirror.getId(attribute.node),\n                    attributes: attribute.attributes,\n                }); })\n                    .filter(function (attribute) { return _this.mirror.has(attribute.id); }),\n                removes: _this.removes,\n                adds: adds,\n            };\n            if (!payload.texts.length &&\n                !payload.attributes.length &&\n                !payload.removes.length &&\n                !payload.adds.length) {\n                return;\n            }\n            _this.texts = [];\n            _this.attributes = [];\n            _this.removes = [];\n            _this.addedSet = new Set();\n            _this.movedSet = new Set();\n            _this.droppedSet = new Set();\n            _this.movedMap = {};\n            _this.emissionCallback(payload);\n        };\n        this.processMutation = function (m) {\n            if (isIgnored(m.target)) {\n                return;\n            }\n            switch (m.type) {\n                case 'characterData': {\n                    var value = m.target.textContent;\n                    if (!isBlocked(m.target, _this.blockClass) && value !== m.oldValue) {\n                        _this.texts.push({\n                            value: needMaskingText(m.target, _this.maskTextClass, _this.maskTextSelector) && value\n                                ? _this.maskTextFn\n                                    ? _this.maskTextFn(value)\n                                    : value.replace(/[\\S]/g, '*')\n                                : value,\n                            node: m.target,\n                        });\n                    }\n                    break;\n                }\n                case 'attributes': {\n                    var value = m.target.getAttribute(m.attributeName);\n                    if (m.attributeName === 'value') {\n                        value = maskInputValue({\n                            maskInputOptions: _this.maskInputOptions,\n                            tagName: m.target.tagName,\n                            type: m.target.getAttribute('type'),\n                            value: value,\n                            maskInputFn: _this.maskInputFn,\n                        });\n                    }\n                    if (isBlocked(m.target, _this.blockClass) || value === m.oldValue) {\n                        return;\n                    }\n                    var item = _this.attributes.find(function (a) { return a.node === m.target; });\n                    if (!item) {\n                        item = {\n                            node: m.target,\n                            attributes: {},\n                        };\n                        _this.attributes.push(item);\n                    }\n                    item.attributes[m.attributeName] = transformAttribute(_this.doc, m.target.tagName, m.attributeName, value);\n                    break;\n                }\n                case 'childList': {\n                    m.addedNodes.forEach(function (n) { return _this.genAdds(n, m.target); });\n                    m.removedNodes.forEach(function (n) {\n                        var nodeId = _this.mirror.getId(n);\n                        var parentId = isShadowRoot(m.target)\n                            ? _this.mirror.getId(m.target.host)\n                            : _this.mirror.getId(m.target);\n                        if (isBlocked(n, _this.blockClass) ||\n                            isBlocked(m.target, _this.blockClass) ||\n                            isIgnored(n)) {\n                            return;\n                        }\n                        if (_this.addedSet.has(n)) {\n                            deepDelete(_this.addedSet, n);\n                            _this.droppedSet.add(n);\n                        }\n                        else if (_this.addedSet.has(m.target) && nodeId === -1) ;\n                        else if (isAncestorRemoved(m.target, _this.mirror)) ;\n                        else if (_this.movedSet.has(n) &&\n                            _this.movedMap[moveKey(nodeId, parentId)]) {\n                            deepDelete(_this.movedSet, n);\n                        }\n                        else {\n                            _this.removes.push({\n                                parentId: parentId,\n                                id: nodeId,\n                                isShadow: isShadowRoot(m.target) ? true : undefined,\n                            });\n                        }\n                        _this.mapRemoves.push(n);\n                    });\n                    break;\n                }\n            }\n        };\n        this.genAdds = function (n, target) {\n            if (isBlocked(n, _this.blockClass)) {\n                return;\n            }\n            if (target && isBlocked(target, _this.blockClass)) {\n                return;\n            }\n            if (isINode(n)) {\n                if (isIgnored(n)) {\n                    return;\n                }\n                _this.movedSet.add(n);\n                var targetId = null;\n                if (target && isINode(target)) {\n                    targetId = target.__sn.id;\n                }\n                if (targetId) {\n                    _this.movedMap[moveKey(n.__sn.id, targetId)] = true;\n                }\n            }\n            else {\n                _this.addedSet.add(n);\n                _this.droppedSet.delete(n);\n            }\n            n.childNodes.forEach(function (childN) { return _this.genAdds(childN); });\n        };\n    }\n    MutationBuffer.prototype.init = function (cb, blockClass, blockSelector, maskTextClass, maskTextSelector, inlineStylesheet, maskInputOptions, maskTextFn, maskInputFn, recordCanvas, slimDOMOptions, doc, mirror, iframeManager, shadowDomManager) {\n        this.blockClass = blockClass;\n        this.blockSelector = blockSelector;\n        this.maskTextClass = maskTextClass;\n        this.maskTextSelector = maskTextSelector;\n        this.inlineStylesheet = inlineStylesheet;\n        this.maskInputOptions = maskInputOptions;\n        this.maskTextFn = maskTextFn;\n        this.maskInputFn = maskInputFn;\n        this.recordCanvas = recordCanvas;\n        this.slimDOMOptions = slimDOMOptions;\n        this.emissionCallback = cb;\n        this.doc = doc;\n        this.mirror = mirror;\n        this.iframeManager = iframeManager;\n        this.shadowDomManager = shadowDomManager;\n    };\n    MutationBuffer.prototype.freeze = function () {\n        this.frozen = true;\n    };\n    MutationBuffer.prototype.unfreeze = function () {\n        this.frozen = false;\n        this.emit();\n    };\n    MutationBuffer.prototype.isFrozen = function () {\n        return this.frozen;\n    };\n    MutationBuffer.prototype.lock = function () {\n        this.locked = true;\n    };\n    MutationBuffer.prototype.unlock = function () {\n        this.locked = false;\n        this.emit();\n    };\n    return MutationBuffer;\n}());\nfunction deepDelete(addsSet, n) {\n    addsSet.delete(n);\n    n.childNodes.forEach(function (childN) { return deepDelete(addsSet, childN); });\n}\nfunction isParentRemoved(removes, n, mirror) {\n    var parentNode = n.parentNode;\n    if (!parentNode) {\n        return false;\n    }\n    var parentId = mirror.getId(parentNode);\n    if (removes.some(function (r) { return r.id === parentId; })) {\n        return true;\n    }\n    return isParentRemoved(removes, parentNode, mirror);\n}\nfunction isAncestorInSet(set, n) {\n    var parentNode = n.parentNode;\n    if (!parentNode) {\n        return false;\n    }\n    if (set.has(parentNode)) {\n        return true;\n    }\n    return isAncestorInSet(set, parentNode);\n}\n\nexport default MutationBuffer;\n","var IframeManager = (function () {\n    function IframeManager(options) {\n        this.iframes = new WeakMap();\n        this.mutationCb = options.mutationCb;\n    }\n    IframeManager.prototype.addIframe = function (iframeEl) {\n        this.iframes.set(iframeEl, true);\n    };\n    IframeManager.prototype.addLoadListener = function (cb) {\n        this.loadListener = cb;\n    };\n    IframeManager.prototype.attachIframe = function (iframeEl, childSn) {\n        var _a;\n        this.mutationCb({\n            adds: [\n                {\n                    parentId: iframeEl.__sn.id,\n                    nextId: null,\n                    node: childSn,\n                },\n            ],\n            removes: [],\n            texts: [],\n            attributes: [],\n            isAttachIframe: true,\n        });\n        (_a = this.loadListener) === null || _a === void 0 ? void 0 : _a.call(this, iframeEl);\n    };\n    return IframeManager;\n}());\n\nexport { IframeManager };\n","import { Component, OnInit } from '@angular/core';\nimport { record } from 'rrweb';\n\nimport { RrwebService } from 'src/app/service/rrweb.service';\n\n@Component({\n  selector: 'app-rr-web',\n  templateUrl: './rr-web.component.html',\n  styleUrls: ['./rr-web.component.scss']\n})\nexport class RrWebComponent implements OnInit {\n  public events = [];\n  public replayer = null;\n  constructor(\n    public rrwebService: RrwebService,\n  ) {\n\n  }\n\n  ngOnInit(): void {\n    this.startRecord();\n  }\n\n  test1() {\n    console.log('test1');\n  }\n  test2() {\n    console.log('test2');\n  }\n  test3() {\n    console.log('test3');\n  }\n  startRecord() {\n    console.log(record, 'rrweb');\n  }\n\n\n}\n","<p>rr-web works!</p>\n<div class=\"main\">\n    <div class=\"title\" (click)=\"test1()\"> 1</div>\n    <div class=\"center\" (click)=\"test2()\"> 2</div>\n    <div class=\"footer\" (click)=\"test3()\"> 3</div>\n</div>","import { __values, __spread } from '../../../../ext/tslib/tslib.es6.js';\nimport { EventType, IncrementalSource } from '../../../types.js';\nimport { PLUGIN_NAME } from '../record/index.js';\n\nvar ORIGINAL_ATTRIBUTE_NAME = '__rrweb_original__';\nvar defaultLogConfig = {\n    level: [\n        'assert',\n        'clear',\n        'count',\n        'countReset',\n        'debug',\n        'dir',\n        'dirxml',\n        'error',\n        'group',\n        'groupCollapsed',\n        'groupEnd',\n        'info',\n        'log',\n        'table',\n        'time',\n        'timeEnd',\n        'timeLog',\n        'trace',\n        'warn',\n    ],\n    replayLogger: undefined,\n};\nvar LogReplayPlugin = (function () {\n    function LogReplayPlugin(config) {\n        this.config = Object.assign(defaultLogConfig, config);\n    }\n    LogReplayPlugin.prototype.getConsoleLogger = function () {\n        var e_1, _a;\n        var _this = this;\n        var replayLogger = {};\n        var _loop_1 = function (level) {\n            if (level === 'trace') {\n                replayLogger[level] = function (data) {\n                    var logger = console.log[ORIGINAL_ATTRIBUTE_NAME]\n                        ? console.log[ORIGINAL_ATTRIBUTE_NAME]\n                        : console.log;\n                    logger.apply(void 0, __spread(data.payload.map(function (s) { return JSON.parse(s); }), [_this.formatMessage(data)]));\n                };\n            }\n            else {\n                replayLogger[level] = function (data) {\n                    var logger = console[level][ORIGINAL_ATTRIBUTE_NAME]\n                        ? console[level][ORIGINAL_ATTRIBUTE_NAME]\n                        : console[level];\n                    logger.apply(void 0, __spread(data.payload.map(function (s) { return JSON.parse(s); }), [_this.formatMessage(data)]));\n                };\n            }\n        };\n        try {\n            for (var _b = __values(this.config.level), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var level = _c.value;\n                _loop_1(level);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return replayLogger;\n    };\n    LogReplayPlugin.prototype.formatMessage = function (data) {\n        if (data.trace.length === 0) {\n            return '';\n        }\n        var stackPrefix = '\\n\\tat ';\n        var result = stackPrefix;\n        result += data.trace.join(stackPrefix);\n        return result;\n    };\n    return LogReplayPlugin;\n}());\nvar getReplayConsolePlugin = function (options) {\n    var replayLogger = (options === null || options === void 0 ? void 0 : options.replayLogger) || new LogReplayPlugin(options).getConsoleLogger();\n    return {\n        handler: function (event, _isSync, context) {\n            var logData = null;\n            if (event.type === EventType.IncrementalSnapshot &&\n                event.data.source === IncrementalSource.Log) {\n                logData = event.data;\n            }\n            else if (event.type === EventType.Plugin &&\n                event.data.plugin === PLUGIN_NAME) {\n                logData = event.data.payload;\n            }\n            if (logData) {\n                try {\n                    if (typeof replayLogger[logData.level] === 'function') {\n                        replayLogger[logData.level](logData);\n                    }\n                }\n                catch (error) {\n                    if (context.replayer.config.showWarning) {\n                        console.warn(error);\n                    }\n                }\n            }\n        },\n    };\n};\n\nexport { getReplayConsolePlugin };\n","var rules = function (blockClass) { return [\n    \".\" + blockClass + \" { background: #ccc }\",\n    'noscript { display: none !important; }',\n]; };\n\nexport default rules;\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = hMap(flt, 9, 0), flrm = hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = hMap(fdt, 5, 0), fdrm = hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    if (final && !lm)\n        return buf;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = new u32(256);\nfor (var i = 0; i < 256; ++i) {\n    var c = i, k = 9;\n    while (--k)\n        c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n    crct[i] = c;\n}\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n\nexport { strFromU8, strToU8, unzlibSync, zlibSync };\n","export { EventType, IncrementalSource, MouseInteractions, ReplayerEvents } from '../types.js';\nimport * as utils from '../utils.js';\nexport { utils };\nexport { _mirror as mirror } from '../utils.js';\nexport { default as record } from '../record/index.js';\nexport { Replayer } from '../replay/index.js';\nexport { addCustomEvent, freezePage } from '../index.js';\nexport { pack } from '../packer/pack.js';\nexport { unpack } from '../packer/unpack.js';\nexport { PLUGIN_NAME, getRecordConsolePlugin } from '../plugins/console/record/index.js';\nexport { getReplayConsolePlugin } from '../plugins/console/replay/index.js';\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RrwebService {\n  public events = [];\n  constructor() { }\n}\n","import { __assign, __values } from '../../ext/tslib/tslib.es6.js';\nimport { EventType, IncrementalSource, ReplayerEvents } from '../types.js';\nimport { needCastInSyncMode } from '../utils.js';\nimport { addDelay } from './timer.js';\nimport { interpret as f, createMachine as c, assign as r } from '../../ext/@xstate/fsm/es/index.js';\n\nfunction discardPriorSnapshots(events, baselineTime) {\n    for (var idx = events.length - 1; idx >= 0; idx--) {\n        var event = events[idx];\n        if (event.type === EventType.Meta) {\n            if (event.timestamp <= baselineTime) {\n                return events.slice(idx);\n            }\n        }\n    }\n    return events;\n}\nfunction createPlayerService(context, _a) {\n    var getCastFn = _a.getCastFn, emitter = _a.emitter;\n    var playerMachine = c({\n        id: 'player',\n        context: context,\n        initial: 'paused',\n        states: {\n            playing: {\n                on: {\n                    PAUSE: {\n                        target: 'paused',\n                        actions: ['pause'],\n                    },\n                    CAST_EVENT: {\n                        target: 'playing',\n                        actions: 'castEvent',\n                    },\n                    END: {\n                        target: 'paused',\n                        actions: ['resetLastPlayedEvent', 'pause'],\n                    },\n                    ADD_EVENT: {\n                        target: 'playing',\n                        actions: ['addEvent'],\n                    },\n                },\n            },\n            paused: {\n                on: {\n                    PLAY: {\n                        target: 'playing',\n                        actions: ['recordTimeOffset', 'play'],\n                    },\n                    CAST_EVENT: {\n                        target: 'paused',\n                        actions: 'castEvent',\n                    },\n                    TO_LIVE: {\n                        target: 'live',\n                        actions: ['startLive'],\n                    },\n                    ADD_EVENT: {\n                        target: 'paused',\n                        actions: ['addEvent'],\n                    },\n                },\n            },\n            live: {\n                on: {\n                    ADD_EVENT: {\n                        target: 'live',\n                        actions: ['addEvent'],\n                    },\n                    CAST_EVENT: {\n                        target: 'live',\n                        actions: ['castEvent'],\n                    },\n                },\n            },\n        },\n    }, {\n        actions: {\n            castEvent: r({\n                lastPlayedEvent: function (ctx, event) {\n                    if (event.type === 'CAST_EVENT') {\n                        return event.payload.event;\n                    }\n                    return ctx.lastPlayedEvent;\n                },\n            }),\n            recordTimeOffset: r(function (ctx, event) {\n                var timeOffset = ctx.timeOffset;\n                if ('payload' in event && 'timeOffset' in event.payload) {\n                    timeOffset = event.payload.timeOffset;\n                }\n                return __assign(__assign({}, ctx), { timeOffset: timeOffset, baselineTime: ctx.events[0].timestamp + timeOffset });\n            }),\n            play: function (ctx) {\n                var e_1, _a, e_2, _b;\n                var _c;\n                var timer = ctx.timer, events = ctx.events, baselineTime = ctx.baselineTime, lastPlayedEvent = ctx.lastPlayedEvent;\n                timer.clear();\n                try {\n                    for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n                        var event = events_1_1.value;\n                        addDelay(event, baselineTime);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                var neededEvents = discardPriorSnapshots(events, baselineTime);\n                var lastPlayedTimestamp = lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.timestamp;\n                if ((lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.type) === EventType.IncrementalSnapshot &&\n                    lastPlayedEvent.data.source === IncrementalSource.MouseMove) {\n                    lastPlayedTimestamp =\n                        lastPlayedEvent.timestamp + ((_c = lastPlayedEvent.data.positions[0]) === null || _c === void 0 ? void 0 : _c.timeOffset);\n                }\n                if (baselineTime < (lastPlayedTimestamp || 0)) {\n                    emitter.emit(ReplayerEvents.PlayBack);\n                }\n                var actions = new Array();\n                var _loop_1 = function (event) {\n                    if (lastPlayedTimestamp &&\n                        lastPlayedTimestamp < baselineTime &&\n                        (event.timestamp <= lastPlayedTimestamp ||\n                            event === lastPlayedEvent)) {\n                        return \"continue\";\n                    }\n                    var isSync = event.timestamp < baselineTime;\n                    if (isSync && !needCastInSyncMode(event)) {\n                        return \"continue\";\n                    }\n                    var castFn = getCastFn(event, isSync);\n                    if (isSync) {\n                        castFn();\n                    }\n                    else {\n                        actions.push({\n                            doAction: function () {\n                                castFn();\n                                emitter.emit(ReplayerEvents.EventCast, event);\n                            },\n                            delay: event.delay,\n                        });\n                    }\n                };\n                try {\n                    for (var neededEvents_1 = __values(neededEvents), neededEvents_1_1 = neededEvents_1.next(); !neededEvents_1_1.done; neededEvents_1_1 = neededEvents_1.next()) {\n                        var event = neededEvents_1_1.value;\n                        _loop_1(event);\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (neededEvents_1_1 && !neededEvents_1_1.done && (_b = neededEvents_1.return)) _b.call(neededEvents_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                emitter.emit(ReplayerEvents.Flush);\n                timer.addActions(actions);\n                timer.start();\n            },\n            pause: function (ctx) {\n                ctx.timer.clear();\n            },\n            resetLastPlayedEvent: r(function (ctx) {\n                return __assign(__assign({}, ctx), { lastPlayedEvent: null });\n            }),\n            startLive: r({\n                baselineTime: function (ctx, event) {\n                    ctx.timer.toggleLiveMode(true);\n                    ctx.timer.start();\n                    if (event.type === 'TO_LIVE' && event.payload.baselineTime) {\n                        return event.payload.baselineTime;\n                    }\n                    return Date.now();\n                },\n            }),\n            addEvent: r(function (ctx, machineEvent) {\n                var baselineTime = ctx.baselineTime, timer = ctx.timer, events = ctx.events;\n                if (machineEvent.type === 'ADD_EVENT') {\n                    var event_1 = machineEvent.payload.event;\n                    addDelay(event_1, baselineTime);\n                    var end = events.length - 1;\n                    if (!events[end] || events[end].timestamp <= event_1.timestamp) {\n                        events.push(event_1);\n                    }\n                    else {\n                        var insertionIndex = -1;\n                        var start = 0;\n                        while (start <= end) {\n                            var mid = Math.floor((start + end) / 2);\n                            if (events[mid].timestamp <= event_1.timestamp) {\n                                start = mid + 1;\n                            }\n                            else {\n                                end = mid - 1;\n                            }\n                        }\n                        if (insertionIndex === -1) {\n                            insertionIndex = start;\n                        }\n                        events.splice(insertionIndex, 0, event_1);\n                    }\n                    var isSync = event_1.timestamp < baselineTime;\n                    var castFn_1 = getCastFn(event_1, isSync);\n                    if (isSync) {\n                        castFn_1();\n                    }\n                    else if (timer.isActive()) {\n                        timer.addAction({\n                            doAction: function () {\n                                castFn_1();\n                                emitter.emit(ReplayerEvents.EventCast, event_1);\n                            },\n                            delay: event_1.delay,\n                        });\n                    }\n                }\n                return __assign(__assign({}, ctx), { events: events });\n            }),\n        },\n    });\n    return f(playerMachine);\n}\nfunction createSpeedService(context) {\n    var speedMachine = c({\n        id: 'speed',\n        context: context,\n        initial: 'normal',\n        states: {\n            normal: {\n                on: {\n                    FAST_FORWARD: {\n                        target: 'skipping',\n                        actions: ['recordSpeed', 'setSpeed'],\n                    },\n                    SET_SPEED: {\n                        target: 'normal',\n                        actions: ['setSpeed'],\n                    },\n                },\n            },\n            skipping: {\n                on: {\n                    BACK_TO_NORMAL: {\n                        target: 'normal',\n                        actions: ['restoreSpeed'],\n                    },\n                    SET_SPEED: {\n                        target: 'normal',\n                        actions: ['setSpeed'],\n                    },\n                },\n            },\n        },\n    }, {\n        actions: {\n            setSpeed: function (ctx, event) {\n                if ('payload' in event) {\n                    ctx.timer.setSpeed(event.payload.speed);\n                }\n            },\n            recordSpeed: r({\n                normalSpeed: function (ctx) { return ctx.timer.speed; },\n            }),\n            restoreSpeed: function (ctx) {\n                ctx.timer.setSpeed(ctx.normalSpeed);\n            },\n        },\n    });\n    return f(speedMachine);\n}\n\nexport { createPlayerService, createSpeedService, discardPriorSnapshots };\n","export { EventType, IncrementalSource, MouseInteractions, ReplayerEvents } from './types.js';\nimport * as utils from './utils.js';\nexport { utils };\nexport { _mirror as mirror } from './utils.js';\nimport record from './record/index.js';\nexport { default as record } from './record/index.js';\nexport { Replayer } from './replay/index.js';\n\nvar addCustomEvent = record.addCustomEvent;\nvar freezePage = record.freezePage;\n\nexport { addCustomEvent, freezePage };\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { RrWebRoutingModule } from './rr-web-routing.module';\nimport { RrWebComponent } from './rr-web/rr-web.component';\nimport { PlayrrwebComponent } from './playrrweb/playrrweb.component';\n\n\n@NgModule({\n  declarations: [RrWebComponent, PlayrrwebComponent],\n  imports: [\n    CommonModule,\n    RrWebRoutingModule\n  ]\n})\nexport class RrWebModule { }\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nexport { __assign, __read, __spread, __values };\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PlayrrwebComponent } from './playrrweb/playrrweb.component';\nimport { RrWebComponent } from './rr-web/rr-web.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RrWebComponent,\n  },\n  {\n    path: 'play',\n      component: PlayrrwebComponent,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class RrWebRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { RrwebService } from 'src/app/service/rrweb.service';\n\n@Component({\n  selector: 'app-playrrweb',\n  templateUrl: './playrrweb.component.html',\n  styleUrls: ['./playrrweb.component.scss']\n})\nexport class PlayrrwebComponent implements OnInit {\n  public replayer;\n  constructor(\n    public rrwebService: RrwebService,\n  ) { }\n\n  ngOnInit(): void {\n    console.log(this.rrwebService.events, 'init');\n  }\n  playrecord() {\n    console.log(this.rrwebService.events, 'playrecord');\n    this.replayer.play();\n  }\n}\n","<div>\n    <p>playrrweb works!</p>\n    <div class=\"footer\" (click)=\"playrecord()\"> 播放</div>\n</div>","var MARK = 'v1';\n\nexport { MARK };\n","var StackFrame = (function () {\n    function StackFrame(obj) {\n        this.fileName = obj.fileName || '';\n        this.functionName = obj.functionName || '';\n        this.lineNumber = obj.lineNumber;\n        this.columnNumber = obj.columnNumber;\n    }\n    StackFrame.prototype.toString = function () {\n        var lineNumber = this.lineNumber || '';\n        var columnNumber = this.columnNumber || '';\n        if (this.functionName) {\n            return (this.functionName +\n                ' (' +\n                this.fileName +\n                ':' +\n                lineNumber +\n                ':' +\n                columnNumber +\n                ')');\n        }\n        return this.fileName + ':' + lineNumber + ':' + columnNumber;\n    };\n    return StackFrame;\n}());\nvar FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\nvar CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\nvar SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\nvar ErrorStackParser = {\n    parse: function (error) {\n        if (typeof error.stacktrace !== 'undefined' ||\n            typeof error['opera#sourceloc'] !== 'undefined') {\n            return this.parseOpera(error);\n        }\n        else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n            return this.parseV8OrIE(error);\n        }\n        else if (error.stack) {\n            return this.parseFFOrSafari(error);\n        }\n        else {\n            throw new Error('Cannot parse given Error object');\n        }\n    },\n    extractLocation: function (urlLike) {\n        if (urlLike.indexOf(':') === -1) {\n            return [urlLike];\n        }\n        var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n        var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n        if (!parts)\n            throw new Error(\"Cannot parse given url: \" + urlLike);\n        return [parts[1], parts[2] || undefined, parts[3] || undefined];\n    },\n    parseV8OrIE: function (error) {\n        var filtered = error.stack.split('\\n').filter(function (line) {\n            return !!line.match(CHROME_IE_STACK_REGEXP);\n        }, this);\n        return filtered.map(function (line) {\n            if (line.indexOf('(eval ') > -1) {\n                line = line\n                    .replace(/eval code/g, 'eval')\n                    .replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\n            }\n            var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(');\n            var location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\n            sanitizedLine = location\n                ? sanitizedLine.replace(location[0], '')\n                : sanitizedLine;\n            var tokens = sanitizedLine.split(/\\s+/).slice(1);\n            var locationParts = this.extractLocation(location ? location[1] : tokens.pop());\n            var functionName = tokens.join(' ') || undefined;\n            var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1\n                ? undefined\n                : locationParts[0];\n            return new StackFrame({\n                functionName: functionName,\n                fileName: fileName,\n                lineNumber: locationParts[1],\n                columnNumber: locationParts[2],\n            });\n        }, this);\n    },\n    parseFFOrSafari: function (error) {\n        var filtered = error.stack.split('\\n').filter(function (line) {\n            return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n        }, this);\n        return filtered.map(function (line) {\n            if (line.indexOf(' > eval') > -1) {\n                line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n            }\n            if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                return new StackFrame({\n                    functionName: line,\n                });\n            }\n            else {\n                var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                var matches = line.match(functionNameRegex);\n                var functionName = matches && matches[1] ? matches[1] : undefined;\n                var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                });\n            }\n        }, this);\n    },\n    parseOpera: function (e) {\n        if (!e.stacktrace ||\n            (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n            return this.parseOpera9(e);\n        }\n        else if (!e.stack) {\n            return this.parseOpera10(e);\n        }\n        else {\n            return this.parseOpera11(e);\n        }\n    },\n    parseOpera9: function (e) {\n        var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n        var lines = e.message.split('\\n');\n        var result = [];\n        for (var i = 2, len = lines.length; i < len; i += 2) {\n            var match = lineRE.exec(lines[i]);\n            if (match) {\n                result.push(new StackFrame({\n                    fileName: match[2],\n                    lineNumber: parseFloat(match[1]),\n                }));\n            }\n        }\n        return result;\n    },\n    parseOpera10: function (e) {\n        var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n        var lines = e.stacktrace.split('\\n');\n        var result = [];\n        for (var i = 0, len = lines.length; i < len; i += 2) {\n            var match = lineRE.exec(lines[i]);\n            if (match) {\n                result.push(new StackFrame({\n                    functionName: match[3] || undefined,\n                    fileName: match[2],\n                    lineNumber: parseFloat(match[1]),\n                }));\n            }\n        }\n        return result;\n    },\n    parseOpera11: function (error) {\n        var filtered = error.stack.split('\\n').filter(function (line) {\n            return (!!line.match(FIREFOX_SAFARI_STACK_REGEXP) &&\n                !line.match(/^Error created at/));\n        }, this);\n        return filtered.map(function (line) {\n            var tokens = line.split('@');\n            var locationParts = this.extractLocation(tokens.pop());\n            var functionCall = tokens.shift() || '';\n            var functionName = functionCall\n                .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                .replace(/\\([^)]*\\)/g, '') || undefined;\n            return new StackFrame({\n                functionName: functionName,\n                fileName: locationParts[0],\n                lineNumber: locationParts[1],\n                columnNumber: locationParts[2],\n            });\n        }, this);\n    },\n};\n\nexport { ErrorStackParser, StackFrame };\n","import { __values } from '../ext/tslib/tslib.es6.js';\nimport { IGNORED_NODE, isShadowRoot, NodeType } from '../ext/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { EventType, IncrementalSource } from './types.js';\n\nfunction on(type, fn, target) {\n    if (target === void 0) { target = document; }\n    var options = { capture: true, passive: true };\n    target.addEventListener(type, fn, options);\n    return function () { return target.removeEventListener(type, fn, options); };\n}\nfunction createMirror() {\n    return {\n        map: {},\n        getId: function (n) {\n            if (!n.__sn) {\n                return -1;\n            }\n            return n.__sn.id;\n        },\n        getNode: function (id) {\n            return this.map[id] || null;\n        },\n        removeNodeFromMap: function (n) {\n            var _this = this;\n            var id = n.__sn && n.__sn.id;\n            delete this.map[id];\n            if (n.childNodes) {\n                n.childNodes.forEach(function (child) {\n                    return _this.removeNodeFromMap(child);\n                });\n            }\n        },\n        has: function (id) {\n            return this.map.hasOwnProperty(id);\n        },\n        reset: function () {\n            this.map = {};\n        },\n    };\n}\nvar DEPARTED_MIRROR_ACCESS_WARNING = 'Please stop import mirror directly. Instead of that,' +\n    '\\r\\n' +\n    'now you can use replayer.getMirror() to access the mirror instance of a replayer,' +\n    '\\r\\n' +\n    'or you can use record.mirror to access the mirror instance during recording.';\nvar _mirror = {\n    map: {},\n    getId: function () {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n        return -1;\n    },\n    getNode: function () {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n        return null;\n    },\n    removeNodeFromMap: function () {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    },\n    has: function () {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n        return false;\n    },\n    reset: function () {\n        console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n    },\n};\nif (typeof window !== 'undefined' && window.Proxy && window.Reflect) {\n    _mirror = new Proxy(_mirror, {\n        get: function (target, prop, receiver) {\n            if (prop === 'map') {\n                console.error(DEPARTED_MIRROR_ACCESS_WARNING);\n            }\n            return Reflect.get(target, prop, receiver);\n        },\n    });\n}\nfunction throttle(func, wait, options) {\n    if (options === void 0) { options = {}; }\n    var timeout = null;\n    var previous = 0;\n    return function (arg) {\n        var now = Date.now();\n        if (!previous && options.leading === false) {\n            previous = now;\n        }\n        var remaining = wait - (now - previous);\n        var context = this;\n        var args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            func.apply(context, args);\n        }\n        else if (!timeout && options.trailing !== false) {\n            timeout = window.setTimeout(function () {\n                previous = options.leading === false ? 0 : Date.now();\n                timeout = null;\n                func.apply(context, args);\n            }, remaining);\n        }\n    };\n}\nfunction hookSetter(target, key, d, isRevoked, win) {\n    if (win === void 0) { win = window; }\n    var original = win.Object.getOwnPropertyDescriptor(target, key);\n    win.Object.defineProperty(target, key, isRevoked\n        ? d\n        : {\n            set: function (value) {\n                var _this = this;\n                setTimeout(function () {\n                    d.set.call(_this, value);\n                }, 0);\n                if (original && original.set) {\n                    original.set.call(this, value);\n                }\n            },\n        });\n    return function () { return hookSetter(target, key, original || {}, true); };\n}\nfunction patch(source, name, replacement) {\n    try {\n        if (!(name in source)) {\n            return function () { };\n        }\n        var original_1 = source[name];\n        var wrapped = replacement(original_1);\n        if (typeof wrapped === 'function') {\n            wrapped.prototype = wrapped.prototype || {};\n            Object.defineProperties(wrapped, {\n                __rrweb_original__: {\n                    enumerable: false,\n                    value: original_1,\n                },\n            });\n        }\n        source[name] = wrapped;\n        return function () {\n            source[name] = original_1;\n        };\n    }\n    catch (_a) {\n        return function () { };\n    }\n}\nfunction getWindowHeight() {\n    return (window.innerHeight ||\n        (document.documentElement && document.documentElement.clientHeight) ||\n        (document.body && document.body.clientHeight));\n}\nfunction getWindowWidth() {\n    return (window.innerWidth ||\n        (document.documentElement && document.documentElement.clientWidth) ||\n        (document.body && document.body.clientWidth));\n}\nfunction isBlocked(node, blockClass) {\n    if (!node) {\n        return false;\n    }\n    if (node.nodeType === node.ELEMENT_NODE) {\n        var needBlock_1 = false;\n        if (typeof blockClass === 'string') {\n            needBlock_1 = node.classList.contains(blockClass);\n        }\n        else {\n            node.classList.forEach(function (className) {\n                if (blockClass.test(className)) {\n                    needBlock_1 = true;\n                }\n            });\n        }\n        return needBlock_1 || isBlocked(node.parentNode, blockClass);\n    }\n    if (node.nodeType === node.TEXT_NODE) {\n        return isBlocked(node.parentNode, blockClass);\n    }\n    return isBlocked(node.parentNode, blockClass);\n}\nfunction isIgnored(n) {\n    if ('__sn' in n) {\n        return n.__sn.id === IGNORED_NODE;\n    }\n    return false;\n}\nfunction isAncestorRemoved(target, mirror) {\n    if (isShadowRoot(target)) {\n        return false;\n    }\n    var id = mirror.getId(target);\n    if (!mirror.has(id)) {\n        return true;\n    }\n    if (target.parentNode &&\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\n        return false;\n    }\n    if (!target.parentNode) {\n        return true;\n    }\n    return isAncestorRemoved(target.parentNode, mirror);\n}\nfunction isTouchEvent(event) {\n    return Boolean(event.changedTouches);\n}\nfunction polyfill(win) {\n    if (win === void 0) { win = window; }\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\n        win.NodeList.prototype.forEach = Array.prototype\n            .forEach;\n    }\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\n        win.DOMTokenList.prototype.forEach = Array.prototype\n            .forEach;\n    }\n    if (!Node.prototype.contains) {\n        Node.prototype.contains = function contains(node) {\n            if (!(0 in arguments)) {\n                throw new TypeError('1 argument is required');\n            }\n            do {\n                if (this === node) {\n                    return true;\n                }\n            } while ((node = node && node.parentNode));\n            return false;\n        };\n    }\n}\nfunction needCastInSyncMode(event) {\n    switch (event.type) {\n        case EventType.DomContentLoaded:\n        case EventType.Load:\n        case EventType.Custom:\n            return false;\n        case EventType.FullSnapshot:\n        case EventType.Meta:\n        case EventType.Plugin:\n            return true;\n    }\n    switch (event.data.source) {\n        case IncrementalSource.MouseMove:\n        case IncrementalSource.MouseInteraction:\n        case IncrementalSource.TouchMove:\n        case IncrementalSource.MediaInteraction:\n            return false;\n        case IncrementalSource.ViewportResize:\n        case IncrementalSource.StyleSheetRule:\n        case IncrementalSource.Scroll:\n        case IncrementalSource.Input:\n            return true;\n    }\n    return true;\n}\nvar TreeIndex = (function () {\n    function TreeIndex() {\n        this.reset();\n    }\n    TreeIndex.prototype.add = function (mutation) {\n        var parentTreeNode = this.indexes.get(mutation.parentId);\n        var treeNode = {\n            id: mutation.node.id,\n            mutation: mutation,\n            children: [],\n            texts: [],\n            attributes: [],\n        };\n        if (!parentTreeNode) {\n            this.tree[treeNode.id] = treeNode;\n        }\n        else {\n            treeNode.parent = parentTreeNode;\n            parentTreeNode.children[treeNode.id] = treeNode;\n        }\n        this.indexes.set(treeNode.id, treeNode);\n    };\n    TreeIndex.prototype.remove = function (mutation, mirror) {\n        var _this = this;\n        var parentTreeNode = this.indexes.get(mutation.parentId);\n        var treeNode = this.indexes.get(mutation.id);\n        var deepRemoveFromMirror = function (id) {\n            _this.removeIdSet.add(id);\n            var node = mirror.getNode(id);\n            node === null || node === void 0 ? void 0 : node.childNodes.forEach(function (childNode) {\n                if ('__sn' in childNode) {\n                    deepRemoveFromMirror(childNode.__sn.id);\n                }\n            });\n        };\n        var deepRemoveFromTreeIndex = function (node) {\n            _this.removeIdSet.add(node.id);\n            Object.values(node.children).forEach(function (n) { return deepRemoveFromTreeIndex(n); });\n            var _treeNode = _this.indexes.get(node.id);\n            if (_treeNode) {\n                var _parentTreeNode = _treeNode.parent;\n                if (_parentTreeNode) {\n                    delete _treeNode.parent;\n                    delete _parentTreeNode.children[_treeNode.id];\n                    _this.indexes.delete(mutation.id);\n                }\n            }\n        };\n        if (!treeNode) {\n            this.removeNodeMutations.push(mutation);\n            deepRemoveFromMirror(mutation.id);\n        }\n        else if (!parentTreeNode) {\n            delete this.tree[treeNode.id];\n            this.indexes.delete(treeNode.id);\n            deepRemoveFromTreeIndex(treeNode);\n        }\n        else {\n            delete treeNode.parent;\n            delete parentTreeNode.children[treeNode.id];\n            this.indexes.delete(mutation.id);\n            deepRemoveFromTreeIndex(treeNode);\n        }\n    };\n    TreeIndex.prototype.text = function (mutation) {\n        var treeNode = this.indexes.get(mutation.id);\n        if (treeNode) {\n            treeNode.texts.push(mutation);\n        }\n        else {\n            this.textMutations.push(mutation);\n        }\n    };\n    TreeIndex.prototype.attribute = function (mutation) {\n        var treeNode = this.indexes.get(mutation.id);\n        if (treeNode) {\n            treeNode.attributes.push(mutation);\n        }\n        else {\n            this.attributeMutations.push(mutation);\n        }\n    };\n    TreeIndex.prototype.scroll = function (d) {\n        this.scrollMap.set(d.id, d);\n    };\n    TreeIndex.prototype.input = function (d) {\n        this.inputMap.set(d.id, d);\n    };\n    TreeIndex.prototype.flush = function () {\n        var e_1, _a, e_2, _b;\n        var _this = this;\n        var _c = this, tree = _c.tree, removeNodeMutations = _c.removeNodeMutations, textMutations = _c.textMutations, attributeMutations = _c.attributeMutations;\n        var batchMutationData = {\n            source: IncrementalSource.Mutation,\n            removes: removeNodeMutations,\n            texts: textMutations,\n            attributes: attributeMutations,\n            adds: [],\n        };\n        var walk = function (treeNode, removed) {\n            if (removed) {\n                _this.removeIdSet.add(treeNode.id);\n            }\n            batchMutationData.texts = batchMutationData.texts\n                .concat(removed ? [] : treeNode.texts)\n                .filter(function (m) { return !_this.removeIdSet.has(m.id); });\n            batchMutationData.attributes = batchMutationData.attributes\n                .concat(removed ? [] : treeNode.attributes)\n                .filter(function (m) { return !_this.removeIdSet.has(m.id); });\n            if (!_this.removeIdSet.has(treeNode.id) &&\n                !_this.removeIdSet.has(treeNode.mutation.parentId) &&\n                !removed) {\n                batchMutationData.adds.push(treeNode.mutation);\n                if (treeNode.children) {\n                    Object.values(treeNode.children).forEach(function (n) { return walk(n, false); });\n                }\n            }\n            else {\n                Object.values(treeNode.children).forEach(function (n) { return walk(n, true); });\n            }\n        };\n        Object.values(tree).forEach(function (n) { return walk(n, false); });\n        try {\n            for (var _d = __values(this.scrollMap.keys()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var id = _e.value;\n                if (this.removeIdSet.has(id)) {\n                    this.scrollMap.delete(id);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        try {\n            for (var _f = __values(this.inputMap.keys()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                var id = _g.value;\n                if (this.removeIdSet.has(id)) {\n                    this.inputMap.delete(id);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        var scrollMap = new Map(this.scrollMap);\n        var inputMap = new Map(this.inputMap);\n        this.reset();\n        return {\n            mutationData: batchMutationData,\n            scrollMap: scrollMap,\n            inputMap: inputMap,\n        };\n    };\n    TreeIndex.prototype.reset = function () {\n        this.tree = [];\n        this.indexes = new Map();\n        this.removeNodeMutations = [];\n        this.textMutations = [];\n        this.attributeMutations = [];\n        this.removeIdSet = new Set();\n        this.scrollMap = new Map();\n        this.inputMap = new Map();\n    };\n    return TreeIndex;\n}());\nfunction queueToResolveTrees(queue) {\n    var e_3, _a;\n    var queueNodeMap = {};\n    var putIntoMap = function (m, parent) {\n        var nodeInTree = {\n            value: m,\n            parent: parent,\n            children: [],\n        };\n        queueNodeMap[m.node.id] = nodeInTree;\n        return nodeInTree;\n    };\n    var queueNodeTrees = [];\n    try {\n        for (var queue_1 = __values(queue), queue_1_1 = queue_1.next(); !queue_1_1.done; queue_1_1 = queue_1.next()) {\n            var mutation = queue_1_1.value;\n            var nextId = mutation.nextId, parentId = mutation.parentId;\n            if (nextId && nextId in queueNodeMap) {\n                var nextInTree = queueNodeMap[nextId];\n                if (nextInTree.parent) {\n                    var idx = nextInTree.parent.children.indexOf(nextInTree);\n                    nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\n                }\n                else {\n                    var idx = queueNodeTrees.indexOf(nextInTree);\n                    queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\n                }\n                continue;\n            }\n            if (parentId in queueNodeMap) {\n                var parentInTree = queueNodeMap[parentId];\n                parentInTree.children.push(putIntoMap(mutation, parentInTree));\n                continue;\n            }\n            queueNodeTrees.push(putIntoMap(mutation, null));\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (queue_1_1 && !queue_1_1.done && (_a = queue_1.return)) _a.call(queue_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return queueNodeTrees;\n}\nfunction iterateResolveTree(tree, cb) {\n    cb(tree.value);\n    for (var i = tree.children.length - 1; i >= 0; i--) {\n        iterateResolveTree(tree.children[i], cb);\n    }\n}\nfunction isIframeINode(node) {\n    if ('__sn' in node) {\n        return (node.__sn.type === NodeType.Element && node.__sn.tagName === 'iframe');\n    }\n    return false;\n}\nfunction getBaseDimension(node, rootIframe) {\n    var _a, _b;\n    var frameElement = (_b = (_a = node.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView) === null || _b === void 0 ? void 0 : _b.frameElement;\n    if (!frameElement || frameElement === rootIframe) {\n        return {\n            x: 0,\n            y: 0,\n            relativeScale: 1,\n            absoluteScale: 1,\n        };\n    }\n    var frameDimension = frameElement.getBoundingClientRect();\n    var frameBaseDimension = getBaseDimension(frameElement, rootIframe);\n    var relativeScale = frameDimension.height / frameElement.clientHeight;\n    return {\n        x: frameDimension.x * frameBaseDimension.relativeScale +\n            frameBaseDimension.x,\n        y: frameDimension.y * frameBaseDimension.relativeScale +\n            frameBaseDimension.y,\n        relativeScale: relativeScale,\n        absoluteScale: frameBaseDimension.absoluteScale * relativeScale,\n    };\n}\nfunction hasShadowRoot(n) {\n    var _a;\n    return Boolean((_a = n) === null || _a === void 0 ? void 0 : _a.shadowRoot);\n}\n\nexport { TreeIndex, _mirror, createMirror, getBaseDimension, getWindowHeight, getWindowWidth, hasShadowRoot, hookSetter, isAncestorRemoved, isBlocked, isIframeINode, isIgnored, isTouchEvent, iterateResolveTree, needCastInSyncMode, on, patch, polyfill, queueToResolveTrees, throttle };\n","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar t;!function(t){t[t.NotStarted=0]=\"NotStarted\",t[t.Running=1]=\"Running\",t[t.Stopped=2]=\"Stopped\";}(t||(t={}));var n={type:\"xstate.init\"};function e(t){return void 0===t?[]:[].concat(t)}function r(t){return {type:\"xstate.assign\",assignment:t}}function i(t,n){return \"string\"==typeof(t=\"string\"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:\"function\"==typeof t?{type:t.name,exec:t}:t}function o(t){return function(n){return t===n}}function a(t){return \"string\"==typeof t?{type:t}:t}function u(t,n){return {value:t,context:n,actions:[],changed:!1,matches:o(t)}}function c(t,n){void 0===n&&(n={});var r={config:t,_options:n,initialState:{value:t.initial,actions:e(t.states[t.initial].entry).map((function(t){return i(t,n.actions)})),context:t.context,matches:o(t.initial)},transition:function(n,c){var s,f,v=\"string\"==typeof n?{value:n,context:t.context}:n,l=v.value,p=v.context,g=a(c),y=t.states[l];if(y.on){var d=e(y.on[g.type]),x=function(n){if(void 0===n)return {value:u(l,p)};var e=\"string\"==typeof n?{target:n}:n,a=e.target,c=void 0===a?l:a,s=e.actions,f=void 0===s?[]:s,v=e.cond,d=p;if((void 0===v?function(){return !0}:v)(p,g)){var x=t.states[c],m=!1,h=[].concat(y.exit,f,x.entry).filter((function(t){return t})).map((function(t){return i(t,r._options.actions)})).filter((function(t){if(\"xstate.assign\"===t.type){m=!0;var n=Object.assign({},d);return \"function\"==typeof t.assignment?n=t.assignment(d,g):Object.keys(t.assignment).forEach((function(e){n[e]=\"function\"==typeof t.assignment[e]?t.assignment[e](d,g):t.assignment[e];})),d=n,!1}return !0}));return {value:{value:c,context:d,actions:h,changed:c!==l||h.length>0||m,matches:o(c)}}}};try{for(var m=function(t){var n=\"function\"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(d),h=m.next();!h.done;h=m.next()){var S=x(h.value);if(\"object\"==typeof S)return S.value}}catch(t){s={error:t};}finally{try{h&&!h.done&&(f=m.return)&&f.call(m);}finally{if(s)throw s.error}}}return u(l,p)}};return r}var s=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function f(e){var r=e.initialState,i=t.NotStarted,u=new Set,c={_machine:e,send:function(n){i===t.Running&&(r=e.transition(r,n),s(r,a(n)),u.forEach((function(t){return t(r)})));},subscribe:function(t){return u.add(t),t(r),{unsubscribe:function(){return u.delete(t)}}},start:function(a){if(a){var u=\"object\"==typeof a?a:{context:e.config.context,value:a};r={value:u.value,actions:[],context:u.context,matches:o(u.value)};}return i=t.Running,s(r,n),c},stop:function(){return i=t.Stopped,u.clear(),c},get state(){return r},get status(){return i}};return c}\n\nexport { t as InterpreterStatus, r as assign, c as createMachine, f as interpret };\n","function pathToSelector(node) {\n    if (!node || !node.outerHTML) {\n        return '';\n    }\n    var path = '';\n    while (node.parentElement) {\n        var name = node.localName;\n        if (!name) {\n            break;\n        }\n        name = name.toLowerCase();\n        var parent = node.parentElement;\n        var domSiblings = [];\n        if (parent.children && parent.children.length > 0) {\n            for (var i = 0; i < parent.children.length; i++) {\n                var sibling = parent.children[i];\n                if (sibling.localName && sibling.localName.toLowerCase) {\n                    if (sibling.localName.toLowerCase() === name) {\n                        domSiblings.push(sibling);\n                    }\n                }\n            }\n        }\n        if (domSiblings.length > 1) {\n            name += ':eq(' + domSiblings.indexOf(node) + ')';\n        }\n        path = name + (path ? '>' + path : '');\n        node = parent;\n    }\n    return path;\n}\nfunction stringify(obj, stringifyOptions) {\n    var options = {\n        numOfKeysLimit: 50,\n    };\n    Object.assign(options, stringifyOptions);\n    var stack = [];\n    var keys = [];\n    return JSON.stringify(obj, function (key, value) {\n        if (stack.length > 0) {\n            var thisPos = stack.indexOf(this);\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n            if (~stack.indexOf(value)) {\n                if (stack[0] === value) {\n                    value = '[Circular ~]';\n                }\n                else {\n                    value =\n                        '[Circular ~.' +\n                            keys.slice(0, stack.indexOf(value)).join('.') +\n                            ']';\n                }\n            }\n        }\n        else {\n            stack.push(value);\n        }\n        if (value === null || value === undefined) {\n            return value;\n        }\n        if (shouldToString(value)) {\n            return toString(value);\n        }\n        if (value instanceof Event) {\n            var eventResult = {};\n            for (var eventKey in value) {\n                var eventValue = value[eventKey];\n                if (Array.isArray(eventValue)) {\n                    eventResult[eventKey] = pathToSelector(eventValue.length ? eventValue[0] : null);\n                }\n                else {\n                    eventResult[eventKey] = eventValue;\n                }\n            }\n            return eventResult;\n        }\n        else if (value instanceof Node) {\n            if (value instanceof HTMLElement) {\n                return value ? value.outerHTML : '';\n            }\n            return value.nodeName;\n        }\n        return value;\n    });\n    function shouldToString(_obj) {\n        if (typeof _obj === 'object' &&\n            Object.keys(_obj).length > options.numOfKeysLimit) {\n            return true;\n        }\n        if (typeof _obj === 'function') {\n            return true;\n        }\n        return false;\n    }\n    function toString(_obj) {\n        var str = _obj.toString();\n        if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\n            str = str.slice(0, options.stringLengthLimit) + \"...\";\n        }\n        return str;\n    }\n}\n\nexport { stringify };\n","import { EventType, IncrementalSource } from '../types.js';\n\nvar Timer = (function () {\n    function Timer(actions, speed) {\n        if (actions === void 0) { actions = []; }\n        this.timeOffset = 0;\n        this.raf = null;\n        this.actions = actions;\n        this.speed = speed;\n    }\n    Timer.prototype.addAction = function (action) {\n        var index = this.findActionIndex(action);\n        this.actions.splice(index, 0, action);\n    };\n    Timer.prototype.addActions = function (actions) {\n        this.actions = this.actions.concat(actions);\n    };\n    Timer.prototype.start = function () {\n        this.timeOffset = 0;\n        var lastTimestamp = performance.now();\n        var actions = this.actions;\n        var self = this;\n        function check() {\n            var time = performance.now();\n            self.timeOffset += (time - lastTimestamp) * self.speed;\n            lastTimestamp = time;\n            while (actions.length) {\n                var action = actions[0];\n                if (self.timeOffset >= action.delay) {\n                    actions.shift();\n                    action.doAction();\n                }\n                else {\n                    break;\n                }\n            }\n            if (actions.length > 0 || self.liveMode) {\n                self.raf = requestAnimationFrame(check);\n            }\n        }\n        this.raf = requestAnimationFrame(check);\n    };\n    Timer.prototype.clear = function () {\n        if (this.raf) {\n            cancelAnimationFrame(this.raf);\n            this.raf = null;\n        }\n        this.actions.length = 0;\n    };\n    Timer.prototype.setSpeed = function (speed) {\n        this.speed = speed;\n    };\n    Timer.prototype.toggleLiveMode = function (mode) {\n        this.liveMode = mode;\n    };\n    Timer.prototype.isActive = function () {\n        return this.raf !== null;\n    };\n    Timer.prototype.findActionIndex = function (action) {\n        var start = 0;\n        var end = this.actions.length - 1;\n        while (start <= end) {\n            var mid = Math.floor((start + end) / 2);\n            if (this.actions[mid].delay < action.delay) {\n                start = mid + 1;\n            }\n            else if (this.actions[mid].delay > action.delay) {\n                end = mid - 1;\n            }\n            else {\n                return mid;\n            }\n        }\n        return start;\n    };\n    return Timer;\n}());\nfunction addDelay(event, baselineTime) {\n    if (event.type === EventType.IncrementalSnapshot &&\n        event.data.source === IncrementalSource.MouseMove) {\n        var firstOffset = event.data.positions[0].timeOffset;\n        var firstTimestamp = event.timestamp + firstOffset;\n        event.delay = firstTimestamp - baselineTime;\n        return firstTimestamp - baselineTime;\n    }\n    event.delay = event.timestamp - baselineTime;\n    return event.delay;\n}\n\nexport { Timer, addDelay };\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n","function polyfill(w, d) {\n    if (w === void 0) { w = window; }\n    if (d === void 0) { d = document; }\n    if ('scrollBehavior' in d.documentElement.style &&\n        w.__forceSmoothScrollPolyfill__ !== true) {\n        return;\n    }\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n    var original = {\n        scroll: w.scroll || w.scrollTo,\n        scrollBy: w.scrollBy,\n        elementScroll: Element.prototype.scroll || scrollElement,\n        scrollIntoView: Element.prototype.scrollIntoView,\n    };\n    var now = w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n    function isMicrosoftBrowser(userAgent) {\n        var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n        return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n    function scrollElement(x, y) {\n        this.scrollLeft = x;\n        this.scrollTop = y;\n    }\n    function ease(k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n    function shouldBailOut(firstArg) {\n        if (firstArg === null ||\n            typeof firstArg !== 'object' ||\n            firstArg.behavior === undefined ||\n            firstArg.behavior === 'auto' ||\n            firstArg.behavior === 'instant') {\n            return true;\n        }\n        if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n            return false;\n        }\n        throw new TypeError('behavior member of ScrollOptions ' +\n            firstArg.behavior +\n            ' is not a valid value for enumeration ScrollBehavior.');\n    }\n    function hasScrollableSpace(el, axis) {\n        if (axis === 'Y') {\n            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n        }\n        if (axis === 'X') {\n            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n        }\n    }\n    function canOverflow(el, axis) {\n        var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n        return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n    function isScrollable(el) {\n        var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n        var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n        return isScrollableY || isScrollableX;\n    }\n    function findScrollableParent(el) {\n        while (el !== d.body && isScrollable(el) === false) {\n            el = el.parentNode || el.host;\n        }\n        return el;\n    }\n    function step(context) {\n        var time = now();\n        var value;\n        var currentX;\n        var currentY;\n        var elapsed = (time - context.startTime) / SCROLL_TIME;\n        elapsed = elapsed > 1 ? 1 : elapsed;\n        value = ease(elapsed);\n        currentX = context.startX + (context.x - context.startX) * value;\n        currentY = context.startY + (context.y - context.startY) * value;\n        context.method.call(context.scrollable, currentX, currentY);\n        if (currentX !== context.x || currentY !== context.y) {\n            w.requestAnimationFrame(step.bind(w, context));\n        }\n    }\n    function smoothScroll(el, x, y) {\n        var scrollable;\n        var startX;\n        var startY;\n        var method;\n        var startTime = now();\n        if (el === d.body) {\n            scrollable = w;\n            startX = w.scrollX || w.pageXOffset;\n            startY = w.scrollY || w.pageYOffset;\n            method = original.scroll;\n        }\n        else {\n            scrollable = el;\n            startX = el.scrollLeft;\n            startY = el.scrollTop;\n            method = scrollElement;\n        }\n        step({\n            scrollable: scrollable,\n            method: method,\n            startTime: startTime,\n            startX: startX,\n            startY: startY,\n            x: x,\n            y: y,\n        });\n    }\n    w.scroll = w.scrollTo = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0]) === true) {\n            original.scroll.call(w, arguments[0].left !== undefined\n                ? arguments[0].left\n                : typeof arguments[0] !== 'object'\n                    ? arguments[0]\n                    : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\n                ? arguments[0].top\n                : arguments[1] !== undefined\n                    ? arguments[1]\n                    : w.scrollY || w.pageYOffset);\n            return;\n        }\n        smoothScroll.call(w, d.body, arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : w.scrollY || w.pageYOffset);\n    };\n    w.scrollBy = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0])) {\n            original.scrollBy.call(w, arguments[0].left !== undefined\n                ? arguments[0].left\n                : typeof arguments[0] !== 'object'\n                    ? arguments[0]\n                    : 0, arguments[0].top !== undefined\n                ? arguments[0].top\n                : arguments[1] !== undefined\n                    ? arguments[1]\n                    : 0);\n            return;\n        }\n        smoothScroll.call(w, d.body, ~~arguments[0].left + (w.scrollX || w.pageXOffset), ~~arguments[0].top + (w.scrollY || w.pageYOffset));\n    };\n    Element.prototype.scroll = Element.prototype.scrollTo = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0]) === true) {\n            if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n                throw new SyntaxError('Value could not be converted');\n            }\n            original.elementScroll.call(this, arguments[0].left !== undefined\n                ? ~~arguments[0].left\n                : typeof arguments[0] !== 'object'\n                    ? ~~arguments[0]\n                    : this.scrollLeft, arguments[0].top !== undefined\n                ? ~~arguments[0].top\n                : arguments[1] !== undefined\n                    ? ~~arguments[1]\n                    : this.scrollTop);\n            return;\n        }\n        var left = arguments[0].left;\n        var top = arguments[0].top;\n        smoothScroll.call(this, this, typeof left === 'undefined' ? this.scrollLeft : ~~left, typeof top === 'undefined' ? this.scrollTop : ~~top);\n    };\n    Element.prototype.scrollBy = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0]) === true) {\n            original.elementScroll.call(this, arguments[0].left !== undefined\n                ? ~~arguments[0].left + this.scrollLeft\n                : ~~arguments[0] + this.scrollLeft, arguments[0].top !== undefined\n                ? ~~arguments[0].top + this.scrollTop\n                : ~~arguments[1] + this.scrollTop);\n            return;\n        }\n        this.scroll({\n            left: ~~arguments[0].left + this.scrollLeft,\n            top: ~~arguments[0].top + this.scrollTop,\n            behavior: arguments[0].behavior,\n        });\n    };\n    Element.prototype.scrollIntoView = function () {\n        if (shouldBailOut(arguments[0]) === true) {\n            original.scrollIntoView.call(this, arguments[0] === undefined ? true : arguments[0]);\n            return;\n        }\n        var scrollableParent = findScrollableParent(this);\n        var parentRects = scrollableParent.getBoundingClientRect();\n        var clientRects = this.getBoundingClientRect();\n        if (scrollableParent !== d.body) {\n            smoothScroll.call(this, scrollableParent, scrollableParent.scrollLeft + clientRects.left - parentRects.left, scrollableParent.scrollTop + clientRects.top - parentRects.top);\n            if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n                w.scrollBy({\n                    left: parentRects.left,\n                    top: parentRects.top,\n                    behavior: 'smooth',\n                });\n            }\n        }\n        else {\n            w.scrollBy({\n                left: clientRects.left,\n                top: clientRects.top,\n                behavior: 'smooth',\n            });\n        }\n    };\n}\n\nexport { polyfill };\n"],"sourceRoot":"webpack:///"}